module.exports=[44373,a=>{"use strict";var b,c=((b=c||{}).Application="application",b.WebGLPipes="webgl-pipes",b.WebGLPipesAdaptor="webgl-pipes-adaptor",b.WebGLSystem="webgl-system",b.WebGPUPipes="webgpu-pipes",b.WebGPUPipesAdaptor="webgpu-pipes-adaptor",b.WebGPUSystem="webgpu-system",b.CanvasSystem="canvas-system",b.CanvasPipesAdaptor="canvas-pipes-adaptor",b.CanvasPipes="canvas-pipes",b.Asset="asset",b.LoadParser="load-parser",b.ResolveParser="resolve-parser",b.CacheParser="cache-parser",b.DetectionParser="detection-parser",b.MaskEffect="mask-effect",b.BlendMode="blend-mode",b.TextureSource="texture-source",b.Environment="environment",b.ShapeBuilder="shape-builder",b.Batcher="batcher",b);let d=a=>{if("function"==typeof a||"object"==typeof a&&a.extension){if(!a.extension)throw Error("Extension class must have an extension object");a={..."object"!=typeof a.extension?{type:a.extension}:a.extension,ref:a}}if("object"==typeof a)a={...a};else throw Error("Invalid extension type");return"string"==typeof a.type&&(a.type=[a.type]),a},e=(a,b)=>d(a).priority??b,f={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...a){return a.map(d).forEach(a=>{a.type.forEach(b=>this._removeHandlers[b]?.(a))}),this},add(...a){return a.map(d).forEach(a=>{a.type.forEach(b=>{let c=this._addHandlers,d=this._queue;c[b]?c[b]?.(a):(d[b]=d[b]||[],d[b]?.push(a))})}),this},handle(a,b,c){let d=this._addHandlers,e=this._removeHandlers;if(d[a]||e[a])throw Error(`Extension type ${a} already has a handler`);d[a]=b,e[a]=c;let f=this._queue;return f[a]&&(f[a]?.forEach(a=>b(a)),delete f[a]),this},handleByMap(a,b){return this.handle(a,a=>{a.name&&(b[a.name]=a.ref)},a=>{a.name&&delete b[a.name]})},handleByNamedList(a,b,c=-1){return this.handle(a,a=>{b.findIndex(b=>b.name===a.name)>=0||(b.push({name:a.name,value:a.ref}),b.sort((a,b)=>e(b.value,c)-e(a.value,c)))},a=>{let c=b.findIndex(b=>b.name===a.name);-1!==c&&b.splice(c,1)})},handleByList(a,b,c=-1){return this.handle(a,a=>{b.includes(a.ref)||(b.push(a.ref),b.sort((a,b)=>e(b,c)-e(a,c)))},a=>{let c=b.indexOf(a.ref);-1!==c&&b.splice(c,1)})},mixin(a,...b){for(let c of b)Object.defineProperties(a.prototype,Object.getOwnPropertyDescriptors(c))}};a.s(["ExtensionType",()=>c,"extensions",()=>f,"normalizeExtensionPriority",()=>e])},53686,(a,b,c)=>{"use strict";var d=Object.prototype.hasOwnProperty,e="~";function f(){}function g(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function h(a,b,c,d,f){if("function"!=typeof c)throw TypeError("The listener must be a function");var h=new g(c,d||a,f),i=e?e+b:b;return a._events[i]?a._events[i].fn?a._events[i]=[a._events[i],h]:a._events[i].push(h):(a._events[i]=h,a._eventsCount++),a}function i(a,b){0==--a._eventsCount?a._events=new f:delete a._events[b]}function j(){this._events=new f,this._eventsCount=0}Object.create&&(f.prototype=Object.create(null),new f().__proto__||(e=!1)),j.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)d.call(a,b)&&c.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},j.prototype.listeners=function(a){var b=e?e+a:a,c=this._events[b];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,g=Array(f);d<f;d++)g[d]=c[d].fn;return g},j.prototype.listenerCount=function(a){var b=e?e+a:a,c=this._events[b];return c?c.fn?1:c.length:0},j.prototype.emit=function(a,b,c,d,f,g){var h=e?e+a:a;if(!this._events[h])return!1;var i,j,k=this._events[h],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,f),!0;case 6:return k.fn.call(k.context,b,c,d,f,g),!0}for(j=1,i=Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},j.prototype.on=function(a,b,c){return h(this,a,b,c,!1)},j.prototype.once=function(a,b,c){return h(this,a,b,c,!0)},j.prototype.removeListener=function(a,b,c,d){var f=e?e+a:a;if(!this._events[f])return this;if(!b)return i(this,f),this;var g=this._events[f];if(g.fn)g.fn!==b||d&&!g.once||c&&g.context!==c||i(this,f);else{for(var h=0,j=[],k=g.length;h<k;h++)(g[h].fn!==b||d&&!g[h].once||c&&g[h].context!==c)&&j.push(g[h]);j.length?this._events[f]=1===j.length?j[0]:j:i(this,f)}return this},j.prototype.removeAllListeners=function(a){var b;return a?(b=e?e+a:a,this._events[b]&&i(this,b)):(this._events=new f,this._eventsCount=0),this},j.prototype.off=j.prototype.removeListener,j.prototype.addListener=j.prototype.on,j.prefixed=e,j.EventEmitter=j,b.exports=j},61607,a=>{"use strict";let b=a.i(53686).default;a.s(["default",0,b])},98063,33597,a=>{"use strict";var b={grad:.9,turn:360,rad:360/(2*Math.PI)},c=function(a){return"string"==typeof a?a.length>0:"number"==typeof a},d=function(a,b,c){return void 0===b&&(b=0),void 0===c&&(c=Math.pow(10,b)),Math.round(c*a)/c+0},e=function(a,b,c){return void 0===b&&(b=0),void 0===c&&(c=1),a>c?c:a>b?a:b},f=function(a){return(a=isFinite(a)?a%360:0)>0?a:a+360},g=function(a){return{r:e(a.r,0,255),g:e(a.g,0,255),b:e(a.b,0,255),a:e(a.a)}},h=function(a){return{r:d(a.r),g:d(a.g),b:d(a.b),a:d(a.a,3)}},i=/^#([0-9a-f]{3,8})$/i,j=function(a){var b=a.toString(16);return b.length<2?"0"+b:b},k=function(a){var b=a.r,c=a.g,d=a.b,e=a.a,f=Math.max(b,c,d),g=f-Math.min(b,c,d),h=g?f===b?(c-d)/g:f===c?2+(d-b)/g:4+(b-c)/g:0;return{h:60*(h<0?h+6:h),s:f?g/f*100:0,v:f/255*100,a:e}},l=function(a){var b=a.h,c=a.s,d=a.v,e=a.a;b=b/360*6,c/=100,d/=100;var f=Math.floor(b),g=d*(1-c),h=d*(1-(b-f)*c),i=d*(1-(1-b+f)*c),j=f%6;return{r:255*[d,h,g,g,i,d][j],g:255*[i,d,d,h,g,g][j],b:255*[g,g,i,d,d,h][j],a:e}},m=function(a){return{h:f(a.h),s:e(a.s,0,100),l:e(a.l,0,100),a:e(a.a)}},n=function(a){return{h:d(a.h),s:d(a.s),l:d(a.l),a:d(a.a,3)}},o=function(a){var b,c;return l((b=a.s,{h:a.h,s:(b*=((c=a.l)<50?c:100-c)/100)>0?2*b/(c+b)*100:0,v:c+b,a:a.a}))},p=function(a){var b,c,d,e;return{h:(b=k(a)).h,s:(e=(200-(c=b.s))*(d=b.v)/100)>0&&e<200?c*d/100/(e<=100?e:200-e)*100:0,l:e/2,a:b.a}},q=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,r=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,s=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,t=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,u={string:[[function(a){var b=i.exec(a);return b?(a=b[1]).length<=4?{r:parseInt(a[0]+a[0],16),g:parseInt(a[1]+a[1],16),b:parseInt(a[2]+a[2],16),a:4===a.length?d(parseInt(a[3]+a[3],16)/255,2):1}:6===a.length||8===a.length?{r:parseInt(a.substr(0,2),16),g:parseInt(a.substr(2,2),16),b:parseInt(a.substr(4,2),16),a:8===a.length?d(parseInt(a.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(a){var b=s.exec(a)||t.exec(a);return b?b[2]!==b[4]||b[4]!==b[6]?null:g({r:Number(b[1])/(b[2]?100/255:1),g:Number(b[3])/(b[4]?100/255:1),b:Number(b[5])/(b[6]?100/255:1),a:void 0===b[7]?1:Number(b[7])/(b[8]?100:1)}):null},"rgb"],[function(a){var c,d,e=q.exec(a)||r.exec(a);return e?o(m({h:(c=e[1],void 0===(d=e[2])&&(d="deg"),Number(c)*(b[d]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)})):null},"hsl"]],object:[[function(a){var b=a.r,d=a.g,e=a.b,f=a.a;return c(b)&&c(d)&&c(e)?g({r:Number(b),g:Number(d),b:Number(e),a:Number(void 0===f?1:f)}):null},"rgb"],[function(a){var b=a.h,d=a.s,e=a.l,f=a.a;return c(b)&&c(d)&&c(e)?o(m({h:Number(b),s:Number(d),l:Number(e),a:Number(void 0===f?1:f)})):null},"hsl"],[function(a){var b,d=a.h,g=a.s,h=a.v,i=a.a;return c(d)&&c(g)&&c(h)?l({h:f((b={h:Number(d),s:Number(g),v:Number(h),a:Number(void 0===i?1:i)}).h),s:e(b.s,0,100),v:e(b.v,0,100),a:e(b.a)}):null},"hsv"]]},v=function(a,b){for(var c=0;c<b.length;c++){var d=b[c][0](a);if(d)return[d,b[c][1]]}return[null,void 0]},w=function(a,b){var c=p(a);return{h:c.h,s:e(c.s+100*b,0,100),l:c.l,a:c.a}},x=function(a){return(299*a.r+587*a.g+114*a.b)/1e3/255},y=function(a,b){var c=p(a);return{h:c.h,s:c.s,l:e(c.l+100*b,0,100),a:c.a}},z=function(){function a(a){this.parsed=("string"==typeof a?v(a.trim(),u.string):"object"==typeof a&&null!==a?v(a,u.object):[null,void 0])[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return a.prototype.isValid=function(){return null!==this.parsed},a.prototype.brightness=function(){return d(x(this.rgba),2)},a.prototype.isDark=function(){return .5>x(this.rgba)},a.prototype.isLight=function(){return x(this.rgba)>=.5},a.prototype.toHex=function(){var a,b,c,e,f,g;return b=(a=h(this.rgba)).r,c=a.g,e=a.b,g=(f=a.a)<1?j(d(255*f)):"","#"+j(b)+j(c)+j(e)+g},a.prototype.toRgb=function(){return h(this.rgba)},a.prototype.toRgbString=function(){var a,b,c,d,e;return b=(a=h(this.rgba)).r,c=a.g,d=a.b,(e=a.a)<1?"rgba("+b+", "+c+", "+d+", "+e+")":"rgb("+b+", "+c+", "+d+")"},a.prototype.toHsl=function(){return n(p(this.rgba))},a.prototype.toHslString=function(){var a,b,c,d,e;return b=(a=n(p(this.rgba))).h,c=a.s,d=a.l,(e=a.a)<1?"hsla("+b+", "+c+"%, "+d+"%, "+e+")":"hsl("+b+", "+c+"%, "+d+"%)"},a.prototype.toHsv=function(){var a;return{h:d((a=k(this.rgba)).h),s:d(a.s),v:d(a.v),a:d(a.a,3)}},a.prototype.invert=function(){var a;return A({r:255-(a=this.rgba).r,g:255-a.g,b:255-a.b,a:a.a})},a.prototype.saturate=function(a){return void 0===a&&(a=.1),A(w(this.rgba,a))},a.prototype.desaturate=function(a){return void 0===a&&(a=.1),A(w(this.rgba,-a))},a.prototype.grayscale=function(){return A(w(this.rgba,-1))},a.prototype.lighten=function(a){return void 0===a&&(a=.1),A(y(this.rgba,a))},a.prototype.darken=function(a){return void 0===a&&(a=.1),A(y(this.rgba,-a))},a.prototype.rotate=function(a){return void 0===a&&(a=15),this.hue(this.hue()+a)},a.prototype.alpha=function(a){var b;return"number"==typeof a?A({r:(b=this.rgba).r,g:b.g,b:b.b,a:a}):d(this.rgba.a,3)},a.prototype.hue=function(a){var b=p(this.rgba);return"number"==typeof a?A({h:a,s:b.s,l:b.l,a:b.a}):d(b.h)},a.prototype.isEqual=function(a){return this.toHex()===A(a).toHex()},a}(),A=function(a){return a instanceof z?a:new z(a)},B=[];[function(a,b){var c={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},d={};for(var e in c)d[c[e]]=e;var f={};a.prototype.toName=function(b){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var e,g=d[this.toHex()];if(g)return g;if(null==b?void 0:b.closest){var h=this.toRgb(),i=1/0,j="black";if(!f.length)for(var k in c)f[k]=new a(c[k]).toRgb();for(var l in c){var m=(e=f[l],Math.pow(h.r-e.r,2)+Math.pow(h.g-e.g,2)+Math.pow(h.b-e.b,2));m<i&&(i=m,j=l)}return j}},b.string.push([function(b){var d=b.toLowerCase(),e="transparent"===d?"#0000":c[d];return e?new a(e).toRgb():null},"name"])}].forEach(function(a){0>B.indexOf(a)&&(a(z,u),B.push(a))});let C=class a{constructor(a=0xffffff){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=0xffffff,this.value=a}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(a){return this.value=a,this}set value(b){if(b instanceof a)this._value=this._cloneSource(b._value),this._int=b._int,this._components.set(b._components);else if(null===b)throw Error("Cannot set Color#value to null");else null!==this._value&&this._isSourceEqual(this._value,b)||(this._value=this._cloneSource(b),this._normalize(this._value))}get value(){return this._value}_cloneSource(a){if("string"==typeof a||"number"==typeof a||a instanceof Number||null===a);else if(Array.isArray(a)||ArrayBuffer.isView(a))return a.slice(0);else if("object"==typeof a&&null!==a)return{...a};return a}_isSourceEqual(a,b){let c=typeof a;if(c!==typeof b)return!1;if("number"===c||"string"===c||a instanceof Number);else if(Array.isArray(a)&&Array.isArray(b)||ArrayBuffer.isView(a)&&ArrayBuffer.isView(b))return a.length===b.length&&a.every((a,c)=>a===b[c]);else if(null!==a&&null!==b){let c=Object.keys(a),d=Object.keys(b);return c.length===d.length&&c.every(c=>a[c]===b[c])}return a===b}toRgba(){let[a,b,c,d]=this._components;return{r:a,g:b,b:c,a:d}}toRgb(){let[a,b,c]=this._components;return{r:a,g:b,b:c}}toRgbaString(){let[a,b,c]=this.toUint8RgbArray();return`rgba(${a},${b},${c},${this.alpha})`}toUint8RgbArray(a){let[b,c,d]=this._components;return this._arrayRgb||(this._arrayRgb=[]),a||(a=this._arrayRgb),a[0]=Math.round(255*b),a[1]=Math.round(255*c),a[2]=Math.round(255*d),a}toArray(a){this._arrayRgba||(this._arrayRgba=[]),a||(a=this._arrayRgba);let[b,c,d,e]=this._components;return a[0]=b,a[1]=c,a[2]=d,a[3]=e,a}toRgbArray(a){this._arrayRgb||(this._arrayRgb=[]),a||(a=this._arrayRgb);let[b,c,d]=this._components;return a[0]=b,a[1]=c,a[2]=d,a}toNumber(){return this._int}toBgrNumber(){let[a,b,c]=this.toUint8RgbArray();return(c<<16)+(b<<8)+a}toLittleEndianNumber(){let a=this._int;return(a>>16)+(65280&a)+((255&a)<<16)}multiply(b){let[c,d,e,f]=a._temp.setValue(b)._components;return this._components[0]*=c,this._components[1]*=d,this._components[2]*=e,this._components[3]*=f,this._refreshInt(),this._value=null,this}premultiply(a,b=!0){return b&&(this._components[0]*=a,this._components[1]*=a,this._components[2]*=a),this._components[3]=a,this._refreshInt(),this._value=null,this}toPremultiplied(a,b=!0){if(1===a)return -0x1000000+this._int;if(0===a)return b?0:this._int;let c=this._int>>16&255,d=this._int>>8&255,e=255&this._int;return b&&(c=c*a+.5|0,d=d*a+.5|0,e=e*a+.5|0),(255*a<<24)+(c<<16)+(d<<8)+e}toHex(){let a=this._int.toString(16);return`#${"000000".substring(0,6-a.length)+a}`}toHexa(){let a=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-a.length)+a}setAlpha(a){return this._components[3]=this._clamp(a),this}_normalize(b){let c,d,e,f;if(("number"==typeof b||b instanceof Number)&&b>=0&&b<=0xffffff){let a=b;c=(a>>16&255)/255,d=(a>>8&255)/255,e=(255&a)/255,f=1}else if((Array.isArray(b)||b instanceof Float32Array)&&b.length>=3&&b.length<=4)b=this._clamp(b),[c,d,e,f=1]=b;else if((b instanceof Uint8Array||b instanceof Uint8ClampedArray)&&b.length>=3&&b.length<=4)b=this._clamp(b,0,255),[c,d,e,f=255]=b,c/=255,d/=255,e/=255,f/=255;else if("string"==typeof b||"object"==typeof b){if("string"==typeof b){let c=a.HEX_PATTERN.exec(b);c&&(b=`#${c[2]}`)}let g=A(b);g.isValid()&&({r:c,g:d,b:e,a:f}=g.rgba,c/=255,d/=255,e/=255)}if(void 0!==c)this._components[0]=c,this._components[1]=d,this._components[2]=e,this._components[3]=f,this._refreshInt();else throw Error(`Unable to convert color ${b}`)}_refreshInt(){this._clamp(this._components);let[a,b,c]=this._components;this._int=(255*a<<16)+(255*b<<8)+(255*c|0)}_clamp(a,b=0,c=1){return"number"==typeof a?Math.min(Math.max(a,b),c):(a.forEach((d,e)=>{a[e]=Math.min(Math.max(d,b),c)}),a)}static isColorLike(b){return"number"==typeof b||"string"==typeof b||b instanceof Number||b instanceof a||Array.isArray(b)||b instanceof Uint8Array||b instanceof Uint8ClampedArray||b instanceof Float32Array||void 0!==b.r&&void 0!==b.g&&void 0!==b.b||void 0!==b.r&&void 0!==b.g&&void 0!==b.b&&void 0!==b.a||void 0!==b.h&&void 0!==b.s&&void 0!==b.l||void 0!==b.h&&void 0!==b.s&&void 0!==b.l&&void 0!==b.a||void 0!==b.h&&void 0!==b.s&&void 0!==b.v||void 0!==b.h&&void 0!==b.s&&void 0!==b.v&&void 0!==b.a}};C.shared=new C,C._temp=new C,C.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i,a.s(["Color",()=>C],98063);let D={cullArea:null,cullable:!1,cullableChildren:!0};a.s(["cullingMixin",()=>D],33597)},67309,34435,47790,a=>{"use strict";let b=2*Math.PI,c=180/Math.PI,d=Math.PI/180;a.s(["DEG_TO_RAD",()=>d,"PI_2",()=>b,"RAD_TO_DEG",()=>c],34435);class e{constructor(a=0,b=0){this.x=0,this.y=0,this.x=a,this.y=b}clone(){return new e(this.x,this.y)}copyFrom(a){return this.set(a.x,a.y),this}copyTo(a){return a.set(this.x,this.y),a}equals(a){return a.x===this.x&&a.y===this.y}set(a=0,b=a){return this.x=a,this.y=b,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return f.x=0,f.y=0,f}}let f=new e;a.s(["Point",()=>e],47790);class g{constructor(a=1,b=0,c=0,d=1,e=0,f=0){this.array=null,this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f}fromArray(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]}set(a,b,c,d,e,f){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f,this}toArray(a,b){this.array||(this.array=new Float32Array(9));let c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0),c[8]=1,c}apply(a,b){b=b||new e;let c=a.x,d=a.y;return b.x=this.a*c+this.c*d+this.tx,b.y=this.b*c+this.d*d+this.ty,b}applyInverse(a,b){b=b||new e;let c=this.a,d=this.b,f=this.c,g=this.d,h=this.tx,i=this.ty,j=1/(c*g+-(f*d)),k=a.x,l=a.y;return b.x=g*j*k+-f*j*l+(i*f-h*g)*j,b.y=c*j*l+-d*j*k+(-i*c+h*d)*j,b}translate(a,b){return this.tx+=a,this.ty+=b,this}scale(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this}rotate(a){let b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this}append(a){let b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this}appendFrom(a,b){let c=a.a,d=a.b,e=a.c,f=a.d,g=a.tx,h=a.ty,i=b.a,j=b.b,k=b.c,l=b.d;return this.a=c*i+d*k,this.b=c*j+d*l,this.c=e*i+f*k,this.d=e*j+f*l,this.tx=g*i+h*k+b.tx,this.ty=g*j+h*l+b.ty,this}setTransform(a,b,c,d,e,f,g,h,i){return this.a=Math.cos(g+i)*e,this.b=Math.sin(g+i)*e,this.c=-Math.sin(g-h)*f,this.d=Math.cos(g-h)*f,this.tx=a-(c*this.a+d*this.c),this.ty=b-(c*this.b+d*this.d),this}prepend(a){let b=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){let b=this.a,c=this.c;this.a=b*a.a+this.b*a.c,this.b=b*a.b+this.b*a.d,this.c=c*a.a+this.d*a.c,this.d=c*a.b+this.d*a.d}return this.tx=b*a.a+this.ty*a.c+a.tx,this.ty=b*a.b+this.ty*a.d+a.ty,this}decompose(a){let c=this.a,d=this.b,e=this.c,f=this.d,g=a.pivot,h=-Math.atan2(-e,f),i=Math.atan2(d,c),j=Math.abs(h+i);return j<1e-5||1e-5>Math.abs(b-j)?(a.rotation=i,a.skew.x=a.skew.y=0):(a.rotation=0,a.skew.x=h,a.skew.y=i),a.scale.x=Math.sqrt(c*c+d*d),a.scale.y=Math.sqrt(e*e+f*f),a.position.x=this.tx+(g.x*c+g.y*e),a.position.y=this.ty+(g.x*d+g.y*f),a}invert(){let a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let a=new g;return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a}copyTo(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a}copyFrom(a){return this.a=a.a,this.b=a.b,this.c=a.c,this.d=a.d,this.tx=a.tx,this.ty=a.ty,this}equals(a){return a.a===this.a&&a.b===this.b&&a.c===this.c&&a.d===this.d&&a.tx===this.tx&&a.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return i.identity()}static get shared(){return h.identity()}}let h=new g,i=new g;a.s(["Matrix",()=>g],67309)},37155,a=>{"use strict";class b{constructor(a,b,c){this._x=b||0,this._y=c||0,this._observer=a}clone(a){return new b(a??this._observer,this._x,this._y)}set(a=0,b=a){return(this._x!==a||this._y!==b)&&(this._x=a,this._y=b,this._observer._onUpdate(this)),this}copyFrom(a){return(this._x!==a.x||this._y!==a.y)&&(this._x=a.x,this._y=a.y,this._observer._onUpdate(this)),this}copyTo(a){return a.set(this._x,this._y),a}equals(a){return a.x===this._x&&a.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(a){this._x!==a&&(this._x=a,this._observer._onUpdate(this))}get y(){return this._y}set y(a){this._y!==a&&(this._y=a,this._observer._onUpdate(this))}}a.s(["ObservablePoint",()=>b])},90423,a=>{"use strict";let b={default:-1};function c(a="default"){return void 0===b[a]&&(b[a]=-1),++b[a]}function d(){for(let a in b)delete b[a]}a.s(["resetUids",()=>d,"uid",()=>c])},2897,a=>{"use strict";let b=new Set,c={quiet:!1,noColor:!1},d=(a,d,e=3)=>{if(c.quiet||b.has(d))return;let f=Error().stack,g=`${d}
Deprecated since v${a}`,h="function"==typeof console.groupCollapsed&&!c.noColor;void 0===f?console.warn("PixiJS Deprecation Warning: ",g):(f=f.split("\n").splice(e).join("\n"),h?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",g),console.warn(f),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",g),console.warn(f))),b.add(d)};Object.defineProperties(d,{quiet:{get:()=>c.quiet,set:a=>{c.quiet=a},enumerable:!0,configurable:!1},noColor:{get:()=>c.noColor,set:a=>{c.noColor=a},enumerable:!0,configurable:!1}}),a.s(["deprecation",()=>d,"v8_0_0",()=>"8.0.0","v8_3_4",()=>"8.3.4"])},51983,a=>{"use strict";let b=0;function c(...a){500!==b&&(500==++b?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...a))}a.s(["warn",()=>c])},3832,77184,87933,55539,5561,45679,95328,14664,73445,2677,26441,a=>{"use strict";let b={_registeredResources:new Set,register(a){this._registeredResources.add(a)},unregister(a){this._registeredResources.delete(a)},release(){this._registeredResources.forEach(a=>a.clear())},get registeredCount(){return this._registeredResources.size},isRegistered(a){return this._registeredResources.has(a)},reset(){this._registeredResources.clear()}};a.s(["GlobalResourceRegistry",()=>b],77184);class c{constructor(a,b){this._pool=[],this._count=0,this._index=0,this._classType=a,b&&this.prepopulate(b)}prepopulate(a){for(let b=0;b<a;b++)this._pool[this._index++]=new this._classType;this._count+=a}get(a){let b;return this._index>0?b=this._pool[--this._index]:(b=new this._classType,this._count++),b.init?.(a),b}return(a){a.reset?.(),this._pool[this._index++]=a}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){if(this._pool.length>0&&this._pool[0].destroy)for(let a=0;a<this._index;a++)this._pool[a].destroy();this._pool.length=0,this._count=0,this._index=0}}a.s(["Pool",()=>c],87933);class d{constructor(){this._poolsByClass=new Map}prepopulate(a,b){this.getPool(a).prepopulate(b)}get(a,b){return this.getPool(a).get(b)}return(a){this.getPool(a.constructor).return(a)}getPool(a){return this._poolsByClass.has(a)||this._poolsByClass.set(a,new c(a)),this._poolsByClass.get(a)}stats(){let a={};return this._poolsByClass.forEach(b=>{let c=a[b._classType.name]?b._classType.name+b._classType.ID:b._classType.name;a[c]={free:b.totalFree,used:b.totalUsed,size:b.totalSize}}),a}clear(){this._poolsByClass.forEach(a=>a.clear()),this._poolsByClass.clear()}}let e=new d;b.register(e),a.s(["BigPool",()=>e,"PoolGroupClass",()=>d],3832);var f=a.i(2897);let g={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(a){"boolean"==typeof a&&!1===a?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(!0===a?{}:a))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(val){(0,f.deprecation)("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(val)}};function h(a,b,c){let d,e=a.length;if(b>=e||0===c)return;c=b+c>e?e-b:c;let f=e-c;for(d=b;d<f;++d)a[d]=a[d+c];a.length=f}a.s(["cacheAsTextureMixin",()=>g],55539),a.s(["removeItems",()=>h],5561);let i={allowChildren:!0,removeChildren(a=0,b){let c=b??this.children.length,d=c-a,e=[];if(d>0&&d<=c){for(let b=c-1;b>=a;b--){let a=this.children[b];a&&(e.push(a),a.parent=null)}h(this.children,a,c);let b=this.renderGroup||this.parentRenderGroup;b&&b.removeChildren(e);for(let a=0;a<e.length;++a){let b=e[a];b.parentRenderLayer?.detach(b),this.emit("childRemoved",b,this,a),e[a].emit("removed",this)}return e.length>0&&this._didViewChangeTick++,e}if(0===d&&0===this.children.length)return e;throw RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(a){let b=this.getChildAt(a);return this.removeChild(b)},getChildAt(a){if(a<0||a>=this.children.length)throw Error(`getChildAt: Index (${a}) does not exist.`);return this.children[a]},setChildIndex(a,b){if(b<0||b>=this.children.length)throw Error(`The index ${b} supplied is out of bounds ${this.children.length}`);this.getChildIndex(a),this.addChildAt(a,b)},getChildIndex(a){let b=this.children.indexOf(a);if(-1===b)throw Error("The supplied Container must be a child of the caller");return b},addChildAt(a,b){this.allowChildren||(0,f.deprecation)(f.v8_0_0,"addChildAt: Only Containers will be allowed to add children in v8.0.0");let{children:c}=this;if(b<0||b>c.length)throw Error(`${a}addChildAt: The index ${b} supplied is out of bounds ${c.length}`);if(a.parent){let c=a.parent.children.indexOf(a);if(a.parent===this&&c===b)return a;-1!==c&&a.parent.children.splice(c,1)}b===c.length?c.push(a):c.splice(b,0,a),a.parent=this,a.didChange=!0,a._updateFlags=15;let d=this.renderGroup||this.parentRenderGroup;return d&&d.addChild(a),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",a,this,b),a.emit("added",this),a},swapChildren(a,b){if(a===b)return;let c=this.getChildIndex(a),d=this.getChildIndex(b);this.children[c]=b,this.children[d]=a;let e=this.renderGroup||this.parentRenderGroup;e&&(e.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...a){return 1===a.length?this.reparentChildAt(a[0],this.children.length):(a.forEach(a=>this.reparentChildAt(a,this.children.length)),a[0])},reparentChildAt(a,b){if(a.parent===this)return this.setChildIndex(a,b),a;let c=a.worldTransform.clone();a.removeFromParent(),this.addChildAt(a,b);let d=this.worldTransform.clone();return d.invert(),c.prepend(d),a.setFromMatrix(c),a},replaceChild(a,b){a.updateLocalTransform(),this.addChildAt(b,this.getChildIndex(a)),b.setFromMatrix(a.localTransform),b.updateLocalTransform(),this.removeChild(a)}};a.s(["childrenHelperMixin",()=>i],45679);let j={collectRenderables(a,b,c){this.parentRenderLayer&&this.parentRenderLayer!==c||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(a,b,c):this.renderGroup?b.renderPipes.renderGroup.addRenderGroup(this.renderGroup,a):this.collectRenderablesWithEffects(a,b,c))},collectRenderablesSimple(a,b,c){let d=this.children,e=d.length;for(let f=0;f<e;f++)d[f].collectRenderables(a,b,c)},collectRenderablesWithEffects(a,b,c){let{renderPipes:d}=b;for(let b=0;b<this.effects.length;b++){let c=this.effects[b];d[c.pipe].push(c,this,a)}this.collectRenderablesSimple(a,b,c);for(let b=this.effects.length-1;b>=0;b--){let c=this.effects[b];d[c.pipe].pop(c,this,a)}}};a.s(["collectRenderablesMixin",()=>j],95328);class k{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let a=0;a<this.filters.length;a++)this.filters[a].destroy();this.filters=null,this.filterArea=null}}a.s(["FilterEffect",()=>k],14664);var l=a.i(44373);class m{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(a=>{this.add({test:a.test,maskClass:a})}))}add(a){this._tests.push(a)}getMaskEffect(a){this._initialized||this.init();for(let b=0;b<this._tests.length;b++){let c=this._tests[b];if(c.test(a))return e.get(c.maskClass,a)}return a}returnMaskEffect(a){e.return(a)}}let n=new m;l.extensions.handleByList(l.ExtensionType.MaskEffect,n._effectClasses),a.s(["MaskEffectManager",()=>n,"MaskEffectManagerClass",()=>m],73445);let o={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){let a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)},addEffect(a){-1===this.effects.indexOf(a)&&(this.effects.push(a),this.effects.sort((a,b)=>a.priority-b.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(a){let b=this.effects.indexOf(a);-1!==b&&(this.effects.splice(b,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(value){let a=this._maskEffect;if(a?.mask===value||(a&&(this.removeEffect(a),n.returnMaskEffect(a),this._maskEffect=null),null==value))return;this._maskEffect=n.getMaskEffect(value),this.addEffect(this._maskEffect)},get mask(){return this._maskEffect?.mask},setMask(a){this._maskOptions={...this._maskOptions,...a},a.mask&&(this.mask=a.mask),this._markStructureAsChanged()},set filters(value){!Array.isArray(value)&&value&&(value=[value]);let a=this._filterEffect||(this._filterEffect=new k),b=value?.length>0,c=a.filters?.length>0;a.filters=Object.freeze(value=Array.isArray(value)?value.slice(0):value),b!==c&&(b?this.addEffect(a):(this.removeEffect(a),a.filters=value??null))},get filters(){return this._filterEffect?.filters},set filterArea(value){this._filterEffect||(this._filterEffect=new k),this._filterEffect.filterArea=value},get filterArea(){return this._filterEffect?.filterArea}};a.s(["effectsMixin",()=>o],2677);let p={label:null,get name(){return(0,f.deprecation)(f.v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label},set name(value){(0,f.deprecation)(f.v8_0_0,"Container.name property has been removed, use Container.label instead"),this.label=value},getChildByName(a,b=!1){return this.getChildByLabel(a,b)},getChildByLabel(a,b=!1){let c=this.children;for(let b=0;b<c.length;b++){let d=c[b];if(d.label===a||a instanceof RegExp&&a.test(d.label))return d}if(b)for(let b=0;b<c.length;b++){let d=c[b].getChildByLabel(a,!0);if(d)return d}return null},getChildrenByLabel(a,b=!1,c=[]){let d=this.children;for(let b=0;b<d.length;b++){let e=d[b];(e.label===a||a instanceof RegExp&&a.test(e.label))&&c.push(e)}if(b)for(let b=0;b<d.length;b++)d[b].getChildrenByLabel(a,!0,c);return c}};a.s(["findMixin",()=>p],26441)},31023,a=>{"use strict";var b=a.i(47790);let c=[new b.Point,new b.Point,new b.Point,new b.Point];class d{constructor(a=0,b=0,c=0,d=0){this.type="rectangle",this.x=Number(a),this.y=Number(b),this.width=Number(c),this.height=Number(d)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new d(0,0,0,0)}clone(){return new d(this.x,this.y,this.width,this.height)}copyFromBounds(a){return this.x=a.minX,this.y=a.minY,this.width=a.maxX-a.minX,this.height=a.maxY-a.minY,this}copyFrom(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this}copyTo(a){return a.copyFrom(this),a}contains(a,b){return!(this.width<=0)&&!(this.height<=0)&&!!(a>=this.x)&&!!(a<this.x+this.width)&&!!(b>=this.y)&&!!(b<this.y+this.height)}strokeContains(a,b,c,d=.5){let{width:e,height:f}=this;if(e<=0||f<=0)return!1;let g=this.x,h=this.y,i=c*(1-d),j=c-i;return a>=g-i&&a<=g+e+i&&b>=h-i&&b<=h+f+i&&!(a>g+j&&a<g+e-j&&b>h+j&&b<h+f-j)}intersects(a,b){if(!b){let b=this.x<a.x?a.x:this.x;if((this.right>a.right?a.right:this.right)<=b)return!1;let c=this.y<a.y?a.y:this.y;return(this.bottom>a.bottom?a.bottom:this.bottom)>c}let d=this.left,e=this.right,f=this.top,g=this.bottom;if(e<=d||g<=f)return!1;let h=c[0].set(a.left,a.top),i=c[1].set(a.left,a.bottom),j=c[2].set(a.right,a.top),k=c[3].set(a.right,a.bottom);if(j.x<=h.x||i.y<=h.y)return!1;let l=Math.sign(b.a*b.d-b.b*b.c);if(0===l||(b.apply(h,h),b.apply(i,i),b.apply(j,j),b.apply(k,k),Math.max(h.x,i.x,j.x,k.x)<=d||Math.min(h.x,i.x,j.x,k.x)>=e||Math.max(h.y,i.y,j.y,k.y)<=f||Math.min(h.y,i.y,j.y,k.y)>=g))return!1;let m=l*(i.y-h.y),n=l*(h.x-i.x),o=m*d+n*f,p=m*e+n*f,q=m*d+n*g,r=m*e+n*g;if(Math.max(o,p,q,r)<=m*h.x+n*h.y||Math.min(o,p,q,r)>=m*k.x+n*k.y)return!1;let s=l*(h.y-j.y),t=l*(j.x-h.x),u=s*d+t*f,v=s*e+t*f,w=s*d+t*g,x=s*e+t*g;return!(Math.max(u,v,w,x)<=s*h.x+t*h.y||Math.min(u,v,w,x)>=s*k.x+t*k.y)}pad(a=0,b=a){return this.x-=a,this.y-=b,this.width+=2*a,this.height+=2*b,this}fit(a){let b=Math.max(this.x,a.x),c=Math.min(this.x+this.width,a.x+a.width),d=Math.max(this.y,a.y),e=Math.min(this.y+this.height,a.y+a.height);return this.x=b,this.width=Math.max(c-b,0),this.y=d,this.height=Math.max(e-d,0),this}ceil(a=1,b=.001){let c=Math.ceil((this.x+this.width-b)*a)/a,d=Math.ceil((this.y+this.height-b)*a)/a;return this.x=Math.floor((this.x+b)*a)/a,this.y=Math.floor((this.y+b)*a)/a,this.width=c-this.x,this.height=d-this.y,this}scale(a,b=a){return this.x*=a,this.y*=b,this.width*=a,this.height*=b,this}enlarge(a){let b=Math.min(this.x,a.x),c=Math.max(this.x+this.width,a.x+a.width),d=Math.min(this.y,a.y),e=Math.max(this.y+this.height,a.y+a.height);return this.x=b,this.width=c-b,this.y=d,this.height=e-d,this}getBounds(a){return a||(a=new d),a.copyFrom(this),a}containsRect(a){if(this.width<=0||this.height<=0)return!1;let b=a.x,c=a.y,d=a.x+a.width,e=a.y+a.height;return b>=this.x&&b<this.x+this.width&&c>=this.y&&c<this.y+this.height&&d>=this.x&&d<this.x+this.width&&e>=this.y&&e<this.y+this.height}set(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}a.s(["Rectangle",()=>d])},83813,a=>{"use strict";var b=a.i(67309),c=a.i(31023);let d=new b.Matrix;class e{constructor(a=1/0,b=1/0,c=-1/0,e=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=d,this.minX=a,this.minY=b,this.maxX=c,this.maxY=e}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new c.Rectangle);let a=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(a.x=0,a.y=0,a.width=0,a.height=0):a.copyFromBounds(this),a}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=d,this}set(a,b,c,d){this.minX=a,this.minY=b,this.maxX=c,this.maxY=d}addFrame(a,b,c,d,e){e||(e=this.matrix);let f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=this.minX,m=this.minY,n=this.maxX,o=this.maxY,p=f*a+h*b+j,q=g*a+i*b+k;p<l&&(l=p),q<m&&(m=q),p>n&&(n=p),q>o&&(o=q),p=f*c+h*b+j,q=g*c+i*b+k,p<l&&(l=p),q<m&&(m=q),p>n&&(n=p),q>o&&(o=q),p=f*a+h*d+j,q=g*a+i*d+k,p<l&&(l=p),q<m&&(m=q),p>n&&(n=p),q>o&&(o=q),p=f*c+h*d+j,q=g*c+i*d+k,p<l&&(l=p),q<m&&(m=q),p>n&&(n=p),q>o&&(o=q),this.minX=l,this.minY=m,this.maxX=n,this.maxY=o}addRect(a,b){this.addFrame(a.x,a.y,a.x+a.width,a.y+a.height,b)}addBounds(a,b){this.addFrame(a.minX,a.minY,a.maxX,a.maxY,b)}addBoundsMask(a){this.minX=this.minX>a.minX?this.minX:a.minX,this.minY=this.minY>a.minY?this.minY:a.minY,this.maxX=this.maxX<a.maxX?this.maxX:a.maxX,this.maxY=this.maxY<a.maxY?this.maxY:a.maxY}applyMatrix(a){let b=this.minX,c=this.minY,d=this.maxX,e=this.maxY,{a:f,b:g,c:h,d:i,tx:j,ty:k}=a,l=f*b+h*c+j,m=g*b+i*c+k;this.minX=l,this.minY=m,this.maxX=l,this.maxY=m,l=f*d+h*c+j,m=g*d+i*c+k,this.minX=l<this.minX?l:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=l>this.maxX?l:this.maxX,this.maxY=m>this.maxY?m:this.maxY,l=f*b+h*e+j,m=g*b+i*e+k,this.minX=l<this.minX?l:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=l>this.maxX?l:this.maxX,this.maxY=m>this.maxY?m:this.maxY,l=f*d+h*e+j,m=g*d+i*e+k,this.minX=l<this.minX?l:this.minX,this.minY=m<this.minY?m:this.minY,this.maxX=l>this.maxX?l:this.maxX,this.maxY=m>this.maxY?m:this.maxY}fit(a){return this.minX<a.left&&(this.minX=a.left),this.maxX>a.right&&(this.maxX=a.right),this.minY<a.top&&(this.minY=a.top),this.maxY>a.bottom&&(this.maxY=a.bottom),this}fitBounds(a,b,c,d){return this.minX<a&&(this.minX=a),this.maxX>b&&(this.maxX=b),this.minY<c&&(this.minY=c),this.maxY>d&&(this.maxY=d),this}pad(a,b=a){return this.minX-=a,this.maxX+=a,this.minY-=b,this.maxY+=b,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new e(this.minX,this.minY,this.maxX,this.maxY)}scale(a,b=a){return this.minX*=a,this.minY*=b,this.maxX*=a,this.maxY*=b,this}get x(){return this.minX}set x(a){let b=this.maxX-this.minX;this.minX=a,this.maxX=a+b}get y(){return this.minY}set y(a){let b=this.maxY-this.minY;this.minY=a,this.maxY=a+b}get width(){return this.maxX-this.minX}set width(a){this.maxX=this.minX+a}get height(){return this.maxY-this.minY}set height(a){this.maxY=this.minY+a}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(a,b,c,d){let e=this.minX,f=this.minY,g=this.maxX,h=this.maxY;d||(d=this.matrix);let i=d.a,j=d.b,k=d.c,l=d.d,m=d.tx,n=d.ty;for(let d=b;d<c;d+=2){let b=a[d],c=a[d+1],o=i*b+k*c+m,p=j*b+l*c+n;e=o<e?o:e,f=p<f?p:f,g=o>g?o:g,h=p>h?p:h}this.minX=e,this.minY=f,this.maxX=g,this.maxY=h}containsPoint(a,b){return!!(this.minX<=a)&&!!(this.minY<=b)&&!!(this.maxX>=a)&&!!(this.maxY>=b)}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(a){return this.minX=a.minX,this.minY=a.minY,this.maxX=a.maxX,this.maxY=a.maxY,this}}a.s(["Bounds",()=>e])},3890,1344,89341,7062,41015,99585,62959,34956,54308,8147,93716,4938,33502,a=>{"use strict";var b=a.i(67309),c=a.i(83813),d=a.i(3832);let e=d.BigPool.getPool(b.Matrix),f=d.BigPool.getPool(c.Bounds);a.s(["boundsPool",()=>f,"matrixPool",()=>e],1344);let g=new b.Matrix,h={getFastGlobalBounds(a,b){b||(b=new c.Bounds),b.clear(),this._getGlobalBoundsRecursive(!!a,b,this.parentRenderLayer),b.isValid||b.set(0,0,0,0);let d=this.renderGroup||this.parentRenderGroup;return b.applyMatrix(d.worldTransform),b},_getGlobalBoundsRecursive(a,b,c){let d=b;if(a&&this.parentRenderLayer&&this.parentRenderLayer!==c||7!==this.localDisplayStatus||!this.measurable)return;let e=!!this.effects.length;if((this.renderGroup||e)&&(d=f.get().clear()),this.boundsArea)b.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){let a=this.bounds;d.addFrame(a.minX,a.minY,a.maxX,a.maxY,this.groupTransform)}let b=this.children;for(let e=0;e<b.length;e++)b[e]._getGlobalBoundsRecursive(a,d,c)}if(e){let a=!1,c=this.renderGroup||this.parentRenderGroup;for(let b=0;b<this.effects.length;b++)this.effects[b].addBounds&&(a||(a=!0,d.applyMatrix(c.worldTransform)),this.effects[b].addBounds(d,!0));a&&d.applyMatrix(c.worldTransform.copyTo(g).invert()),b.addBounds(d),f.return(d)}else this.renderGroup&&(b.addBounds(d,this.relativeGroupTransform),f.return(d))}};function i(a,c,d){let g,h;return d.clear(),g=a.parent?c?a.parent.worldTransform:j(a,h=e.get().identity()):b.Matrix.IDENTITY,function a(c,d,g,h){let i;if(!c.visible||!c.measurable)return;h?i=c.worldTransform:(c.updateLocalTransform(),(i=e.get()).appendFrom(c.localTransform,g));let j=d,k=!!c.effects.length;if(k&&(d=f.get().clear()),c.boundsArea)d.addRect(c.boundsArea,i);else{let b=c.bounds;b&&!b.isEmpty()&&(d.matrix=i,d.addBounds(b));for(let b=0;b<c.children.length;b++)a(c.children[b],d,i,h)}if(k){for(let a=0;a<c.effects.length;a++)c.effects[a].addBounds?.(d);j.addBounds(d,b.Matrix.IDENTITY),f.return(d)}h||e.return(i)}(a,d,g,c),h&&e.return(h),d.isValid||d.set(0,0,0,0),d}function j(a,b){let c=a.parent;return c&&(j(c,b),c.updateLocalTransform(),b.append(c.localTransform)),b}function k(a,b){return 0xffffff!==a&&b?0xffffff!==b&&a?((a>>16&255)*(b>>16&255)/255<<16)+((a>>8&255)*(b>>8&255)/255<<8)+((255&a)*(255&b)/255|0):a:b}function l(a,b){return 0xffffff===a?b:0xffffff===b?a:k(a,b)}function m(a){return((255&a)<<16)+(65280&a)+(a>>16&255)}a.s(["getFastGlobalBoundsMixin",()=>h],3890),a.s(["getGlobalBounds",()=>i,"updateTransformBackwards",()=>j],89341),a.s(["multiplyHexColors",()=>k],7062),a.s(["multiplyColors",()=>l],41015);let n={getGlobalAlpha(a){if(a)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let b=this.alpha,c=this.parent;for(;c;)b*=c.alpha,c=c.parent;return b},getGlobalTransform(a=new b.Matrix,c){if(c)return a.copyFrom(this.worldTransform);this.updateLocalTransform();let d=j(this,e.get().identity());return a.appendFrom(this.localTransform,d),e.return(d),a},getGlobalTint(a){if(a)return this.renderGroup?m(this.renderGroup.worldColor):this.parentRenderGroup?m(l(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let b=this.localColor,c=this.parent;for(;c;)b=l(b,c.localColor),c=c.parent;return m(b)}};function o(a,c,d){return c.clear(),d||(d=b.Matrix.IDENTITY),function a(c,d,g,h,i){let j;if(i)j=e.get(),j=g.copyTo(j);else{if(!c.visible||!c.measurable)return;c.updateLocalTransform();let a=c.localTransform;(j=e.get()).appendFrom(a,g)}let k=d,l=!!c.effects.length;if(l&&(d=f.get().clear()),c.boundsArea)d.addRect(c.boundsArea,j);else{c.renderPipeId&&(d.matrix=j,d.addBounds(c.bounds));let b=c.children;for(let c=0;c<b.length;c++)a(b[c],d,j,h,!1)}if(l){for(let a=0;a<c.effects.length;a++)c.effects[a].addLocalBounds?.(d,h);k.addBounds(d,b.Matrix.IDENTITY),f.return(d)}e.return(j)}(a,c,d,a,!0),c.isValid||c.set(0,0,0,0),c}function p(a,b){let c=a.children;for(let a=0;a<c.length;a++){let d=c[a],e=d.uid,f=(65535&d._didViewChangeTick)<<16|65535&d._didContainerChangeTick,g=b.index;(b.data[g]!==e||b.data[g+1]!==f)&&(b.data[b.index]=e,b.data[b.index+1]=f,b.didChange=!0),b.index=g+2,d.children.length&&p(d,b)}return b.didChange}a.s(["bgr2rgb",()=>m,"getGlobalMixin",()=>n],99585),a.s(["getLocalBounds",()=>o],62959),a.s(["checkChildrenDidChange",()=>p],34956);let q=new b.Matrix,r={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(a,b){let c=Math.sign(this.scale.x)||1;0!==b?this.scale.x=a/b*c:this.scale.x=c},_setHeight(a,b){let c=Math.sign(this.scale.y)||1;0!==b?this.scale.y=a/b*c:this.scale.y=c},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new c.Bounds});let a=this._localBoundsCacheData;return a.index=1,a.didChange=!1,a.data[0]!==this._didViewChangeTick&&(a.didChange=!0,a.data[0]=this._didViewChangeTick),p(this,a),a.didChange&&o(this,a.localBounds,q),a.localBounds},getBounds(a,b){return i(this,a,b||new c.Bounds)}};a.s(["measureMixin",()=>r],54308);let s={_onRender:null,set onRender(func){let a=this.renderGroup||this.parentRenderGroup;if(!func){this._onRender&&a?.removeOnRender(this),this._onRender=null;return}this._onRender||a?.addOnRender(this),this._onRender=func},get onRender(){return this._onRender}};a.s(["onRenderMixin",()=>s],8147);let t={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(value){if(this._zIndex===value)return;this._zIndex=value,this.depthOfChildModified()},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(u))}};function u(a,b){return a._zIndex-b._zIndex}a.s(["sortMixin",()=>t],93716);var v=a.i(47790);let w={getGlobalPosition(a=new v.Point,b=!1){return this.parent?this.parent.toGlobal(this._position,a,b):(a.x=this._position.x,a.y=this._position.y),a},toGlobal(a,b,c=!1){let d=this.getGlobalTransform(e.get(),c);return b=d.apply(a,b),e.return(d),b},toLocal(a,b,c,d){b&&(a=b.toGlobal(a,c,d));let f=this.getGlobalTransform(e.get(),d);return c=f.applyInverse(a,c),e.return(f),c}};a.s(["toLocalGlobalMixin",()=>w],4938);var x=a.i(90423);class y{constructor(){this.uid=(0,x.uid)("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}destroy(){this.instructions.length=0,this.renderables.length=0,this.renderPipes=null,this.gcTick=0}add(a){this.instructions[this.instructionSize++]=a}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}a.s(["InstructionSet",()=>y],33502)},31394,48732,43925,94214,a=>{"use strict";var b=a.i(61607);function c(a){return a+=+(0===a),--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)+1}function d(a){return!(a&a-1)&&!!a}function e(a){let b=(a>65535)<<4,c=((a>>>=b)>255)<<3;return a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,(b|=c)|a>>1}function f(a){let b={};for(let c in a)void 0!==a[c]&&(b[c]=a[c]);return b}a.s(["isPow2",()=>d,"log2",()=>e,"nextPow2",()=>c],48732),a.s(["definedProps",()=>f],43925);var g=a.i(90423),h=b,i=a.i(2897);let j=Object.create(null),k=class a extends h.default{constructor(b={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,b={...a.defaultOptions,...b},this.addressMode=b.addressMode,this.addressModeU=b.addressModeU??this.addressModeU,this.addressModeV=b.addressModeV??this.addressModeV,this.addressModeW=b.addressModeW??this.addressModeW,this.scaleMode=b.scaleMode,this.magFilter=b.magFilter??this.magFilter,this.minFilter=b.minFilter??this.minFilter,this.mipmapFilter=b.mipmapFilter??this.mipmapFilter,this.lodMinClamp=b.lodMinClamp,this.lodMaxClamp=b.lodMaxClamp,this.compare=b.compare,this.maxAnisotropy=b.maxAnisotropy??1}set addressMode(a){this.addressModeU=a,this.addressModeV=a,this.addressModeW=a}get addressMode(){return this.addressModeU}set wrapMode(a){(0,i.deprecation)(i.v8_0_0,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=a}get wrapMode(){return this.addressMode}set scaleMode(a){this.magFilter=a,this.minFilter=a,this.mipmapFilter=a}get scaleMode(){return this.magFilter}set maxAnisotropy(a){this._maxAnisotropy=Math.min(a,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this._sharedResourceId=null,this.emit("change",this)}_generateResourceId(){let a,b=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=(void 0===(a=j[b])&&(j[b]=(0,g.uid)("resource")),a),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};k.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"},a.s(["TextureStyle",()=>k],94214);let l=class a extends b.default{constructor(b={}){super(),this.options=b,this._gpuData=Object.create(null),this._gcLastUsed=-1,this.uid=(0,g.uid)("textureSource"),this._resourceType="textureSource",this._resourceId=(0,g.uid)("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,b={...a.defaultOptions,...b},this.label=b.label??"",this.resource=b.resource,this.autoGarbageCollect=b.autoGarbageCollect,this._resolution=b.resolution,b.width?this.pixelWidth=b.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,b.height?this.pixelHeight=b.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=b.format,this.dimension=b.dimensions,this.mipLevelCount=b.mipLevelCount,this.autoGenerateMipmaps=b.autoGenerateMipmaps,this.sampleCount=b.sampleCount,this.antialias=b.antialias,this.alphaMode=b.alphaMode,this.style=new k(f(b)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(a){this.style!==a&&(this._style?.off("change",this._onStyleChange,this),this._style=a,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}set maxAnisotropy(a){this._style.maxAnisotropy=a}get maxAnisotropy(){return this._style.maxAnisotropy}get addressMode(){return this._style.addressMode}set addressMode(a){this._style.addressMode=a}get repeatMode(){return this._style.addressMode}set repeatMode(a){this._style.addressMode=a}get magFilter(){return this._style.magFilter}set magFilter(a){this._style.magFilter=a}get minFilter(){return this._style.minFilter}set minFilter(a){this._style.minFilter=a}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(a){this._style.mipmapFilter=a}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(a){this._style.lodMinClamp=a}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(a){this._style.lodMaxClamp=a}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){let a=this._resolution;if(this.resize(this.resourceWidth/a,this.resourceHeight/a))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){for(let a in this._resourceId=(0,g.uid)("resource"),this.emit("change",this),this.emit("unload",this),this._gpuData)this._gpuData[a]?.destroy?.();this._gpuData=Object.create(null)}get resourceWidth(){let{resource:a}=this;return a.naturalWidth||a.videoWidth||a.displayWidth||a.width}get resourceHeight(){let{resource:a}=this;return a.naturalHeight||a.videoHeight||a.displayHeight||a.height}get resolution(){return this._resolution}set resolution(a){this._resolution!==a&&(this._resolution=a,this.width=this.pixelWidth/a,this.height=this.pixelHeight/a)}resize(a,b,c){c||(c=this._resolution),a||(a=this.width),b||(b=this.height);let d=Math.round(a*c),e=Math.round(b*c);return this.width=d/c,this.height=e/c,this._resolution=c,(this.pixelWidth!==d||this.pixelHeight!==e)&&(this._refreshPOT(),this.pixelWidth=d,this.pixelHeight=e,this.emit("resize",this),this._resourceId=(0,g.uid)("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(a){this._style.wrapMode=a}get wrapMode(){return this._style.wrapMode}set scaleMode(a){this._style.scaleMode=a}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=d(this.pixelWidth)&&d(this.pixelHeight)}static test(a){throw Error("Unimplemented")}};l.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1},a.s(["TextureSource",()=>l],31394)},93469,a=>{"use strict";var b=a.i(67309);let c=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],d=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],e=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],f=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],g=[],h=[],i=Math.sign;!function(){for(let a=0;a<16;a++){let b=[];g.push(b);for(let g=0;g<16;g++){let h=i(c[a]*c[g]+e[a]*d[g]),j=i(d[a]*c[g]+f[a]*d[g]),k=i(c[a]*e[g]+e[a]*f[g]),l=i(d[a]*e[g]+f[a]*f[g]);for(let a=0;a<16;a++)if(c[a]===h&&d[a]===j&&e[a]===k&&f[a]===l){b.push(a);break}}}for(let a=0;a<16;a++){let g=new b.Matrix;g.set(c[a],d[a],e[a],f[a],0,0),h.push(g)}}();let j={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:a=>c[a],uY:a=>d[a],vX:a=>e[a],vY:a=>f[a],inv:a=>8&a?15&a:7&-a,add:(a,b)=>g[a][b],sub:(a,b)=>g[a][j.inv(b)],rotate180:a=>4^a,isVertical:a=>(3&a)==2,byDirection:(a,b)=>2*Math.abs(a)<=Math.abs(b)?b>=0?j.S:j.N:2*Math.abs(b)<=Math.abs(a)?a>0?j.E:j.W:b>0?a>0?j.SE:j.SW:a>0?j.NE:j.NW,matrixAppendRotationInv:(a,b,c=0,d=0)=>{let e=h[j.inv(b)];e.tx=c,e.ty=d,a.append(e)},transformRectCoords:(a,b,c,d)=>{let{x:e,y:f,width:g,height:h}=a,{x:i,y:k,width:l,height:m}=b;return c===j.E?(d.set(e+i,f+k,g,h),d):c===j.S?d.set(l-f-h+i,e+k,h,g):c===j.W?d.set(l-e-g+i,m-f-h+k,g,h):c===j.N?d.set(f+i,m-e-g+k,h,g):d.set(e+i,f+k,g,h)}};a.s(["groupD8",()=>j])},85164,a=>{"use strict";let b=()=>{};a.s(["NOOP",()=>b])},71805,85942,18261,a=>{"use strict";var b=a.i(61607),c=a.i(93469),d=a.i(31023),e=a.i(90423),f=a.i(2897),g=a.i(85164),h=a.i(44373),i=a.i(31394);class j extends i.TextureSource{constructor(a){const b=a.resource||new Float32Array(a.width*a.height*4);let c=a.format;c||(b instanceof Float32Array?c="rgba32float":b instanceof Int32Array||b instanceof Uint32Array?c="rgba32uint":b instanceof Int16Array||b instanceof Uint16Array?c="rgba16uint":(Int8Array,c="bgra8unorm")),super({...a,resource:b,format:c}),this.uploadMethodId="buffer"}static test(a){return a instanceof Int8Array||a instanceof Uint8Array||a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array}}j.extension=h.ExtensionType.TextureSource,a.s(["BufferImageSource",()=>j],85942);var k=a.i(67309);let l=new k.Matrix;class m{constructor(a,b){this.mapCoord=new k.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,void 0===b?this.clampMargin=a.width<10?0:.5:this.clampMargin=b,this.isSimple=!1,this.texture=a}get texture(){return this._texture}set texture(a){this.texture!==a&&(this._texture?.removeListener("update",this.update,this),this._texture=a,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(a,b){void 0===b&&(b=a);let c=this.mapCoord;for(let d=0;d<a.length;d+=2){let e=a[d],f=a[d+1];b[d]=e*c.a+f*c.c+c.tx,b[d+1]=e*c.b+f*c.d+c.ty}return b}update(){let a=this._texture;this._updateID++;let b=a.uvs;this.mapCoord.set(b.x1-b.x0,b.y1-b.y0,b.x3-b.x0,b.y3-b.y0,b.x0,b.y0);let c=a.orig,d=a.trim;d&&(l.set(c.width/d.width,0,0,c.height/d.height,-d.x/d.width,-d.y/d.height),this.mapCoord.append(l));let e=a.source,f=this.uClampFrame,g=this.clampMargin/e._resolution,h=this.clampOffset/e._resolution;return f[0]=(a.frame.x+g+h)/e.width,f[1]=(a.frame.y+g+h)/e.height,f[2]=(a.frame.x+a.frame.width-g+h)/e.width,f[3]=(a.frame.y+a.frame.height-g+h)/e.height,this.uClampOffset[0]=this.clampOffset/e.pixelWidth,this.uClampOffset[1]=this.clampOffset/e.pixelHeight,this.isSimple=a.frame.width===e.width&&a.frame.height===e.height&&0===a.rotate,!0}}a.s(["TextureMatrix",()=>m],18261);class n extends b.default{constructor({source:a,label:b,frame:c,orig:f,trim:g,defaultAnchor:h,defaultBorders:j,rotate:k,dynamic:l}={}){if(super(),this.uid=(0,e.uid)("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new d.Rectangle,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=b,this.source=a?.source??new i.TextureSource,this.noFrame=!c,c)this.frame.copyFrom(c);else{const{width:a,height:b}=this._source;this.frame.width=a,this.frame.height=b}this.orig=f||this.frame,this.trim=g,this.rotate=k??0,this.defaultAnchor=h,this.defaultBorders=j,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(a){this._source&&this._source.off("resize",this.update,this),this._source=a,a.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new m(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){let{uvs:a,frame:b}=this,{width:d,height:e}=this._source,f=b.x/d,g=b.y/e,h=b.width/d,i=b.height/e,j=this.rotate;if(j){let b=h/2,d=i/2,e=f+b,k=g+d;j=c.groupD8.add(j,c.groupD8.NW),a.x0=e+b*c.groupD8.uX(j),a.y0=k+d*c.groupD8.uY(j),j=c.groupD8.add(j,2),a.x1=e+b*c.groupD8.uX(j),a.y1=k+d*c.groupD8.uY(j),j=c.groupD8.add(j,2),a.x2=e+b*c.groupD8.uX(j),a.y2=k+d*c.groupD8.uY(j),j=c.groupD8.add(j,2),a.x3=e+b*c.groupD8.uX(j),a.y3=k+d*c.groupD8.uY(j)}else a.x0=f,a.y0=g,a.x1=f+h,a.y1=g,a.x2=f+h,a.y2=g+i,a.x3=f,a.y3=g+i}destroy(a=!1){this._source&&(this._source.off("resize",this.update,this),a&&(this._source.destroy(),this._source=null)),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return(0,f.deprecation)(f.v8_0_0,"Texture.baseTexture is now Texture.source"),this._source}}n.EMPTY=new n({label:"EMPTY",source:new i.TextureSource({label:"EMPTY"})}),n.EMPTY.destroy=g.NOOP,n.WHITE=new n({source:new j({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),n.WHITE.destroy=g.NOOP,a.s(["Texture",()=>n],71805)},84764,36206,96070,69660,a=>{"use strict";var b=a.i(61607),c=a.i(98063),d=a.i(33597),e=a.i(44373),f=a.i(67309),g=a.i(34435),h=a.i(37155),i=a.i(90423),j=a.i(2897),k=a.i(51983),l=a.i(3832),m=a.i(55539),n=a.i(45679),o=a.i(95328),p=a.i(2677),q=a.i(26441),r=a.i(3890),s=a.i(99585),t=a.i(54308),u=a.i(8147),v=a.i(93716),w=a.i(4938),x=a.i(33502),y=a.i(48732),z=a.i(77184),A=a.i(31394),B=a.i(71805),C=a.i(94214);let D=0;class E{constructor(a){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=a||{},this.enableFullScreen=!1,this.textureStyle=new C.TextureStyle(this.textureOptions)}createTexture(a,b,c){let d=new A.TextureSource({...this.textureOptions,width:a,height:b,resolution:1,antialias:c,autoGarbageCollect:!1});return new B.Texture({source:d,label:`texturePool_${D++}`})}getOptimalTexture(a,b,c=1,d){let e=Math.ceil(a*c-1e-6),f=Math.ceil(b*c-1e-6),g=((e=(0,y.nextPow2)(e))<<17)+((f=(0,y.nextPow2)(f))<<1)+ +!!d;this._texturePool[g]||(this._texturePool[g]=[]);let h=this._texturePool[g].pop();return h||(h=this.createTexture(e,f,d)),h.source._resolution=c,h.source.width=e/c,h.source.height=f/c,h.source.pixelWidth=e,h.source.pixelHeight=f,h.frame.x=0,h.frame.y=0,h.frame.width=a,h.frame.height=b,h.updateUvs(),this._poolKeyHash[h.uid]=g,h}getSameSizeTexture(a,b=!1){let c=a.source;return this.getOptimalTexture(a.width,a.height,c._resolution,b)}returnTexture(a,b=!1){let c=this._poolKeyHash[a.uid];b&&(a.source.style=this.textureStyle),this._texturePool[c].push(a)}clear(a){if(a=!1!==a)for(let a in this._texturePool){let b=this._texturePool[a];if(b)for(let a=0;a<b.length;a++)b[a].destroy(!0)}this._texturePool={}}}let F=new E;z.GlobalResourceRegistry.register(F),a.s(["TexturePool",()=>F,"TexturePoolClass",()=>E],36206);class G{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new f.Matrix,this.worldColorAlpha=0xffffffff,this.worldColor=0xffffff,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new x.InstructionSet,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(a){this.root=a,a._onRender&&this.addOnRender(a),a.didChange=!0;let b=a.children;for(let a=0;a<b.length;a++){let c=b[a];c._updateFlags=15,this.addChild(c)}}enableCacheAsTexture(a={}){this.textureOptions=a,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(F.returnTexture(this.texture,!0),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0;let a=this._parentCacheAsTextureRenderGroup;a&&!a.textureNeedsUpdate&&a.updateCacheTexture()}reset(){for(let a in this.renderGroupChildren.length=0,this.childrenToUpdate){let b=this.childrenToUpdate[a];b.list.fill(null),b.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(a){a.renderGroupParent&&a.renderGroupParent._removeRenderGroupChild(a),a.renderGroupParent=this,this.renderGroupChildren.push(a)}_removeRenderGroupChild(a){let b=this.renderGroupChildren.indexOf(a);b>-1&&this.renderGroupChildren.splice(b,1),a.renderGroupParent=null}addChild(a){if(this.structureDidChange=!0,a.parentRenderGroup=this,a.updateTick=-1,a.parent===this.root?a.relativeRenderGroupDepth=1:a.relativeRenderGroupDepth=a.parent.relativeRenderGroupDepth+1,a.didChange=!0,this.onChildUpdate(a),a.renderGroup)return void this.addRenderGroupChild(a.renderGroup);a._onRender&&this.addOnRender(a);let b=a.children;for(let a=0;a<b.length;a++)this.addChild(b[a])}removeChild(a){if(this.structureDidChange=!0,a._onRender&&!a.renderGroup&&this.removeOnRender(a),a.parentRenderGroup=null,a.renderGroup)return void this._removeRenderGroupChild(a.renderGroup);let b=a.children;for(let a=0;a<b.length;a++)this.removeChild(b[a])}removeChildren(a){for(let b=0;b<a.length;b++)this.removeChild(a[b])}onChildUpdate(a){let b=this.childrenToUpdate[a.relativeRenderGroupDepth];b||(b=this.childrenToUpdate[a.relativeRenderGroupDepth]={index:0,list:[]}),b.list[b.index++]=a}updateRenderable(a){a.globalDisplayStatus<7||(this.instructionSet.renderPipes[a.renderPipeId].updateRenderable(a),a.didViewUpdate=!1)}onChildViewUpdate(a){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=a}get isRenderable(){return 7===this.root.localDisplayStatus&&this.worldAlpha>0}addOnRender(a){this._onRenderContainers.push(a)}removeOnRender(a){this._onRenderContainers.splice(this._onRenderContainers.indexOf(a),1)}runOnRender(a){for(let b=0;b<this._onRenderContainers.length;b++)this._onRenderContainers[b]._onRender(a)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(a=[]){let b=this.root.children;for(let c=0;c<b.length;c++)this._getChildren(b[c],a);return a}_getChildren(a,b=[]){if(b.push(a),a.renderGroup)return b;let c=a.children;for(let a=0;a<c.length;a++)this._getChildren(c[a],b);return b}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(1&this._matrixDirty)==0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new f.Matrix),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(2&this._matrixDirty)==0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new f.Matrix),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((4&this._matrixDirty)==0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;let a=this._parentCacheAsTextureRenderGroup;return a?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new f.Matrix),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(a.inverseWorldTransform).translate(-a._textureBounds.x,-a._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this.isCachedAsTexture?this.textureOffsetInverseTransform:this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function H(a,b,c={}){for(let d in b)c[d]||void 0===b[d]||(a[d]=b[d])}a.s(["RenderGroup",()=>G],96070),a.s(["assignWithIgnore",()=>H],69660);let I=new h.ObservablePoint(null),J=new h.ObservablePoint(null),K=new h.ObservablePoint(null,1,1),L=new h.ObservablePoint(null);class M extends b.default{constructor(a={}){super(),this.uid=(0,i.uid)("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.parentRenderLayer=null,this.updateTick=-1,this.localTransform=new f.Matrix,this.relativeGroupTransform=new f.Matrix,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new h.ObservablePoint(this,0,0),this._scale=K,this._pivot=J,this._origin=L,this._skew=I,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=0xffffff,this.localAlpha=1,this.groupAlpha=1,this.groupColor=0xffffff,this.groupColorAlpha=0xffffffff,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],H(this,a,{children:!0,parent:!0,effects:!0}),a.children?.forEach(a=>this.addChild(a)),a.parent?.addChild(this)}static mixin(a){(0,j.deprecation)("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),e.extensions.mixin(M,a)}set _didChangeId(a){this._didViewChangeTick=a>>12&4095,this._didContainerChangeTick=4095&a}get _didChangeId(){return 4095&this._didContainerChangeTick|(4095&this._didViewChangeTick)<<12}addChild(...a){if(this.allowChildren||(0,j.deprecation)(j.v8_0_0,"addChild: Only Containers will be allowed to add children in v8.0.0"),a.length>1){for(let b=0;b<a.length;b++)this.addChild(a[b]);return a[0]}let b=a[0],c=this.renderGroup||this.parentRenderGroup;return b.parent===this?(this.children.splice(this.children.indexOf(b),1),this.children.push(b),c&&(c.structureDidChange=!0)):(b.parent&&b.parent.removeChild(b),this.children.push(b),this.sortableChildren&&(this.sortDirty=!0),b.parent=this,b.didChange=!0,b._updateFlags=15,c&&c.addChild(b),this.emit("childAdded",b,this,this.children.length-1),b.emit("added",this),this._didViewChangeTick++,0!==b._zIndex&&b.depthOfChildModified()),b}removeChild(...a){if(a.length>1){for(let b=0;b<a.length;b++)this.removeChild(a[b]);return a[0]}let b=a[0],c=this.children.indexOf(b);return c>-1&&(this._didViewChangeTick++,this.children.splice(c,1),this.renderGroup?this.renderGroup.removeChild(b):this.parentRenderGroup&&this.parentRenderGroup.removeChild(b),b.parentRenderLayer&&b.parentRenderLayer.detach(b),b.parent=null,this.emit("childRemoved",b,this,c),b.emit("removed",this)),b}_onUpdate(a){a&&a===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(a){!!this.renderGroup!==a&&(a?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;let a=this.parentRenderGroup;a?.removeChild(this),this.renderGroup=l.BigPool.get(G,this),this.groupTransform=f.Matrix.IDENTITY,a?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;let a=this.parentRenderGroup;a?.removeChild(this),l.BigPool.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,a?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new f.Matrix),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(a){this._position.x=a}get y(){return this._position.y}set y(a){this._position.y=a}get position(){return this._position}set position(a){this._position.copyFrom(a)}get rotation(){return this._rotation}set rotation(a){this._rotation!==a&&(this._rotation=a,this._onUpdate(this._skew))}get angle(){return this.rotation*g.RAD_TO_DEG}set angle(a){this.rotation=a*g.DEG_TO_RAD}get pivot(){return this._pivot===J&&(this._pivot=new h.ObservablePoint(this,0,0)),this._pivot}set pivot(a){this._pivot===J&&(this._pivot=new h.ObservablePoint(this,0,0),this._origin!==L&&(0,k.warn)("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),"number"==typeof a?this._pivot.set(a):this._pivot.copyFrom(a)}get skew(){return this._skew===I&&(this._skew=new h.ObservablePoint(this,0,0)),this._skew}set skew(a){this._skew===I&&(this._skew=new h.ObservablePoint(this,0,0)),this._skew.copyFrom(a)}get scale(){return this._scale===K&&(this._scale=new h.ObservablePoint(this,1,1)),this._scale}set scale(a){this._scale===K&&(this._scale=new h.ObservablePoint(this,0,0)),"string"==typeof a&&(a=parseFloat(a)),"number"==typeof a?this._scale.set(a):this._scale.copyFrom(a)}get origin(){return this._origin===L&&(this._origin=new h.ObservablePoint(this,0,0)),this._origin}set origin(a){this._origin===L&&(this._origin=new h.ObservablePoint(this,0,0),this._pivot!==J&&(0,k.warn)("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),"number"==typeof a?this._origin.set(a):this._origin.copyFrom(a)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(a){let b=this.getLocalBounds().width;this._setWidth(a,b)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(a){let b=this.getLocalBounds().height;this._setHeight(a,b)}getSize(a){a||(a={});let b=this.getLocalBounds();return a.width=Math.abs(this.scale.x*b.width),a.height=Math.abs(this.scale.y*b.height),a}setSize(a,b){let c=this.getLocalBounds();"object"==typeof a?(b=a.height??a.width,a=a.width):b??(b=a),void 0!==a&&this._setWidth(a,c.width),void 0!==b&&this._setHeight(b,c.height)}_updateSkew(){let a=this._rotation,b=this._skew;this._cx=Math.cos(a+b._y),this._sx=Math.sin(a+b._y),this._cy=-Math.sin(a-b._x),this._sy=Math.cos(a-b._x)}updateTransform(a){return this.position.set("number"==typeof a.x?a.x:this.position.x,"number"==typeof a.y?a.y:this.position.y),this.scale.set("number"==typeof a.scaleX?a.scaleX||1:this.scale.x,"number"==typeof a.scaleY?a.scaleY||1:this.scale.y),this.rotation="number"==typeof a.rotation?a.rotation:this.rotation,this.skew.set("number"==typeof a.skewX?a.skewX:this.skew.x,"number"==typeof a.skewY?a.skewY:this.skew.y),this.pivot.set("number"==typeof a.pivotX?a.pivotX:this.pivot.x,"number"==typeof a.pivotY?a.pivotY:this.pivot.y),this.origin.set("number"==typeof a.originX?a.originX:this.origin.x,"number"==typeof a.originY?a.originY:this.origin.y),this}setFromMatrix(a){a.decompose(this)}updateLocalTransform(){let a=this._didContainerChangeTick;if(this._didLocalTransformChangeId===a)return;this._didLocalTransformChangeId=a;let b=this.localTransform,c=this._scale,d=this._pivot,e=this._origin,f=this._position,g=c._x,h=c._y,i=d._x,j=d._y,k=-e._x,l=-e._y;b.a=this._cx*g,b.b=this._sx*g,b.c=this._cy*h,b.d=this._sy*h,b.tx=f._x-(i*b.a+j*b.c)+(k*b.a+l*b.c)-k,b.ty=f._y-(i*b.b+j*b.d)+(k*b.b+l*b.d)-l}set alpha(a){a!==this.localAlpha&&(this.localAlpha=a,this._updateFlags|=1,this._onUpdate())}get alpha(){return this.localAlpha}set tint(a){let b=c.Color.shared.setValue(a??0xffffff).toBgrNumber();b!==this.localColor&&(this.localColor=b,this._updateFlags|=1,this._onUpdate())}get tint(){return(0,s.bgr2rgb)(this.localColor)}set blendMode(a){this.localBlendMode!==a&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=2,this.localBlendMode=a,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(a){(2&this.localDisplayStatus)!=2*!!a&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=4,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(a){(4&this.localDisplayStatus)!=4*!a&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=4,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(a){(1&this.localDisplayStatus)!=+!!a&&(this._updateFlags|=4,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&this.groupAlpha>0}destroy(a=!1){let b;if(!this.destroyed){if(this.destroyed=!0,this.children.length&&(b=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),("boolean"==typeof a?a:a?.children)&&b)for(let c=0;c<b.length;++c)b[c].destroy(a);this.renderGroup?.destroy(),this.renderGroup=null}}}e.extensions.mixin(M,n.childrenHelperMixin,r.getFastGlobalBoundsMixin,w.toLocalGlobalMixin,u.onRenderMixin,t.measureMixin,p.effectsMixin,q.findMixin,v.sortMixin,d.cullingMixin,m.cacheAsTextureMixin,s.getGlobalMixin,o.collectRenderablesMixin),a.s(["Container",()=>M,"UPDATE_BLEND",()=>2,"UPDATE_COLOR",()=>1,"UPDATE_TRANSFORM",()=>8,"UPDATE_VISIBLE",()=>4],84764)},83717,83019,37615,a=>{"use strict";var b,c=((b=c||{})[b.INTERACTION=50]="INTERACTION",b[b.HIGH=25]="HIGH",b[b.NORMAL=0]="NORMAL",b[b.LOW=-25]="LOW",b[b.UTILITY=-50]="UTILITY",b);a.s(["UPDATE_PRIORITY",()=>c],83019);class d{constructor(a,b=null,c=0,d=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=a,this._context=b,this.priority=c,this._once=d}match(a,b=null){return this._fn===a&&this._context===b}emit(a){this._fn&&(this._context?this._fn.call(this._context,a):this._fn(a));let b=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),b}connect(a){this.previous=a,a.next&&(a.next.previous=this),this.next=a.next,a.next=this}destroy(a=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let b=this.next;return this.next=a?null:b,this.previous=null,b}}a.s(["TickerListener",()=>d],37615);let e=class a{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new d(null,null,1/0),this.deltaMS=1/a.targetFPMS,this.elapsedMS=1/a.targetFPMS,this._tick=a=>{this._requestId=null,this.started&&(this.update(a),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(a,b,e=c.NORMAL){return this._addListener(new d(a,b,e))}addOnce(a,b,e=c.NORMAL){return this._addListener(new d(a,b,e,!0))}_addListener(a){let b=this._head.next,c=this._head;if(b){for(;b;){if(a.priority>b.priority){a.connect(c);break}c=b,b=b.next}a.previous||a.connect(c)}else a.connect(c);return this._startIfPossible(),this}remove(a,b){let c=this._head.next;for(;c;)c=c.match(a,b)?c.destroy():c.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let a=0,b=this._head;for(;b=b.next;)a++;return a}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let a=this._head.next;for(;a;)a=a.destroy(!0);this._head.destroy(),this._head=null}}update(b=performance.now()){let c;if(b>this.lastTime){if((c=this.elapsedMS=b-this.lastTime)>this._maxElapsedMS&&(c=this._maxElapsedMS),c*=this.speed,this._minElapsedMS){let a=b-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=b-a%this._minElapsedMS}this.deltaMS=c,this.deltaTime=this.deltaMS*a.targetFPMS;let d=this._head,e=d.next;for(;e;)e=e.emit(this);d.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=b}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(b){let c=Math.min(Math.max(0,Math.min(this.maxFPS,b))/1e3,a.targetFPMS);this._maxElapsedMS=1/c}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(a){if(0===a)this._minElapsedMS=0;else{let b=Math.max(this.minFPS,a);this._minElapsedMS=1/(b/1e3)}}static get shared(){if(!a._shared){let b=a._shared=new a;b.autoStart=!0,b._protected=!0}return a._shared}static get system(){if(!a._system){let b=a._system=new a;b.autoStart=!0,b._protected=!0}return a._system}};e.targetFPMS=.06,a.s(["Ticker",()=>e],83717)},58422,21070,a=>{"use strict";let b={createCanvas:(a,b)=>{let c=document.createElement("canvas");return c.width=a,c.height=b,c},createImage:()=>new Image,getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(a,b)=>fetch(a,b),parseXML:a=>new DOMParser().parseFromString(a,"text/xml")};a.s(["BrowserAdapter",()=>b],21070);let c=b,d={get:()=>c,set(a){c=a}};a.s(["DOMAdapter",()=>d],58422)},98803,a=>{"use strict";function b(a,b,c){let{width:d,height:e}=c.orig,f=c.trim;if(f){let c=f.width,g=f.height;a.minX=f.x-b._x*d,a.maxX=a.minX+c,a.minY=f.y-b._y*e,a.maxY=a.minY+g}else a.minX=-b._x*d,a.maxX=a.minX+d,a.minY=-b._y*e,a.maxY=a.minY+e}a.s(["updateQuadBounds",()=>b])},66184,13998,a=>{"use strict";var b=a.i(37155),c=a.i(71805),d=a.i(98803),e=a.i(2897),f=a.i(83813),g=a.i(84764);class h extends g.Container{constructor(a){super(a),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this._bounds=new f.Bounds(0,1,0,0),this._boundsDirty=!0,this.autoGarbageCollect=a.autoGarbageCollect??!0}get bounds(){return this._boundsDirty&&(this.updateBounds(),this._boundsDirty=!1),this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(a){this._roundPixels=+!!a}containsPoint(a){let b=this.bounds,{x:c,y:d}=a;return c>=b.minX&&c<=b.maxX&&d>=b.minY&&d<=b.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;let a=this.renderGroup||this.parentRenderGroup;a&&a.onChildViewUpdate(this)}unload(){for(let a in this.emit("unload",this),this._gpuData)this._gpuData[a]?.destroy();this._gpuData=Object.create(null),this.onViewUpdate()}destroy(a){this.unload(),super.destroy(a),this._bounds=null}collectRenderablesSimple(a,b,c){let{renderPipes:d}=b;d.blendMode.pushBlendMode(this,this.groupBlendMode,a),d[this.renderPipeId].addRenderable(this,a),this.didViewUpdate=!1;let e=this.children,f=e.length;for(let d=0;d<f;d++)e[d].collectRenderables(a,b,c);d.blendMode.popBlendMode(a)}}a.s(["ViewContainer",()=>h],13998);class i extends h{constructor(a=c.Texture.EMPTY){a instanceof c.Texture&&(a={texture:a});const{texture:d=c.Texture.EMPTY,anchor:e,roundPixels:f,width:g,height:h,...i}=a;super({label:"Sprite",...i}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new b.ObservablePoint({_onUpdate:()=>{this.onViewUpdate()}}),e?this.anchor=e:d.defaultAnchor&&(this.anchor=d.defaultAnchor),this.texture=d,this.allowChildren=!1,this.roundPixels=f??!1,void 0!==g&&(this.width=g),void 0!==h&&(this.height=h)}static from(a,b=!1){return new i(a instanceof c.Texture?a:c.Texture.from(a,b))}set texture(a){a||(a=c.Texture.EMPTY);let b=this._texture;b!==a&&(b&&b.dynamic&&b.off("update",this.onViewUpdate,this),a.dynamic&&a.on("update",this.onViewUpdate,this),this._texture=a,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return(0,d.updateQuadBounds)(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return(0,e.deprecation)("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){let a=this._anchor,b=this._texture,c=this._bounds,{width:d,height:e}=b.orig;c.minX=-a._x*d,c.maxX=c.minX+d,c.minY=-a._y*e,c.maxY=c.minY+e}destroy(a=!1){if(super.destroy(a),"boolean"==typeof a?a:a?.texture){let b="boolean"==typeof a?a:a?.textureSource;this._texture.destroy(b)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(a){"number"==typeof a?this._anchor.set(a):this._anchor.copyFrom(a)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(a){this._setWidth(a,this._texture.orig.width),this._width=a}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(a){this._setHeight(a,this._texture.orig.height),this._height=a}getSize(a){return a||(a={}),a.width=Math.abs(this.scale.x)*this._texture.orig.width,a.height=Math.abs(this.scale.y)*this._texture.orig.height,a}setSize(a,b){"object"==typeof a?(b=a.height??a.width,a=a.width):b??(b=a),void 0!==a&&this._setWidth(a,this._texture.orig.width),void 0!==b&&this._setHeight(b,this._texture.orig.height)}}a.s(["Sprite",()=>i],66184)},39238,a=>{"use strict";var b=a.i(58422),c=a.i(44373),d=a.i(31394);class e extends d.TextureSource{constructor(a){a.resource||(a.resource=b.DOMAdapter.get().createCanvas()),!a.width&&(a.width=a.resource.width,a.autoDensity||(a.width/=a.resolution)),!a.height&&(a.height=a.resource.height,a.autoDensity||(a.height/=a.resolution)),super(a),this.uploadMethodId="image",this.autoDensity=a.autoDensity,this.resizeCanvas(),this.transparent=!!a.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(a=this.width,b=this.height,c=this._resolution){let d=super.resize(a,b,c);return d&&this.resizeCanvas(),d}static test(a){return globalThis.HTMLCanvasElement&&a instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&a instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}e.extension=c.ExtensionType.TextureSource,a.s(["CanvasSource",()=>e])},74395,a=>{"use strict";class b{constructor(a){this.resources=Object.create(null),this._dirty=!0;let b=0;for(const c in a){const d=a[c];this.setResource(d,b++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;let a=[],b=0;for(let c in this.resources)a[b++]=this.resources[c]._resourceId;this._key=a.join("|")}setResource(a,b){let c=this.resources[b];a!==c&&(c&&a.off?.("change",this.onResourceChange,this),a.on?.("change",this.onResourceChange,this),this.resources[b]=a,this._dirty=!0)}getResource(a){return this.resources[a]}_touch(a,b){let c=this.resources;for(let d in c)c[d]._gcLastUsed=a,c[d]._touched=b}destroy(){let a=this.resources;for(let b in a){let c=a[b];c?.off?.("change",this.onResourceChange,this)}this.resources=null}onResourceChange(a){if(this._dirty=!0,a.destroyed){let b=this.resources;for(let c in b)b[c]===a&&(b[c]=null)}else this._updateKey()}}a.s(["BindGroup",()=>b])},29938,21655,35990,11276,a=>{"use strict";class b{constructor(a){"number"==typeof a?this.rawBinaryData=new ArrayBuffer(a):a instanceof Uint8Array?this.rawBinaryData=a.buffer:this.rawBinaryData=a,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(a){return this[`${a}View`]}destroy(){this.rawBinaryData=null,this.uint32View=null,this.float32View=null,this.uint16View=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._int32View=null,this._float64Array=null,this._bigUint64Array=null}static sizeOf(a){switch(a){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw Error(`${a} isn't a valid view type`)}}}function c(a,b){let c=a.byteLength/8|0,d=new Float64Array(a,0,c);new Float64Array(b,0,c).set(d);let e=a.byteLength-8*c;if(e>0){let d=new Uint8Array(a,8*c,e);new Uint8Array(b,8*c,e).set(d)}}a.s(["ViewableBuffer",()=>b],29938),a.s(["fastCopy",()=>c],21655);let d={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var e,f=((e=f||{})[e.DISABLED=0]="DISABLED",e[e.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",e[e.MASK_ACTIVE=2]="MASK_ACTIVE",e[e.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",e[e.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",e[e.NONE=5]="NONE",e);function g(a,b){return"no-premultiply-alpha"===b.alphaMode&&d[a]||a}a.s(["BLEND_TO_NPM",()=>d,"STENCIL_MODES",()=>f],35990),a.s(["getAdjustedBlendModeBlend",()=>g],11276)},94694,a=>{"use strict";let b;var c=a.i(58422);function d(){return(!b||b?.isContextLost())&&(b=c.DOMAdapter.get().createCanvas().getContext("webgl",{})),b}a.s(["getTestContext",()=>d])},42424,26254,38625,26951,52776,42682,68996,90807,54676,81933,a=>{"use strict";var b,c=a.i(90423),d=a.i(29938),e=a.i(2897),f=a.i(77184),g=a.i(21655),h=a.i(11276),i=a.i(94694);function j(a,b){if(0===a)throw Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let c=b.createShader(b.FRAGMENT_SHADER);try{for(;;){let d="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}".replace(/%forloop%/gi,function(a){let b="";for(let c=0;c<a;++c)c>0&&(b+="\nelse "),c<a-1&&(b+=`if(test == ${c}.0){}`);return b}(a));if(b.shaderSource(c,d),b.compileShader(c),b.getShaderParameter(c,b.COMPILE_STATUS))break;a=a/2|0}}finally{b.deleteShader(c)}return a}a.s(["checkMaxIfStatementsInShader",()=>j],26254);let k=null;function l(){if(k)return k;let a=(0,i.getTestContext)();return k=j(k=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),a),a.getExtension("WEBGL_lose_context")?.loseContext(),k}a.s(["getMaxTexturesPerBatch",()=>l],38625);class m{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let a=0;a<this.count;a++){let b=this.textures[a];this.textures[a]=null,this.ids[b.uid]=null}this.count=0}}a.s(["BatchTextureArray",()=>m],26951);class n{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new m,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}let o=[],p=0;function q(){return p>0?o[--p]:new n}f.GlobalResourceRegistry.register({clear:()=>{if(o.length>0)for(let a of o)a&&a.destroy();o.length=0,p=0}});let r=0,s=class a{constructor(b){this.uid=(0,c.uid)("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],(b={...a.defaultOptions,...b}).maxTextures||((0,e.deprecation)("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),b.maxTextures=l());const{maxTextures:f,attributesInitialSize:g,indicesInitialSize:h}=b;this.attributeBuffer=new d.ViewableBuffer(4*g),this.indexBuffer=new Uint16Array(h),this.maxTextures=f}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let b=0;b<this.batchIndex;b++){var a;a=this.batches[b],o[p++]=a}this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(a){this._elements[this.elementSize++]=a,a._indexStart=this.indexSize,a._attributeStart=this.attributeSize,a._batcher=this,this.indexSize+=a.indexSize,this.attributeSize+=a.attributeSize*this.vertexSize}checkAndUpdateTexture(a,b){let c=a._batch.textures.ids[b._source.uid];return(!!c||0===c)&&(a._textureId=c,a.texture=b,!0)}updateElement(a){this.dirty=!0;let b=this.attributeBuffer;a.packAsQuad?this.packQuadAttributes(a,b.float32View,b.uint32View,a._attributeStart,a._textureId):this.packAttributes(a,b.float32View,b.uint32View,a._attributeStart,a._textureId)}break(a){let b=this._elements;if(!b[this.elementStart])return;let c=q(),d=c.textures;d.clear();let e=b[this.elementStart],f=(0,h.getAdjustedBlendModeBlend)(e.blendMode,e.texture._source),g=e.topology;4*this.attributeSize>this.attributeBuffer.size&&this._resizeAttributeBuffer(4*this.attributeSize),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);let i=this.attributeBuffer.float32View,j=this.attributeBuffer.uint32View,k=this.indexBuffer,l=this._batchIndexSize,m=this._batchIndexStart,n="startBatch",o=this.maxTextures;for(let e=this.elementStart;e<this.elementSize;++e){let p=b[e];b[e]=null;let s=p.texture._source,t=(0,h.getAdjustedBlendModeBlend)(p.blendMode,s),u=f!==t||g!==p.topology;if(s._batchTick===r&&!u){p._textureId=s._textureBindLocation,l+=p.indexSize,p.packAsQuad?(this.packQuadAttributes(p,i,j,p._attributeStart,p._textureId),this.packQuadIndex(k,p._indexStart,p._attributeStart/this.vertexSize)):(this.packAttributes(p,i,j,p._attributeStart,p._textureId),this.packIndex(p,k,p._indexStart,p._attributeStart/this.vertexSize)),p._batch=c;continue}s._batchTick=r,(d.count>=o||u)&&(this._finishBatch(c,m,l-m,d,f,g,a,n),n="renderBatch",m=l,f=t,g=p.topology,(d=(c=q()).textures).clear(),++r),p._textureId=s._textureBindLocation=d.count,d.ids[s.uid]=d.count,d.textures[d.count++]=s,p._batch=c,l+=p.indexSize,p.packAsQuad?(this.packQuadAttributes(p,i,j,p._attributeStart,p._textureId),this.packQuadIndex(k,p._indexStart,p._attributeStart/this.vertexSize)):(this.packAttributes(p,i,j,p._attributeStart,p._textureId),this.packIndex(p,k,p._indexStart,p._attributeStart/this.vertexSize))}d.count>0&&(this._finishBatch(c,m,l-m,d,f,g,a,n),m=l,++r),this.elementStart=this.elementSize,this._batchIndexStart=m,this._batchIndexSize=l}_finishBatch(a,b,c,d,e,f,g,h){a.gpuBindGroup=null,a.bindGroup=null,a.action=h,a.batcher=this,a.textures=d,a.blendMode=e,a.topology=f,a.start=b,a.size=c,++r,this.batches[this.batchIndex++]=a,g.add(a)}finish(a){this.break(a)}ensureAttributeBuffer(a){4*a<=this.attributeBuffer.size||this._resizeAttributeBuffer(4*a)}ensureIndexBuffer(a){a<=this.indexBuffer.length||this._resizeIndexBuffer(a)}_resizeAttributeBuffer(a){let b=Math.max(a,2*this.attributeBuffer.size),c=new d.ViewableBuffer(b);(0,g.fastCopy)(this.attributeBuffer.rawBinaryData,c.rawBinaryData),this.attributeBuffer=c}_resizeIndexBuffer(a){let b=this.indexBuffer,c=Math.max(a,1.5*b.length);c+=c%2;let d=c>65535?new Uint32Array(c):new Uint16Array(c);if(d.BYTES_PER_ELEMENT!==b.BYTES_PER_ELEMENT)for(let a=0;a<b.length;a++)d[a]=b[a];else(0,g.fastCopy)(b.buffer,d.buffer);this.indexBuffer=d}packQuadIndex(a,b,c){a[b]=c+0,a[b+1]=c+1,a[b+2]=c+2,a[b+3]=c+0,a[b+4]=c+2,a[b+5]=c+3}packIndex(a,b,c,d){let e=a.indices,f=a.indexSize,g=a.indexOffset,h=a.attributeOffset;for(let a=0;a<f;a++)b[c++]=d+e[a+g]-h}destroy(a={}){if(null!==this.batches){for(let a=0;a<this.batchIndex;a++){var b;b=this.batches[a],o[p++]=b}this.batches=null,this.geometry.destroy(!0),this.geometry=null,a.shader&&(this.shader?.destroy(),this.shader=null);for(let a=0;a<this._elements.length;a++)this._elements[a]&&(this._elements[a]._batch=null);this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}}};s.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6},a.s(["Batch",()=>n,"Batcher",()=>s],42424);var t=a.i(61607),u=((b=u||{})[b.MAP_READ=1]="MAP_READ",b[b.MAP_WRITE=2]="MAP_WRITE",b[b.COPY_SRC=4]="COPY_SRC",b[b.COPY_DST=8]="COPY_DST",b[b.INDEX=16]="INDEX",b[b.VERTEX=32]="VERTEX",b[b.UNIFORM=64]="UNIFORM",b[b.STORAGE=128]="STORAGE",b[b.INDIRECT=256]="INDIRECT",b[b.QUERY_RESOLVE=512]="QUERY_RESOLVE",b[b.STATIC=1024]="STATIC",b);a.s(["BufferUsage",()=>u],52776);class v extends t.default{constructor(a){let{data:b,size:d}=a;const{usage:e,label:f,shrinkToFit:g}=a;super(),this._gpuData=Object.create(null),this._gcLastUsed=-1,this.autoGarbageCollect=!0,this.uid=(0,c.uid)("buffer"),this._resourceType="buffer",this._resourceId=(0,c.uid)("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,b instanceof Array&&(b=new Float32Array(b)),this._data=b,d??(d=b?.byteLength);const h=!!b;this.descriptor={size:d,usage:e,mappedAtCreation:h,label:f},this.shrinkToFit=g??!0}get data(){return this._data}set data(a){this.setDataWithSize(a,a.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&u.STATIC)}set static(a){a?this.descriptor.usage|=u.STATIC:this.descriptor.usage&=~u.STATIC}setDataWithSize(a,b,d){if(this._updateID++,this._updateSize=b*a.BYTES_PER_ELEMENT,this._data===a){d&&this.emit("update",this);return}let e=this._data;(this._data=a,this._dataInt32=null,e&&e.length===a.length)?d&&this.emit("update",this):!this.shrinkToFit&&e&&a.byteLength<e.byteLength?d&&this.emit("update",this):(this.descriptor.size=a.byteLength,this._resourceId=(0,c.uid)("resource"),this.emit("change",this))}update(a){this._updateSize=a??this._updateSize,this._updateID++,this.emit("update",this)}unload(){for(let a in this.emit("unload",this),this._gpuData)this._gpuData[a]?.destroy();this._gpuData=Object.create(null)}destroy(){this.destroyed=!0,this.unload(),this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}a.s(["Buffer",()=>v],42682);var w=t,x=a.i(83813);function y(a,b){if(!(a instanceof v)){let c=b?u.INDEX:u.VERTEX;a instanceof Array&&(b?(a=new Uint32Array(a),c=u.INDEX|u.COPY_DST):(a=new Float32Array(a),c=u.VERTEX|u.COPY_DST)),a=new v({data:a,label:b?"index-mesh-buffer":"vertex-mesh-buffer",usage:c})}return a}function z(a,b,c){let d=a.getAttribute(b);if(!d)return c.minX=0,c.minY=0,c.maxX=0,c.maxY=0,c;let e=d.buffer.data,f=1/0,g=1/0,h=-1/0,i=-1/0,j=e.BYTES_PER_ELEMENT,k=(d.offset||0)/j,l=(d.stride||8)/j;for(let a=k;a<e.length;a+=l){let b=e[a],c=e[a+1];b>h&&(h=b),c>i&&(i=c),b<f&&(f=b),c<g&&(g=c)}return c.minX=f,c.minY=g,c.maxX=h,c.maxY=i,c}a.s(["ensureIsBuffer",()=>y],68996),a.s(["getGeometryBounds",()=>z],90807);class A extends w.default{constructor(a={}){super(),this._gpuData=Object.create(null),this.autoGarbageCollect=!0,this._gcLastUsed=-1,this.uid=(0,c.uid)("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new x.Bounds,this._boundsDirty=!0;const{attributes:b,indexBuffer:d,topology:e}=a;if(this.buffers=[],this.attributes={},b)for(const a in b)this.addAttribute(a,b[a]);this.instanceCount=a.instanceCount??1,d&&this.addIndex(d),this.topology=e||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(a){return this.attributes[a]}getIndex(){return this.indexBuffer}getBuffer(a){return this.getAttribute(a).buffer}getSize(){for(let a in this.attributes){let b=this.attributes[a];return b.buffer.data.length/(b.stride/4||b.size)}return 0}addAttribute(a,b){var c;let d=(((c=b)instanceof v||Array.isArray(c)||c.BYTES_PER_ELEMENT)&&(c={buffer:c}),c.buffer=y(c.buffer,!1),c);-1===this.buffers.indexOf(d.buffer)&&(this.buffers.push(d.buffer),d.buffer.on("update",this.onBufferUpdate,this),d.buffer.on("change",this.onBufferUpdate,this)),this.attributes[a]=d}addIndex(a){this.indexBuffer=y(a,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,z(this,"aPosition",this._bounds)):this._bounds}unload(){for(let a in this.emit("unload",this),this._gpuData)this._gpuData[a]?.destroy();this._gpuData=Object.create(null)}destroy(a=!1){this.emit("destroy",this),this.removeAllListeners(),a&&this.buffers.forEach(a=>a.destroy()),this.unload(),this.indexBuffer?.destroy(),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}a.s(["Geometry",()=>A],54676);let B=new Float32Array(1),C=new Uint32Array(1);class D extends A{constructor(){const a=new v({data:B,label:"attribute-batch-buffer",usage:u.VERTEX|u.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:a,format:"float32x2",stride:24,offset:0},aUV:{buffer:a,format:"float32x2",stride:24,offset:8},aColor:{buffer:a,format:"unorm8x4",stride:24,offset:16},aTextureIdAndRound:{buffer:a,format:"uint16x2",stride:24,offset:20}},indexBuffer:new v({data:C,label:"index-batch-buffer",usage:u.INDEX|u.COPY_DST,shrinkToFit:!1})})}}a.s(["BatchGeometry",()=>D],81933)},19973,a=>{"use strict";let b=Object.create(null),c=Object.create(null);function d(a,d){let e=c[a];return void 0===e&&(void 0===b[d]&&(b[d]=1),c[a]=e=b[d]++),e}a.s(["createIdFromString",()=>d])},53229,12189,29970,80870,99802,55722,40232,70770,3356,21268,85945,24424,27468,5542,66722,a=>{"use strict";let b;var c,d=a.i(19973),e=a.i(94694);function f(){if(!b){b="mediump";let a=(0,e.getTestContext)();a&&a.getShaderPrecisionFormat&&(b=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision?"highp":"mediump")}return b}function g(a,b,c){return b?a:c?(a=a.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${a}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${a}
        `}function h(a,b,c){let d=c?b.maxSupportedFragmentPrecision:b.maxSupportedVertexPrecision;if("precision"!==a.substring(0,9)){let e=c?b.requestedFragmentPrecision:b.requestedVertexPrecision;return"highp"===e&&"highp"!==d&&(e="mediump"),`precision ${e} float;
${a}`}return"highp"!==d&&"precision highp"===a.substring(0,15)?a.replace("precision highp","precision mediump"):a}function i(a,b){return b?`#version 300 es
${a}`:a}a.s(["getMaxFragmentPrecision",()=>f],12189),a.s(["addProgramDefines",()=>g],29970),a.s(["ensurePrecision",()=>h],80870),a.s(["insertVersion",()=>i],99802);let j={},k={};function l(a,{name:b="pixi-program"},c=!0){b=b.replace(/\s+/g,"-")+(c?"-fragment":"-vertex");let d=c?j:k;if(d[b]?(d[b]++,b+=`-${d[b]}`):d[b]=1,-1!==a.indexOf("#define SHADER_NAME"))return a;let e=`#define SHADER_NAME ${b}`;return`${e}
${a}`}function m(a,b){return b?a.replace("#version 300 es",""):a}a.s(["setProgramName",()=>l],55722),a.s(["stripVersion",()=>m],40232);let n={stripVersion:m,ensurePrecision:h,addProgramDefines:g,setProgramName:l,insertVersion:i},o=Object.create(null),p=class a{constructor(b){const c=-1!==(b={...a.defaultOptions,...b}).fragment.indexOf("#version 300 es"),e={stripVersion:c,ensurePrecision:{requestedFragmentPrecision:b.preferredFragmentPrecision,requestedVertexPrecision:b.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:f()},setProgramName:{name:b.name},addProgramDefines:c,insertVersion:c};let g=b.fragment,h=b.vertex;Object.keys(n).forEach(a=>{let b=e[a];g=n[a](g,b,!0),h=n[a](h,b,!1)}),this.fragment=g,this.vertex=h,this.transformFeedbackVaryings=b.transformFeedbackVaryings,this._key=(0,d.createIdFromString)(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null,o[this._cacheKey]=null}static from(b){let c=`${b.vertex}:${b.fragment}`;return o[c]||(o[c]=new a(b),o[c]._cacheKey=c),o[c]}};p.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"},a.s(["GlProgram",()=>p],53229);let q={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function r(a){return q[a]??q.float32}a.s(["getAttributeInfoFromFormat",()=>r],70770);let s={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function t({source:a,entryPoint:b}){let c={},d=a.indexOf(`fn ${b}`);if(-1!==d){let b=a.indexOf("->",d);if(-1!==b){let e,f=a.substring(d,b),g=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;for(;null!==(e=g.exec(f));){let a=s[e[3]]??"float32";c[e[2]]={location:parseInt(e[1],10),format:a,stride:r(a).stride,offset:0,instance:!1,start:0}}}}return c}function u(a){let b=/@group\((\d+)\)/,c=/@binding\((\d+)\)/,d=/var(<[^>]+>)? (\w+)/,e=/:\s*(\w+)/,f=/(\w+)\s*:\s*([\w\<\>]+)/g,g=/struct\s+(\w+)/,h=a.match(/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g)?.map(a=>({group:parseInt(a.match(b)[1],10),binding:parseInt(a.match(c)[1],10),name:a.match(d)[2],isUniform:"<uniform>"===a.match(d)[1],type:a.match(e)[1]}));if(!h)return{groups:[],structs:[]};let i=a.match(/struct\s+(\w+)\s*{([^}]+)}/g)?.map(a=>{let b=a.match(g)[1],c=a.match(f).reduce((a,b)=>{let[c,d]=b.split(":");return a[c.trim()]=d.trim(),a},{});return c?{name:b,members:c}:null}).filter(({name:a})=>h.some(b=>b.type===a))??[];return{groups:h,structs:i}}a.s(["extractAttributesFromGpuProgram",()=>t],3356),a.s(["extractStructAndGroups",()=>u],21268);var v=((c=v||{})[c.VERTEX=1]="VERTEX",c[c.FRAGMENT=2]="FRAGMENT",c[c.COMPUTE=4]="COMPUTE",c);function w({groups:a}){let b=[];for(let c=0;c<a.length;c++){let d=a[c];b[d.group]||(b[d.group]=[]),d.isUniform?b[d.group].push({binding:d.binding,visibility:v.VERTEX|v.FRAGMENT,buffer:{type:"uniform"}}):"sampler"===d.type?b[d.group].push({binding:d.binding,visibility:v.FRAGMENT,sampler:{type:"filtering"}}):"texture_2d"===d.type&&b[d.group].push({binding:d.binding,visibility:v.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return b}function x({groups:a}){let b=[];for(let c=0;c<a.length;c++){let d=a[c];b[d.group]||(b[d.group]={}),b[d.group][d.name]=d.binding}return b}function y(a,b){let c=new Set,d=new Set;return{structs:[...a.structs,...b.structs].filter(a=>!c.has(a.name)&&(c.add(a.name),!0)),groups:[...a.groups,...b.groups].filter(a=>{let b=`${a.name}-${a.binding}`;return!d.has(b)&&(d.add(b),!0)})}}a.s(["ShaderStage",()=>v],85945),a.s(["generateGpuLayoutGroups",()=>w],24424),a.s(["generateLayoutHash",()=>x],27468),a.s(["removeStructAndGroupDuplicates",()=>y],5542);let z=Object.create(null);class A{constructor(a){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:b,vertex:c,layout:d,gpuLayout:e,name:f}=a;if(this.name=f,this.fragment=b,this.vertex=c,b.source===c.source){const a=u(b.source);this.structsAndGroups=a}else{const a=u(c.source),d=u(b.source);this.structsAndGroups=y(a,d)}this.layout=d??x(this.structsAndGroups),this.gpuLayout=e??w(this.structsAndGroups),this.autoAssignGlobalUniforms=this.layout[0]?.globalUniforms!==void 0,this.autoAssignLocalUniforms=this.layout[1]?.localUniforms!==void 0,this._generateProgramKey()}_generateProgramKey(){let{vertex:a,fragment:b}=this,c=a.source+b.source+a.entryPoint+b.entryPoint;this._layoutKey=(0,d.createIdFromString)(c,"program")}get attributeData(){return this._attributeData??(this._attributeData=t(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null,z[this._cacheKey]=null}static from(a){let b=`${a.vertex.source}:${a.fragment.source}:${a.fragment.entryPoint}:${a.vertex.entryPoint}`;return z[b]||(z[b]=new A(a),z[b]._cacheKey=b),z[b]}}a.s(["GpuProgram",()=>A],66722)},35235,21928,8608,90197,19660,49095,6707,64878,99606,10232,28012,a=>{"use strict";var b=a.i(53229),c=a.i(66722),d=a.i(51983);function e(a,b,c){if(a)for(let e in a){let f=b[e.toLocaleLowerCase()];if(f){let b=a[e];"header"===e&&(b=b.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),c&&f.push(`//----${c}----//`),f.push(b)}else(0,d.warn)(`${e} placement hook does not exist in shader`)}}a.s(["addBits",()=>e],21928);let f=/\{\{(.*?)\}\}/g;function g(a){let b={};return(a.match(f)?.map(a=>a.replace(/[{()}]/g,""))??[]).forEach(a=>{b[a]=[]}),b}function h(a,b){let c,d=/@in\s+([^;]+);/g;for(;null!==(c=d.exec(a));)b.push(c[1])}function i(a,b,c=!1){let d=[];h(b,d),a.forEach(a=>{a.header&&h(a.header,d)}),c&&d.sort();let e=d.map((a,b)=>`       @location(${b}) ${a},`).join("\n"),f=b.replace(/@in\s+[^;]+;\s*/g,"");return f.replace("{{in}}",`
${e}
`)}function j(a,b){let c,d=/@out\s+([^;]+);/g;for(;null!==(c=d.exec(a));)b.push(c[1])}function k(a,b){let c=[];j(b,c),a.forEach(a=>{a.header&&j(a.header,c)});let d=0,e=c.sort().map(a=>a.indexOf("builtin")>-1?a:`@location(${d++}) ${a}`).join(",\n"),f=c.sort().map(a=>`       var ${a.replace(/@.*?\s+/g,"")};`).join("\n"),g=`return VSOutput(
            ${c.sort().map(a=>{let b;return` ${(b=/\b(\w+)\s*:/g.exec(a))?b[1]:""}`}).join(",\n")});`,h=b.replace(/@out\s+[^;]+;\s*/g,"");return(h=(h=h.replace("{{struct}}",`
${e}
`)).replace("{{start}}",`
${f}
`)).replace("{{return}}",`
${g}
`)}function l(a,b){let c=a;for(let a in b){let d=b[a];c=d.join("\n").length?c.replace(`{{${a}}}`,`//-----${a} START-----//
${d.join("\n")}
//----${a} FINISH----//`):c.replace(`{{${a}}}`,"")}return c}a.s(["compileHooks",()=>g],8608),a.s(["compileInputs",()=>i],90197),a.s(["compileOutputs",()=>k],19660),a.s(["injectBits",()=>l],49095);let m=Object.create(null),n=new Map,o=0;function p({template:a,bits:b}){var c,d;let e,f,g,h=r(a,b);if(m[h])return m[h];let{vertex:j,fragment:l}=(c=a,e=(d=b).map(a=>a.vertex).filter(a=>!!a),f=d.map(a=>a.fragment).filter(a=>!!a),g=i(e,c.vertex,!0),{vertex:g=k(e,g),fragment:i(f,c.fragment,!0)});return m[h]=s(j,l,b),m[h]}function q({template:a,bits:b}){let c=r(a,b);return m[c]||(m[c]=s(a.vertex,a.fragment,b)),m[c]}function r(a,b){return b.map(a=>(n.has(a)||n.set(a,o++),n.get(a))).sort((a,b)=>a-b).join("-")+a.vertex+a.fragment}function s(a,b,c){let d=g(a),f=g(b);return c.forEach(a=>{e(a.vertex,d,a.name),e(a.fragment,f,a.name)}),{vertex:l(a,d),fragment:l(b,f)}}a.s(["compileHighShader",()=>p,"compileHighShaderGl",()=>q],6707);let t=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,u=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,v=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,w=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`;a.s(["fragmentGPUTemplate",()=>u,"fragmentGlTemplate",()=>w,"vertexGPUTemplate",()=>t,"vertexGlTemplate",()=>v],64878);let x={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},y={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},z={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function A({bits:a,name:b}){let d=p({template:{fragment:u,vertex:t},bits:[x,...a]});return c.GpuProgram.from({name:b,vertex:{source:d.vertex,entryPoint:"main"},fragment:{source:d.fragment,entryPoint:"main"}})}function B({bits:a,name:c}){return new b.GlProgram({name:c,...q({template:{vertex:v,fragment:w},bits:[z,...a]})})}a.s(["globalUniformsBit",()=>x,"globalUniformsBitGl",()=>z,"globalUniformsUBOBitGl",()=>y],99606),a.s(["compileHighShaderGlProgram",()=>B,"compileHighShaderGpuProgram",()=>A],35235);let C={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},D={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}};a.s(["colorBit",()=>C,"colorBitGl",()=>D],10232);let E={};function F(a){return E[a]||(E[a]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${function(a){let b=[];if(1===a)b.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),b.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let c=0;for(let d=0;d<a;d++)b.push(`@group(1) @binding(${c++}) var textureSource${d+1}: texture_2d<f32>;`),b.push(`@group(1) @binding(${c++}) var textureSampler${d+1}: sampler;`)}return b.join("\n")}(a)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${function(a){let b=[];if(1===a)b.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{b.push("switch vTextureId {");for(let c=0;c<a;c++)c===a-1?b.push("  default:{"):b.push(`  case ${c}:{`),b.push(`      outColor = textureSampleGrad(textureSource${c+1}, textureSampler${c+1}, vUV, uvDx, uvDy);`),b.push("      break;}");b.push("}")}return b.join("\n")}(a)}
            `}}),E[a]}let G={};function H(a){return G[a]||(G[a]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${a}];

            `,main:`

                ${function(a){let b=[];for(let c=0;c<a;c++)c>0&&b.push("else"),c<a-1&&b.push(`if(vTextureId < ${c}.5)`),b.push("{"),b.push(`	outColor = texture(uTextures[${c}], vUV);`),b.push("}");return b.join("\n")}(a)}
            `}}),G[a]}a.s(["generateTextureBatchBit",()=>F,"generateTextureBatchBitGl",()=>H],28012)},586,a=>{"use strict";let b={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},c={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}};a.s(["roundPixelsBit",()=>b,"roundPixelsBitGl",()=>c])},96335,14277,71712,a=>{"use strict";var b=a.i(90423),c=a.i(19973);let d=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],e=d.reduce((a,b)=>(a[b]=!0,a),{});function f(a,b){switch(a){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*b);case"vec3<f32>":return new Float32Array(3*b);case"vec4<f32>":return new Float32Array(4*b);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}a.s(["UNIFORM_TYPES_MAP",()=>e,"UNIFORM_TYPES_VALUES",()=>d],14277),a.s(["getDefaultUniformValue",()=>f],71712);let g=class a{constructor(g,h){this._touched=0,this.uid=(0,b.uid)("uniform"),this._resourceType="uniformGroup",this._resourceId=(0,b.uid)("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,h={...a.defaultOptions,...h},this.uniformStructures=g;const i={};for(const a in g){const b=g[a];if(b.name=a,b.size=b.size??1,!e[b.type]){const a=b.type.match(/^array<(\w+(?:<\w+>)?),\s*(\d+)>$/);if(a){const[,c,d]=a;throw Error(`Uniform type ${b.type} is not supported. Use type: '${c}', size: ${d} instead.`)}throw Error(`Uniform type ${b.type} is not supported. Supported uniform types are: ${d.join(", ")}`)}b.value??(b.value=f(b.type,b.size)),i[a]=b.value}this.uniforms=i,this._dirtyId=1,this.ubo=h.ubo,this.isStatic=h.isStatic,this._signature=(0,c.createIdFromString)(Object.keys(i).map(a=>`${a}-${g[a].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};g.defaultOptions={ubo:!1,isStatic:!1},a.s(["UniformGroup",()=>g],96335)},90074,a=>{"use strict";var b=a.i(96335);let c={};function d(a){let d=c[a];if(d)return d;let e=new Int32Array(a);for(let b=0;b<a;b++)e[b]=b;return c[a]=new b.UniformGroup({uTextures:{value:e,type:"i32",size:a}},{isStatic:!0})}a.s(["getBatchSamplersUniformGroup",()=>d])},53507,a=>{"use strict";var b,c=((b=c||{})[b.WEBGL=1]="WEBGL",b[b.WEBGPU=2]="WEBGPU",b[b.BOTH=3]="BOTH",b);a.s(["RendererType",()=>c])},56312,a=>{"use strict";var b=a.i(61607),c=a.i(90423),d=a.i(53229),e=a.i(74395),f=a.i(66722),g=a.i(53507),h=a.i(96335);class i extends b.default{constructor(a){super(),this.uid=(0,c.uid)("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[],this._destroyed=!1;let{gpuProgram:b,glProgram:d,groups:f,resources:i,compatibleRenderers:j,groupMap:k}=a;this.gpuProgram=b,this.glProgram=d,void 0===j&&(j=0,b&&(j|=g.RendererType.WEBGPU),d&&(j|=g.RendererType.WEBGL)),this.compatibleRenderers=j;const l={};if(i||f||(i={}),i&&f)throw Error("[Shader] Cannot have both resources and groups");if(b||!f||k){if(!b&&f&&k)for(const a in k)for(const b in k[a]){const c=k[a][b];l[c]={group:a,binding:b,name:c}}else if(b&&f&&!k){const a=b.structsAndGroups.groups;k={},a.forEach(a=>{k[a.group]=k[a.group]||{},k[a.group][a.binding]=a.name,l[a.name]=a})}else if(i){f={},k={},b&&b.structsAndGroups.groups.forEach(a=>{k[a.group]=k[a.group]||{},k[a.group][a.binding]=a.name,l[a.name]=a});let a=0;for(const b in i)!l[b]&&(f[99]||(f[99]=new e.BindGroup,this._ownedBindGroups.push(f[99])),l[b]={group:99,binding:a,name:b},k[99]=k[99]||{},k[99][a]=b,a++);for(const a in i){let b=i[a];b.source||b._resourceType||(b=new h.UniformGroup(b));const c=l[a];c&&(f[c.group]||(f[c.group]=new e.BindGroup,this._ownedBindGroups.push(f[c.group])),f[c.group].setResource(b,c.binding))}}}else throw Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");this.groups=f,this._uniformBindMap=k,this.resources=this._buildResourceAccessor(f,l)}addResource(a,b,c){var d,f;(d=this._uniformBindMap)[b]||(d[b]={}),(f=this._uniformBindMap[b])[c]||(f[c]=a),this.groups[b]||(this.groups[b]=new e.BindGroup,this._ownedBindGroups.push(this.groups[b]))}_buildResourceAccessor(a,b){let c={};for(let d in b){let e=b[d];Object.defineProperty(c,e.name,{get:()=>a[e.group].getResource(e.binding),set(b){a[e.group].setResource(b,e.binding)}})}return c}destroy(a=!1){this._destroyed||(this._destroyed=!0,this.emit("destroy",this),a&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(a=>{a.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null)}static from(a){let b,c,{gpu:e,gl:g,...h}=a;return e&&(b=f.GpuProgram.from(e)),g&&(c=d.GlProgram.from(g)),new i({gpuProgram:b,glProgram:c,...h})}}a.s(["Shader",()=>i])},28277,55475,a=>{"use strict";var b=a.i(44373),c=a.i(42424),d=a.i(81933),e=a.i(35235),f=a.i(10232),g=a.i(28012),h=a.i(586),i=a.i(90074),j=a.i(56312);class k extends j.Shader{constructor(a){super({glProgram:(0,e.compileHighShaderGlProgram)({name:"batch",bits:[f.colorBitGl,(0,g.generateTextureBatchBitGl)(a),h.roundPixelsBitGl]}),gpuProgram:(0,e.compileHighShaderGpuProgram)({name:"batch",bits:[f.colorBit,(0,g.generateTextureBatchBit)(a),h.roundPixelsBit]}),resources:{batchSamplers:(0,i.getBatchSamplersUniformGroup)(a)}}),this.maxTextures=a}}a.s(["DefaultShader",()=>k],55475);let l=null,m=class a extends c.Batcher{constructor(b){super(b),this.geometry=new d.BatchGeometry,this.name=a.extension.name,this.vertexSize=6,l??(l=new k(b.maxTextures)),this.shader=l}packAttributes(a,b,c,d,e){let f=e<<16|65535&a.roundPixels,g=a.transform,h=g.a,i=g.b,j=g.c,k=g.d,l=g.tx,m=g.ty,{positions:n,uvs:o}=a,p=a.color,q=a.attributeOffset,r=q+a.attributeSize;for(let a=q;a<r;a++){let e=2*a,g=n[e],q=n[e+1];b[d++]=h*g+j*q+l,b[d++]=k*q+i*g+m,b[d++]=o[e],b[d++]=o[e+1],c[d++]=p,c[d++]=f}}packQuadAttributes(a,b,c,d,e){let f=a.texture,g=a.transform,h=g.a,i=g.b,j=g.c,k=g.d,l=g.tx,m=g.ty,n=a.bounds,o=n.maxX,p=n.minX,q=n.maxY,r=n.minY,s=f.uvs,t=a.color,u=e<<16|65535&a.roundPixels;b[d+0]=h*p+j*r+l,b[d+1]=k*r+i*p+m,b[d+2]=s.x0,b[d+3]=s.y0,c[d+4]=t,c[d+5]=u,b[d+6]=h*o+j*r+l,b[d+7]=k*r+i*o+m,b[d+8]=s.x1,b[d+9]=s.y1,c[d+10]=t,c[d+11]=u,b[d+12]=h*o+j*q+l,b[d+13]=k*q+i*o+m,b[d+14]=s.x2,b[d+15]=s.y2,c[d+16]=t,c[d+17]=u,b[d+18]=h*p+j*q+l,b[d+19]=k*q+i*p+m,b[d+20]=s.x3,b[d+21]=s.y3,c[d+22]=t,c[d+23]=u}_updateMaxTextures(a){this.shader.maxTextures!==a&&(l=new k(a),this.shader=l)}destroy(){this.shader=null,super.destroy()}};m.extension={type:[b.ExtensionType.Batcher],name:"default"},a.s(["DefaultBatcher",()=>m],28277)},46629,a=>{"use strict";class b{constructor(a){this.items=Object.create(null);const{renderer:b,type:c,onUnload:d,priority:e,name:f}=a;this._renderer=b,b.gc.addResourceHash(this,"items",c,e??0),this._onUnload=d,this.name=f}add(a){return!this.items[a.uid]&&(this.items[a.uid]=a,a.once("unload",this.remove,this),a._gcLastUsed=this._renderer.gc.now,!0)}remove(a,...b){if(!this.items[a.uid])return;let c=a._gpuData[this._renderer.uid];c&&(this._onUnload?.(a,...b),c.destroy(),a._gpuData[this._renderer.uid]=null,this.items[a.uid]=null)}removeAll(...a){Object.values(this.items).forEach(b=>b&&this.remove(b,...a))}destroy(...a){this.removeAll(...a),this.items=Object.create(null),this._renderer=null,this._onUnload=null}}a.s(["GCManagedHash",()=>b])},45287,a=>{"use strict";let b={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},c=class a{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(a){!!(1&this.data)!==a&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(a){!!(2&this.data)!==a&&(this.data^=2)}set cullMode(a){if("none"===a){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace="front"===a}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(4&this.data)}set culling(a){!!(4&this.data)!==a&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(a){!!(8&this.data)!==a&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(a){!!(32&this.data)!==a&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(a){!!(16&this.data)!==a&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(a){this.blend="none"!==a,this._blendMode=a,this._blendModeId=b[a]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(a){this.offsets=!!a,this._polygonOffset=a}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){let b=new a;return b.depthTest=!1,b.blend=!0,b}};c.default2d=c.for2d(),a.s(["State",()=>c])},12874,a=>{"use strict";function b(a,b,c,d){c[d++]=(a>>16&255)/255,c[d++]=(a>>8&255)/255,c[d++]=(255&a)/255,c[d++]=b}function c(a,b,c){let d=(a>>24&255)/255;b[c++]=(255&a)/255*d,b[c++]=(a>>8&255)/255*d,b[c++]=(a>>16&255)/255*d,b[c++]=d}a.s(["color32BitToUniform",()=>c,"colorToUniform",()=>b])},28343,a=>{"use strict";class b{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){this.reset()}}a.s(["BatchableSprite",()=>b])},77686,a=>{"use strict";let b={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},c={...b,vertex:{...b.vertex,header:b.vertex.header.replace("group(1)","group(2)")}},d={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}};a.s(["localUniformBit",()=>b,"localUniformBitGl",()=>d,"localUniformBitGroup2",()=>c])},21437,a=>{"use strict";var b=a.i(53229),c=a.i(66722),d=a.i(56312),e=a.i(45287);let f=class a extends d.Shader{constructor(b){super(b={...a.defaultOptions,...b}),this.enabled=!0,this._state=e.State.for2d(),this.blendMode=b.blendMode,this.padding=b.padding,"boolean"==typeof b.antialias?this.antialias=b.antialias?"on":"off":this.antialias=b.antialias,this.resolution=b.resolution,this.blendRequired=b.blendRequired,this.clipToViewport=b.clipToViewport,this.addResource("uTexture",0,1),b.blendRequired&&this.addResource("uBackTexture",0,3)}apply(a,b,c,d){a.applyFilter(this,b,c,d)}get blendMode(){return this._state.blendMode}set blendMode(a){this._state.blendMode=a}static from(d){let e,f,{gpu:g,gl:h,...i}=d;return g&&(e=c.GpuProgram.from(g)),h&&(f=b.GlProgram.from(h)),new a({gpuProgram:e,glProgram:f,...i})}};f.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0},a.s(["Filter",()=>f])}];

//# sourceMappingURL=node_modules_43c55478._.js.map
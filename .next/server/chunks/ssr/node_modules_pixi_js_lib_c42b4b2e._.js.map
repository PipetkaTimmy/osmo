{"version":3,"sources":["../../../../node_modules/pixi.js/src/rendering/batcher/gpu/getTextureBatchBindGroup.ts","../../../../node_modules/pixi.js/src/rendering/renderers/shared/texture/CanvasPool.ts","../../../../node_modules/pixi.js/src/scene/sprite-nine-slice/init.ts","../../../../node_modules/pixi.js/src/scene/mesh/init.ts","../../../../node_modules/pixi.js/src/scene/text-bitmap/init.ts","../../../../node_modules/pixi.js/src/scene/sprite-tiling/init.ts","../../../../node_modules/pixi.js/src/filters/init.ts","../../../../node_modules/pixi.js/src/app/init.ts","../../../../node_modules/pixi.js/src/scene/graphics/init.ts","../../../../node_modules/pixi.js/src/scene/text/init.ts","../../../../node_modules/pixi.js/src/scene/particle-container/init.ts","../../../../node_modules/pixi.js/src/scene/text-html/init.ts","../../../../node_modules/pixi.js/src/events/init.ts","../../../../node_modules/pixi.js/src/accessibility/init.ts","../../../../node_modules/pixi.js/src/dom/init.ts"],"sourcesContent":["import { BindGroup } from '../../renderers/gpu/shader/BindGroup';\nimport { Texture } from '../../renderers/shared/texture/Texture';\n\nimport type { TextureSource } from '../../renderers/shared/texture/sources/TextureSource';\n\nconst cachedGroups: Record<number, BindGroup> = {};\n\n/**\n * @param textures\n * @param size\n * @param maxTextures\n * @internal\n */\nexport function getTextureBatchBindGroup(textures: TextureSource[], size: number, maxTextures: number)\n{\n    let uid = 2166136261; // FNV-1a 32-bit offset basis\n\n    for (let i = 0; i < size; i++)\n    {\n        uid ^= textures[i].uid;\n        uid = Math.imul(uid, 16777619);\n        uid >>>= 0;\n    }\n\n    return cachedGroups[uid] || generateTextureBatchBindGroup(textures, size, uid, maxTextures);\n}\n\nfunction generateTextureBatchBindGroup(textures: TextureSource[], size: number, key: number, maxTextures: number): BindGroup\n{\n    const bindGroupResources: Record<string, any> = {};\n\n    let bindIndex = 0;\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        const texture = i < size ? textures[i] : Texture.EMPTY.source;\n\n        bindGroupResources[bindIndex++] = texture.source;\n        bindGroupResources[bindIndex++] = texture.style;\n    }\n\n    // pad out with empty textures\n    const bindGroup = new BindGroup(bindGroupResources);\n\n    cachedGroups[key] = bindGroup;\n\n    return bindGroup;\n}\n\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { nextPow2 } from '../../../../maths/misc/pow2';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry';\n\nimport type { ICanvas, ICanvasRenderingContext2DSettings } from '../../../../environment/canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from '../../../../environment/canvas/ICanvasRenderingContext2D';\n\n/**\n * A utility type that represents a canvas and its rendering context.\n * @category rendering\n * @internal\n */\nexport interface CanvasAndContext\n{\n    /** The canvas element. */\n    canvas: ICanvas;\n    /** The rendering context of the canvas. */\n    context: ICanvasRenderingContext2D;\n}\n\n/**\n * CanvasPool is a utility class that manages a pool of reusable canvas elements\n * @category rendering\n * @internal\n */\nexport class CanvasPoolClass\n{\n    public canvasOptions: ICanvasRenderingContext2DSettings;\n\n    /**\n     * Allow renderTextures of the same size as screen, not just pow2\n     *\n     * Automatically sets to true after `setScreenSize`\n     * @default false\n     */\n    public enableFullScreen: boolean;\n    private _canvasPool: {[x in string | number]: CanvasAndContext[]};\n\n    constructor(canvasOptions?: ICanvasRenderingContext2DSettings)\n    {\n        this._canvasPool = Object.create(null);\n        this.canvasOptions = canvasOptions || {};\n        this.enableFullScreen = false;\n    }\n\n    /**\n     * Creates texture with params that were specified in pool constructor.\n     * @param pixelWidth - Width of texture in pixels.\n     * @param pixelHeight - Height of texture in pixels.\n     */\n    private _createCanvasAndContext(pixelWidth: number, pixelHeight: number): CanvasAndContext\n    {\n        const canvas = DOMAdapter.get().createCanvas();\n\n        canvas.width = pixelWidth;\n        canvas.height = pixelHeight;\n\n        const context = canvas.getContext('2d');\n\n        return { canvas, context };\n    }\n\n    /**\n     * Gets a Power-of-Two render texture or fullScreen texture\n     * @param minWidth - The minimum width of the render texture.\n     * @param minHeight - The minimum height of the render texture.\n     * @param resolution - The resolution of the render texture.\n     * @returns The new render texture.\n     */\n    public getOptimalCanvasAndContext(minWidth: number, minHeight: number, resolution = 1): CanvasAndContext\n    {\n        minWidth = Math.ceil((minWidth * resolution) - 1e-6);\n        minHeight = Math.ceil((minHeight * resolution) - 1e-6);\n        minWidth = nextPow2(minWidth);\n        minHeight = nextPow2(minHeight);\n\n        const key = (minWidth << 17) + (minHeight << 1);\n\n        if (!this._canvasPool[key])\n        {\n            this._canvasPool[key] = [];\n        }\n\n        let canvasAndContext = this._canvasPool[key].pop();\n\n        if (!canvasAndContext)\n        {\n            canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n        }\n\n        return canvasAndContext;\n    }\n\n    /**\n     * Place a render texture back into the pool.\n     * @param canvasAndContext\n     */\n    public returnCanvasAndContext(canvasAndContext: CanvasAndContext): void\n    {\n        const canvas = canvasAndContext.canvas;\n        const { width, height } = canvas;\n\n        const key = (width << 17) + (height << 1);\n\n        canvasAndContext.context.resetTransform();\n        canvasAndContext.context.clearRect(0, 0, width, height);\n\n        this._canvasPool[key].push(canvasAndContext);\n    }\n\n    public clear(): void\n    {\n        this._canvasPool = {};\n    }\n}\n\n/**\n * CanvasPool is a utility class that manages a pool of reusable canvas elements\n * @category rendering\n * @internal\n */\nexport const CanvasPool = new CanvasPoolClass();\nGlobalResourceRegistry.register(CanvasPool);\n","import { extensions } from '../../extensions/Extensions';\nimport { NineSliceSpritePipe } from './NineSliceSpritePipe';\n\nextensions.add(NineSliceSpritePipe);\n","import { extensions } from '../../extensions/Extensions';\nimport { MeshPipe } from './shared/MeshPipe';\n\nextensions.add(MeshPipe);\n","import { extensions } from '../../extensions/Extensions';\nimport { BitmapTextPipe } from './BitmapTextPipe';\n\nextensions.add(BitmapTextPipe);\n","import { extensions } from '../../extensions/Extensions';\nimport { TilingSpritePipe } from './TilingSpritePipe';\n\nextensions.add(TilingSpritePipe);\n","import { extensions } from '../extensions/Extensions';\nimport { FilterPipe } from './FilterPipe';\nimport { FilterSystem } from './FilterSystem';\n\nextensions.add(FilterSystem);\nextensions.add(FilterPipe);\n","import { extensions } from '../extensions/Extensions';\nimport { ResizePlugin } from './ResizePlugin';\nimport { TickerPlugin } from './TickerPlugin';\n\nextensions.add(ResizePlugin);\nextensions.add(TickerPlugin);\n","import { extensions } from '../../extensions/Extensions';\nimport { GraphicsContextSystem } from './shared/GraphicsContextSystem';\nimport { GraphicsPipe } from './shared/GraphicsPipe';\n\nextensions.add(GraphicsPipe);\nextensions.add(GraphicsContextSystem);\n","import { extensions } from '../../extensions/Extensions';\nimport { CanvasTextPipe } from './canvas/CanvasTextPipe';\nimport { CanvasTextSystem } from './canvas/CanvasTextSystem';\n\nextensions.add(CanvasTextSystem);\nextensions.add(CanvasTextPipe);\n","import { extensions } from '../../extensions/Extensions';\nimport { GlParticleContainerPipe } from './shared/GlParticleContainerPipe';\nimport { GpuParticleContainerPipe } from './shared/GpuParticleContainerPipe';\n\n// NOTE: this is the first occurrence of needing both gl and gpu pipes in the same file\n// This could cause some issues with tree shaking in the future.\n// Right now these two files do not import anything specific for a renderer, so is not an issue for now.\nextensions.add(GlParticleContainerPipe);\nextensions.add(GpuParticleContainerPipe);\n","import { extensions } from '../../extensions/Extensions';\nimport { HTMLTextPipe } from './HTMLTextPipe';\nimport { HTMLTextSystem } from './HTMLTextSystem';\n\nextensions.add(HTMLTextSystem);\nextensions.add(HTMLTextPipe);\n","import { extensions } from '../extensions/Extensions';\nimport { Container } from '../scene/container/Container';\nimport { EventSystem } from './EventSystem';\nimport { FederatedContainer } from './FederatedEventTarget';\n\nextensions.add(EventSystem);\nextensions.mixin(Container, FederatedContainer);\n","import { extensions } from '../extensions/Extensions';\nimport { Container } from '../scene/container/Container';\nimport { AccessibilitySystem } from './AccessibilitySystem';\nimport { accessibilityTarget } from './accessibilityTarget';\n\nextensions.add(AccessibilitySystem);\nextensions.mixin(Container, accessibilityTarget);\n","import { extensions } from '../extensions/Extensions';\nimport { DOMPipe } from './DOMPipe';\n\nexport * from './index';\n\nextensions.add(DOMPipe);\n"],"names":[],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}
{"version":3,"sources":["../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/const.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/buffer/GlBuffer.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/buffer/const.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/GlEncoderSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/GlColorMaskSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/GlLimitsSystem.ts","../../../../node_modules/pixi.js/src/rendering/batcher/gl/GlBatchAdaptor.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/context/GlContextSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/buffer/GlBufferSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/geometry/GlGeometrySystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/GlBackBufferSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/GlRenderTarget.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/utils/createUboElementsSTD40.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/utils/generateArraySyncSTD40.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/utils/createUboSyncSTD40.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/GlStencilSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/GlUboSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/mapType.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/utils/pixiToGlMaps.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/getUboData.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/defaultValue.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/compileShader.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/utils/mapFormatToGlType.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/logProgramError.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/uploaders/glUploadImageResource.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/GlProgramData.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/utils/applyStyleParams.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/getUniformData.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/state/mapWebGLBlendModesToPixi.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/state/GlStateSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/renderTarget/GlRenderTargetSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/GlTexture.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/uploaders/glUploadVideoResource.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/utils/generateUniformsSync.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/GenerateShaderSyncCode.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/GlShaderSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/program/generateProgram.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/shader/GlUniformGroupSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/GlTextureSystem.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/texture/utils/mapFormatToGlFormat.ts","../../../../node_modules/pixi.js/src/scene/mesh/gl/GlMeshAdaptor.ts","../../../../node_modules/pixi.js/src/scene/graphics/gl/GlGraphicsAdaptor.ts","../../../../node_modules/pixi.js/src/rendering/renderers/gl/WebGLRenderer.ts"],"sourcesContent":["/**\n * Various GL texture/resources formats.\n * @category rendering\n * @advanced\n */\nexport enum GL_FORMATS\n{\n    RGBA = 6408,\n    RGB = 6407,\n    RG = 33319,\n    RED = 6403,\n    RGBA_INTEGER = 36249,\n    RGB_INTEGER = 36248,\n    RG_INTEGER = 33320,\n    RED_INTEGER = 36244,\n    ALPHA = 6406,\n    LUMINANCE = 6409,\n    LUMINANCE_ALPHA = 6410,\n    DEPTH_COMPONENT = 6402,\n    DEPTH_STENCIL = 34041,\n}\n\n/**\n * Various GL target types.\n * @category rendering\n * @advanced\n */\nexport enum GL_TARGETS\n{\n    TEXTURE_2D = 3553,\n    TEXTURE_CUBE_MAP = 34067,\n    TEXTURE_2D_ARRAY = 35866,\n    TEXTURE_CUBE_MAP_POSITIVE_X = 34069,\n    TEXTURE_CUBE_MAP_NEGATIVE_X = 34070,\n    TEXTURE_CUBE_MAP_POSITIVE_Y = 34071,\n    TEXTURE_CUBE_MAP_NEGATIVE_Y = 34072,\n    TEXTURE_CUBE_MAP_POSITIVE_Z = 34073,\n    TEXTURE_CUBE_MAP_NEGATIVE_Z = 34074,\n}\n\n/**\n * The wrap modes that are supported by pixi.\n *\n * The {@link WRAP_MODE} wrap mode affects the default wrapping mode of future operations.\n * It can be re-assigned to either CLAMP or REPEAT, depending upon suitability.\n * If the texture is non power of two then clamp will be used regardless as WebGL can\n * only use REPEAT if the texture is po2.\n *\n * This property only affects WebGL.\n * @category rendering\n * @advanced\n */\nexport enum GL_WRAP_MODES\n{\n    /**\n     * The textures uvs are clamped\n     * @default 33071\n     */\n    CLAMP = 33071,\n    /**\n     * The texture uvs tile and repeat\n     * @default 10497\n     */\n    REPEAT = 10497,\n    /**\n     * The texture uvs tile and repeat with mirroring\n     * @default 33648\n     */\n    MIRRORED_REPEAT = 33648,\n}\n\n/** @internal */\nexport enum GL_TYPES\n{\n    /**\n     * 8 bits per channel for gl.RGBA\n     * @default 5121\n     */\n    UNSIGNED_BYTE = 5121,\n    /** @default 5123 */\n    UNSIGNED_SHORT = 5123,\n    /**\n     * 5 red bits, 6 green bits, 5 blue bits.\n     * @default 33635\n     */\n    UNSIGNED_SHORT_5_6_5 = 33635,\n    /**\n     * 4 red bits, 4 green bits, 4 blue bits, 4 alpha bits.\n     * @default 32819\n     */\n    UNSIGNED_SHORT_4_4_4_4 = 32819,\n    /**\n     * 5 red bits, 5 green bits, 5 blue bits, 1 alpha bit.\n     * @default 32820\n     */\n    UNSIGNED_SHORT_5_5_5_1 = 32820,\n    /** @default 5125 */\n    UNSIGNED_INT = 5125,\n    /** @default 35899 */\n    UNSIGNED_INT_10F_11F_11F_REV = 35899,\n    /** @default 33640 */\n    UNSIGNED_INT_2_10_10_10_REV = 33640,\n    /** @default 34042 */\n    UNSIGNED_INT_24_8 = 34042,\n    /** @default 35902 */\n    UNSIGNED_INT_5_9_9_9_REV = 35902,\n    /** @default 5120 */\n    BYTE = 5120,\n    /** @default 5122 */\n    SHORT = 5122,\n    /** @default 5124 */\n    INT = 5124,\n    /** @default 5126 */\n    FLOAT = 5126,\n    /** @default 36269 */\n    FLOAT_32_UNSIGNED_INT_24_8_REV = 36269,\n    /** @default 36193 */\n    HALF_FLOAT = 36193,\n}\n\n","import { type GPUData } from '../../../../scene/view/ViewContainer';\n\nimport type { BUFFER_TYPE } from './const';\n\n/** @internal */\nexport class GlBuffer implements GPUData\n{\n    public buffer: WebGLBuffer;\n    public updateID: number;\n    public byteLength: number;\n    public type: number;\n    public _lastBindBaseLocation: number = -1;\n    public _lastBindCallId: number = -1;\n\n    constructor(buffer: WebGLBuffer, type: BUFFER_TYPE)\n    {\n        this.buffer = buffer || null;\n        this.updateID = -1;\n        this.byteLength = -1;\n        this.type = type;\n    }\n\n    public destroy()\n    {\n        this.buffer = null;\n        this.updateID = -1;\n        this.byteLength = -1;\n        this.type = -1;\n        this._lastBindBaseLocation = -1;\n        this._lastBindCallId = -1;\n    }\n}\n","/**\n * Constants for various buffer types in Pixi\n * @category rendering\n * @advanced\n */\nexport enum BUFFER_TYPE\n{\n    /** buffer type for using as an index buffer */\n    ELEMENT_ARRAY_BUFFER = 34963,\n    /** buffer type for using attribute data */\n    ARRAY_BUFFER = 34962,\n    /** the buffer type is for uniform buffer objects */\n    UNIFORM_BUFFER = 35345,\n}\n\n","import { ExtensionType } from '../../../extensions/Extensions';\n\nimport type { Topology } from '../shared/geometry/const';\nimport type { Geometry } from '../shared/geometry/Geometry';\nimport type { Shader } from '../shared/shader/Shader';\nimport type { State } from '../shared/state/State';\nimport type { System } from '../shared/system/System';\nimport type { WebGLRenderer } from './WebGLRenderer';\n\n/**\n * The system that handles encoding commands for the WebGL.\n * @category rendering\n * @advanced\n */\nexport class GlEncoderSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'encoder',\n    } as const;\n\n    public readonly commandFinished = Promise.resolve();\n    private readonly _renderer: WebGLRenderer;\n\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n    }\n\n    public setGeometry(geometry: Geometry, shader?: Shader)\n    {\n        this._renderer.geometry.bind(geometry, shader.glProgram);\n    }\n\n    public finishRenderPass()\n    {\n        // noop\n    }\n\n    public draw(options: {\n        geometry: Geometry,\n        shader: Shader,\n        state?: State,\n        topology?: Topology,\n        size?: number,\n        start?: number,\n        instanceCount?: number\n        skipSync?: boolean,\n    })\n    {\n        const renderer = this._renderer;\n        const { geometry, shader, state, skipSync, topology: type, size, start, instanceCount } = options;\n\n        renderer.shader.bind(shader, skipSync);\n\n        renderer.geometry.bind(geometry, renderer.shader._activeProgram);\n\n        if (state)\n        {\n            renderer.state.set(state);\n        }\n\n        renderer.geometry.draw(type, size, start, instanceCount ?? geometry.instanceCount);\n    }\n\n    public destroy()\n    {\n        (this._renderer as null) = null;\n    }\n}\n","import { GL_TYPES } from '../../texture/const';\n\nimport type { VertexFormat } from '../../../shared/geometry/const';\n\nconst infoMap = {\n    uint8x2: GL_TYPES.UNSIGNED_BYTE,\n    uint8x4: GL_TYPES.UNSIGNED_BYTE,\n    sint8x2: GL_TYPES.BYTE,\n    sint8x4: GL_TYPES.BYTE,\n    unorm8x2: GL_TYPES.UNSIGNED_BYTE,\n    unorm8x4: GL_TYPES.UNSIGNED_BYTE,\n    snorm8x2: GL_TYPES.BYTE,\n    snorm8x4: GL_TYPES.BYTE,\n    uint16x2: GL_TYPES.UNSIGNED_SHORT,\n    uint16x4: GL_TYPES.UNSIGNED_SHORT,\n    sint16x2: GL_TYPES.SHORT,\n    sint16x4: GL_TYPES.SHORT,\n    unorm16x2: GL_TYPES.UNSIGNED_SHORT,\n    unorm16x4: GL_TYPES.UNSIGNED_SHORT,\n    snorm16x2: GL_TYPES.SHORT,\n    snorm16x4: GL_TYPES.SHORT,\n    float16x2: GL_TYPES.HALF_FLOAT,\n    float16x4: GL_TYPES.HALF_FLOAT,\n    float32: GL_TYPES.FLOAT,\n    float32x2: GL_TYPES.FLOAT,\n    float32x3: GL_TYPES.FLOAT,\n    float32x4: GL_TYPES.FLOAT,\n    uint32: GL_TYPES.UNSIGNED_INT,\n    uint32x2: GL_TYPES.UNSIGNED_INT,\n    uint32x3: GL_TYPES.UNSIGNED_INT,\n    uint32x4: GL_TYPES.UNSIGNED_INT,\n    sint32: GL_TYPES.INT,\n    sint32x2: GL_TYPES.INT,\n    sint32x3: GL_TYPES.INT,\n    sint32x4: GL_TYPES.INT\n};\n\n/**\n * @param format\n * @internal\n */\nexport function getGlTypeFromFormat(format: VertexFormat): number\n{\n    return infoMap[format] ?? infoMap.float32;\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\n\nimport type { System } from '../shared/system/System';\nimport type { WebGLRenderer } from './WebGLRenderer';\n\n/**\n * The system that handles color masking for the WebGL.\n * @category rendering\n * @advanced\n */\nexport class GlColorMaskSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'colorMask',\n    } as const;\n\n    private readonly _renderer: WebGLRenderer;\n    private _colorMaskCache = 0b1111;\n\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n    }\n\n    public setMask(colorMask: number)\n    {\n        if (this._colorMaskCache === colorMask) return;\n        this._colorMaskCache = colorMask;\n\n        this._renderer.gl.colorMask(\n            !!(colorMask & 0b1000),\n            !!(colorMask & 0b0100),\n            !!(colorMask & 0b0010),\n            !!(colorMask & 0b0001)\n        );\n    }\n\n    public destroy?: () => void;\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { checkMaxIfStatementsInShader } from '../../batcher/gl/utils/checkMaxIfStatementsInShader';\nimport { type System } from '../shared/system/System';\n\nimport type { WebGLRenderer } from './WebGLRenderer';\n/**\n * The GpuLimitsSystem provides information about the capabilities and limitations of the underlying GPU.\n * These limits, such as the maximum number of textures that can be used in a shader\n * (`maxTextures`) or the maximum number of textures that can be batched together (`maxBatchableTextures`),\n * are determined by the specific graphics hardware and driver.\n *\n * The values for these limits are not available immediately upon instantiation of the class.\n * They are populated when the GL rendering context is successfully initialized and ready,\n * which occurs after the `renderer.init()` method has completed.\n * Attempting to access these properties before the context is ready will result in undefined or default values.\n *\n * This system allows the renderer to adapt its behavior and resource allocation strategies\n * to stay within the supported boundaries of the GPU, ensuring optimal performance and stability.\n * @example\n * ```ts\n * const renderer = new WebGlRenderer();\n * await renderer.init();\n *\n * console.log(renderer.limits.maxTextures);\n * ```\n * @category rendering\n * @advanced\n */\nexport class GlLimitsSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'limits',\n    } as const;\n\n    /** The maximum number of textures that can be used by a shader */\n    public maxTextures: number;\n    /** The maximum number of batchable textures */\n    public maxBatchableTextures: number;\n\n    /** The maximum number of uniform bindings */\n    public maxUniformBindings: number;\n\n    private readonly _renderer: WebGLRenderer;\n\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n    }\n\n    public contextChange(): void\n    {\n        const gl = this._renderer.gl;\n\n        // step 1: first check max textures the GPU can handle.\n        this.maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\n        // step 2: check the maximum number of if statements the shader can have too..\n        this.maxBatchableTextures = checkMaxIfStatementsInShader(this.maxTextures, gl);\n\n        // step 3: check the limit of uniform buffer bindings.\n        // UBs are available only in WebGL2 context, requesting within WebGL1 produces a warning.\n        const isWebGl2 = this._renderer.context.webGLVersion === 2;\n\n        this.maxUniformBindings = isWebGl2\n            ? gl.getParameter(gl.MAX_UNIFORM_BUFFER_BINDINGS)\n            : 0;\n    }\n\n    public destroy(): void\n    {\n        // boom!\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { State } from '../../renderers/shared/state/State';\n\nimport type { WebGLRenderer } from '../../renderers/gl/WebGLRenderer';\nimport type { Geometry } from '../../renderers/shared/geometry/Geometry';\nimport type { Shader } from '../../renderers/shared/shader/Shader';\nimport type { Batch } from '../shared/Batcher';\nimport type { BatcherAdaptor, BatcherPipe } from '../shared/BatcherPipe';\n\n/**\n * A BatcherAdaptor that uses WebGL to render batches.\n * @category rendering\n * @ignore\n */\nexport class GlBatchAdaptor implements BatcherAdaptor\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipesAdaptor,\n        ],\n        name: 'batch',\n    } as const;\n\n    private readonly _tempState = State.for2d();\n\n    /**\n     * We only want to sync the a batched shaders uniforms once on first use\n     * this is a hash of shader uids to a boolean value.  When the shader is first bound\n     * we set the value to true.  When the shader is bound again we check the value and\n     * if it is true we know that the uniforms have already been synced and we skip it.\n     */\n    private _didUploadHash: Record<string, boolean> = {};\n    public init(batcherPipe: BatcherPipe): void\n    {\n        batcherPipe.renderer.runners.contextChange.add(this);\n    }\n\n    public contextChange(): void\n    {\n        this._didUploadHash = {};\n    }\n\n    public start(batchPipe: BatcherPipe, geometry: Geometry, shader: Shader): void\n    {\n        const renderer = batchPipe.renderer as WebGLRenderer;\n\n        const didUpload = this._didUploadHash[shader.uid];\n\n        // only want to sync the shade ron its first bind!\n        renderer.shader.bind(shader, didUpload);\n\n        if (!didUpload)\n        {\n            this._didUploadHash[shader.uid] = true;\n        }\n\n        renderer.shader.updateUniformGroup(renderer.globalUniforms.uniformGroup);\n\n        renderer.geometry.bind(geometry, shader.glProgram);\n    }\n\n    public execute(batchPipe: BatcherPipe, batch: Batch): void\n    {\n        const renderer = batchPipe.renderer as WebGLRenderer;\n\n        this._tempState.blendMode = batch.blendMode;\n\n        renderer.state.set(this._tempState);\n\n        const textures = batch.textures.textures;\n\n        for (let i = 0; i < batch.textures.count; i++)\n        {\n            renderer.texture.bind(textures[i], i);\n        }\n\n        renderer.geometry.draw(batch.topology, batch.size, batch.start);\n    }\n}\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { warn } from '../../../../utils/logging/warn';\nimport { type GpuPowerPreference } from '../../types';\n\nimport type { ICanvas } from '../../../../environment/canvas/ICanvas';\nimport type { System } from '../../shared/system/System';\nimport type { WebGLRenderer } from '../WebGLRenderer';\nimport type { WebGLExtensions } from './WebGLExtensions';\n\n/**\n * Options for the context system.\n * @category rendering\n * @advanced\n * @property {WebGL2RenderingContext | null} [context=null] - User-provided WebGL rendering context object.\n * @property {GpuPowerPreference} [powerPreference='default'] - An optional hint indicating what configuration\n * of GPU is suitable for the WebGL context, can be `'high-performance'` or `'low-power'`. Setting to `'high-performance'`\n * will prioritize rendering performance over power consumption, while setting to `'low-power'` will prioritize power saving\n * over rendering performance.\n * @property {boolean} [premultipliedAlpha=true] - Whether the compositor will assume the drawing buffer contains\n * colors with premultiplied alpha.\n * @property {boolean} [preserveDrawingBuffer=false] - Whether to enable drawing buffer preservation.\n * If enabled, the drawing buffer will preserve\n * its value until cleared or overwritten. Enable this if you need to call `toDataUrl` on the WebGL context.\n * @property {boolean} [antialias] - Whether to enable antialiasing.\n * @property {1 | 2} [preferWebGLVersion=2] - The preferred WebGL version to use.\n */\nexport interface ContextSystemOptions\n{\n    /**\n     * User-provided WebGL rendering context object.\n     * @default null\n     */\n    context: WebGL2RenderingContext | null;\n    /**\n     * An optional hint indicating what configuration of GPU is suitable for the WebGL context,\n     * can be `'high-performance'` or `'low-power'`.\n     * Setting to `'high-performance'` will prioritize rendering performance over power consumption,\n     * while setting to `'low-power'` will prioritize power saving over rendering performance.\n     * @default undefined\n     */\n    powerPreference?: GpuPowerPreference;\n\n    /**\n     * Whether the compositor will assume the drawing buffer contains colors with premultiplied alpha.\n     * @default true\n     */\n    premultipliedAlpha: boolean;\n    /**\n     * Whether to enable drawing buffer preservation. If enabled, the drawing buffer will preserve\n     * its value until cleared or overwritten. Enable this if you need to call `toDataUrl` on the WebGL context.\n     * @default false\n     */\n    preserveDrawingBuffer: boolean;\n\n    antialias?: boolean;\n\n    /**\n     * The preferred WebGL version to use.\n     * @default 2\n     */\n    preferWebGLVersion?: 1 | 2;\n\n    /**\n     * Whether to enable multi-view rendering. Set to true when rendering to multiple\n     * canvases on the dom.\n     * @default false\n     */\n    multiView: boolean;\n}\n\n/**\n * System plugin to the renderer to manage the context\n * @category rendering\n * @advanced\n */\nexport class GlContextSystem implements System<ContextSystemOptions>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'context',\n    } as const;\n\n    /** The default options for the system. */\n    public static defaultOptions: ContextSystemOptions = {\n        /**\n         * {@link WebGLOptions.context}\n         * @default null\n         */\n        context: null,\n        /**\n         * {@link WebGLOptions.premultipliedAlpha}\n         * @default true\n         */\n        premultipliedAlpha: true,\n        /**\n         * {@link WebGLOptions.preserveDrawingBuffer}\n         * @default false\n         */\n        preserveDrawingBuffer: false,\n        /**\n         * {@link WebGLOptions.powerPreference}\n         * @default default\n         */\n        powerPreference: undefined,\n        /**\n         * {@link WebGLOptions.webGLVersion}\n         * @default 2\n         */\n        preferWebGLVersion: 2,\n        /**\n         * {@link WebGLOptions.multiView}\n         * @default false\n         */\n        multiView: false\n    };\n\n    protected CONTEXT_UID: number;\n    protected gl: WebGL2RenderingContext;\n\n    /**\n     * Features supported by current renderer.\n     * @type {object}\n     * @readonly\n     */\n    public supports = {\n        /** Support for 32-bit indices buffer. */\n        uint32Indices: true,\n        /** Support for UniformBufferObjects */\n        uniformBufferObject: true,\n        /** Support for VertexArrayObjects */\n        vertexArrayObject: true,\n        /** Support for SRGB texture format */\n        srgbTextures: true,\n        /** Support for wrapping modes if a texture is non-power of two */\n        nonPowOf2wrapping: true,\n        /** Support for MSAA (antialiasing of dynamic textures) */\n        msaa: true,\n        /** Support for mipmaps if a texture is non-power of two */\n        nonPowOf2mipmaps: true,\n    };\n\n    /**\n     * Extensions available.\n     * @type {object}\n     * @readonly\n     * @property {WEBGL_draw_buffers} drawBuffers - WebGL v1 extension\n     * @property {WEBGL_depth_texture} depthTexture - WebGL v1 extension\n     * @property {OES_texture_float} floatTexture - WebGL v1 extension\n     * @property {WEBGL_lose_context} loseContext - WebGL v1 extension\n     * @property {OES_vertex_array_object} vertexArrayObject - WebGL v1 extension\n     * @property {EXT_texture_filter_anisotropic} anisotropicFiltering - WebGL v1 and v2 extension\n     */\n    public extensions: WebGLExtensions;\n\n    public webGLVersion: 1 | 2;\n\n    /**\n     * Whether to enable multi-view rendering. Set to true when rendering to multiple\n     * canvases on the dom.\n     * @default false\n     */\n    public multiView: boolean;\n\n    /**\n     * The canvas that the WebGL Context is rendering to.\n     * This will be the view canvas. But if multiView is enabled, this canvas will not be attached to the DOM.\n     * It will be rendered to and then copied to the target canvas.\n     * @readonly\n     */\n    public canvas: ICanvas;\n\n    private _renderer: WebGLRenderer;\n    private _contextLossForced: boolean;\n\n    /** @param renderer - The renderer this System works for. */\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n\n        this.extensions = Object.create(null);\n\n        // Bind functions\n        this.handleContextLost = this.handleContextLost.bind(this);\n        this.handleContextRestored = this.handleContextRestored.bind(this);\n    }\n\n    /**\n     * `true` if the context is lost\n     * @readonly\n     */\n    get isLost(): boolean\n    {\n        return (!this.gl || this.gl.isContextLost());\n    }\n\n    /**\n     * Handles the context change event.\n     * @param {WebGLRenderingContext} gl - New WebGL context.\n     */\n    protected contextChange(gl: WebGL2RenderingContext): void\n    {\n        this.gl = gl;\n        this._renderer.gl = gl;\n    }\n\n    public init(options: ContextSystemOptions): void\n    {\n        options = { ...GlContextSystem.defaultOptions, ...options };\n\n        // TODO add to options\n        let multiView = this.multiView = options.multiView;\n\n        if (options.context && multiView)\n        {\n            // eslint-disable-next-line max-len\n            warn('Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together.');\n\n            multiView = false;\n        }\n\n        if (multiView)\n        {\n            this.canvas = DOMAdapter.get()\n                .createCanvas(this._renderer.canvas.width, this._renderer.canvas.height);\n        }\n        else\n        {\n            this.canvas = this._renderer.view.canvas;\n        }\n        /*\n         * The options passed in to create a new WebGL context.\n         */\n        if (options.context)\n        {\n            this.initFromContext(options.context);\n        }\n        else\n        {\n            const alpha = this._renderer.background.alpha < 1;\n            const premultipliedAlpha = options.premultipliedAlpha ?? true;\n            const antialias = options.antialias && !this._renderer.backBuffer.useBackBuffer;\n\n            this.createContext(options.preferWebGLVersion, {\n                alpha,\n                premultipliedAlpha,\n                antialias,\n                stencil: true,\n                preserveDrawingBuffer: options.preserveDrawingBuffer,\n                powerPreference: options.powerPreference ?? 'default',\n            });\n        }\n    }\n\n    public ensureCanvasSize(targetCanvas: ICanvas): void\n    {\n        if (!this.multiView)\n        {\n            if (targetCanvas !== this.canvas)\n            {\n                warn('multiView is disabled, but targetCanvas is not the main canvas');\n            }\n\n            return;\n        }\n\n        const { canvas } = this;\n\n        if (canvas.width < targetCanvas.width || canvas.height < targetCanvas.height)\n        {\n            canvas.width = Math.max(targetCanvas.width, targetCanvas.width);\n            canvas.height = Math.max(targetCanvas.height, targetCanvas.height);\n        }\n    }\n\n    /**\n     * Initializes the context.\n     * @protected\n     * @param {WebGLRenderingContext} gl - WebGL context\n     */\n    protected initFromContext(gl: WebGL2RenderingContext): void\n    {\n        this.gl = gl;\n\n        this.webGLVersion = gl instanceof DOMAdapter.get().getWebGLRenderingContext() ? 1 : 2;\n\n        this.getExtensions();\n\n        this.validateContext(gl);\n\n        this._renderer.runners.contextChange.emit(gl);\n\n        const element = this._renderer.view.canvas;\n\n        (element as any).addEventListener('webglcontextlost', this.handleContextLost, false);\n        element.addEventListener('webglcontextrestored', this.handleContextRestored, false);\n    }\n\n    /**\n     * Initialize from context options\n     * @protected\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext\n     * @param preferWebGLVersion\n     * @param {object} options - context attributes\n     */\n    protected createContext(preferWebGLVersion: 1 | 2, options: WebGLContextAttributes): void\n    {\n        let gl: WebGL2RenderingContext | WebGLRenderingContext;\n\n        const canvas = this.canvas;\n\n        if (preferWebGLVersion === 2)\n        {\n            gl = canvas.getContext('webgl2', options);\n        }\n\n        if (!gl)\n        {\n            gl = canvas.getContext('webgl', options);\n\n            if (!gl)\n            {\n                // fail, not able to get a context\n                throw new Error('This browser does not support WebGL. Try using the canvas renderer');\n            }\n        }\n\n        this.gl = gl as WebGL2RenderingContext;\n\n        this.initFromContext(this.gl);\n    }\n\n    /** Auto-populate the {@link GlContextSystem.extensions extensions}. */\n    protected getExtensions(): void\n    {\n        // time to set up default extensions that Pixi uses.\n        const { gl } = this;\n\n        const common = {\n            anisotropicFiltering: gl.getExtension('EXT_texture_filter_anisotropic'),\n            floatTextureLinear: gl.getExtension('OES_texture_float_linear'),\n\n            s3tc: gl.getExtension('WEBGL_compressed_texture_s3tc'),\n            s3tc_sRGB: gl.getExtension('WEBGL_compressed_texture_s3tc_srgb'), // eslint-disable-line camelcase\n            etc: gl.getExtension('WEBGL_compressed_texture_etc'),\n            etc1: gl.getExtension('WEBGL_compressed_texture_etc1'),\n            pvrtc: gl.getExtension('WEBGL_compressed_texture_pvrtc')\n                || gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc'),\n            atc: gl.getExtension('WEBGL_compressed_texture_atc'),\n            astc: gl.getExtension('WEBGL_compressed_texture_astc'),\n            bptc: gl.getExtension('EXT_texture_compression_bptc'),\n            rgtc: gl.getExtension('EXT_texture_compression_rgtc'),\n            loseContext: gl.getExtension('WEBGL_lose_context'),\n        };\n\n        if (this.webGLVersion === 1)\n        {\n            this.extensions = {\n                ...common,\n\n                drawBuffers: gl.getExtension('WEBGL_draw_buffers'),\n                depthTexture: gl.getExtension('WEBGL_depth_texture'),\n                vertexArrayObject: gl.getExtension('OES_vertex_array_object')\n                    || gl.getExtension('MOZ_OES_vertex_array_object')\n                    || gl.getExtension('WEBKIT_OES_vertex_array_object'),\n                uint32ElementIndex: gl.getExtension('OES_element_index_uint'),\n                // Floats and half-floats\n                floatTexture: gl.getExtension('OES_texture_float'),\n                floatTextureLinear: gl.getExtension('OES_texture_float_linear'),\n                textureHalfFloat: gl.getExtension('OES_texture_half_float'),\n                textureHalfFloatLinear: gl.getExtension('OES_texture_half_float_linear'),\n                vertexAttribDivisorANGLE: gl.getExtension('ANGLE_instanced_arrays'),\n                srgb: gl.getExtension('EXT_sRGB'),\n            };\n        }\n        else\n        {\n            this.extensions = {\n                ...common,\n                colorBufferFloat: gl.getExtension('EXT_color_buffer_float'),\n            };\n\n            const provokeExt = gl.getExtension('WEBGL_provoking_vertex');\n\n            if (provokeExt)\n            {\n                provokeExt.provokingVertexWEBGL(provokeExt.FIRST_VERTEX_CONVENTION_WEBGL);\n            }\n        }\n    }\n\n    /**\n     * Handles a lost webgl context\n     * @param {WebGLContextEvent} event - The context lost event.\n     */\n    protected handleContextLost(event: WebGLContextEvent): void\n    {\n        event.preventDefault();\n\n        // only restore if we purposefully nuked it\n        if (this._contextLossForced)\n        {\n            this._contextLossForced = false;\n            // Restore the context after this event has exited\n            setTimeout(() =>\n            {\n                if (this.gl.isContextLost())\n                {\n                    this.extensions.loseContext?.restoreContext();\n                }\n            }, 0);\n        }\n    }\n\n    /** Handles a restored webgl context. */\n    protected handleContextRestored(): void\n    {\n        this.getExtensions(); // restore extensions state\n        this._renderer.runners.contextChange.emit(this.gl);\n    }\n\n    public destroy(): void\n    {\n        const element = this._renderer.view.canvas;\n\n        this._renderer = null;\n\n        // remove listeners\n        (element as any).removeEventListener('webglcontextlost', this.handleContextLost);\n        element.removeEventListener('webglcontextrestored', this.handleContextRestored);\n\n        this.gl.useProgram(null);\n\n        this.extensions.loseContext?.loseContext();\n    }\n\n    /**\n     * this function can be called to force a webGL context loss\n     * this will release all resources on the GPU.\n     * Useful if you need to put Pixi to sleep, and save some GPU memory\n     *\n     * As soon as render is called - all resources will be created again.\n     */\n    public forceContextLoss(): void\n    {\n        this.extensions.loseContext?.loseContext();\n        this._contextLossForced = true;\n    }\n    /**\n     * Validate context.\n     * @param {WebGLRenderingContext} gl - Render context.\n     */\n    protected validateContext(gl: WebGL2RenderingContext): void\n    {\n        const attributes = gl.getContextAttributes();\n\n        // this is going to be fairly simple for now.. but at least we have room to grow!\n        if (attributes && !attributes.stencil)\n        {\n            // #if _DEBUG\n            warn('Provided WebGL context does not have a stencil buffer, masks may not render correctly');\n            // #endif\n        }\n\n        // support\n        const supports = this.supports;\n\n        const isWebGl2 = this.webGLVersion === 2;\n        const extensions = this.extensions;\n\n        supports.uint32Indices = isWebGl2 || !!extensions.uint32ElementIndex;\n        supports.uniformBufferObject = isWebGl2;\n        supports.vertexArrayObject = isWebGl2 || !!extensions.vertexArrayObject;\n        supports.srgbTextures = isWebGl2 || !!extensions.srgb;\n        supports.nonPowOf2wrapping = isWebGl2;\n        supports.nonPowOf2mipmaps = isWebGl2;\n        supports.msaa = isWebGl2;\n\n        if (!supports.uint32Indices)\n        {\n            // #if _DEBUG\n            warn('Provided WebGL context does not support 32 index buffer, large scenes may not render correctly');\n            // #endif\n        }\n    }\n}\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { GCManagedHash } from '../../../../utils/data/GCManagedHash';\nimport { BufferUsage } from '../../shared/buffer/const';\nimport { BUFFER_TYPE } from './const';\nimport { GlBuffer } from './GlBuffer';\n\nimport type { Buffer } from '../../shared/buffer/Buffer';\nimport type { System } from '../../shared/system/System';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\nimport type { WebGLRenderer } from '../WebGLRenderer';\n\n/**\n * System plugin to the renderer to manage buffers.\n *\n * WebGL uses Buffers as a way to store objects to the GPU.\n * This system makes working with them a lot easier.\n *\n * Buffers are used in three main places in WebGL\n * - geometry information\n * - Uniform information (via uniform buffer objects - a WebGL 2 only feature)\n * - Transform feedback information. (WebGL 2 only feature)\n *\n * This system will handle the binding of buffers to the GPU as well as uploading\n * them. With this system, you never need to work directly with GPU buffers, but instead work with\n * the Buffer class.\n * @class\n * @category rendering\n * @advanced\n */\nexport class GlBufferSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'buffer',\n    } as const;\n\n    /** @internal */\n    public _gl: GlRenderingContext;\n    protected _managedBuffers: GCManagedHash<Buffer>;\n\n    /** Cache keeping track of the base bound buffer bases */\n    private _boundBufferBases: {[key: number]: GlBuffer} = Object.create(null);\n\n    private _renderer: WebGLRenderer;\n\n    private _minBaseLocation = 0;\n    private _maxBindings: number;\n    private _nextBindBaseIndex = this._minBaseLocation;\n    private _bindCallId = 0;\n\n    /**\n     * @param {Renderer} renderer - The renderer this System works for.\n     */\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n        this._managedBuffers = new GCManagedHash({\n            renderer,\n            type: 'resource',\n            onUnload: this.onBufferUnload.bind(this),\n            name: 'glBuffer'\n        });\n    }\n\n    /** @ignore */\n    public destroy(): void\n    {\n        this._managedBuffers.destroy();\n        this._renderer = null;\n        this._gl = null;\n        this._boundBufferBases = {};\n    }\n\n    /** Sets up the renderer context and necessary buffers. */\n    protected contextChange(): void\n    {\n        this._gl = this._renderer.gl;\n\n        this.destroyAll(true);\n        this._maxBindings = this._renderer.limits.maxUniformBindings;\n    }\n\n    public getGlBuffer(buffer: Buffer): GlBuffer\n    {\n        buffer._gcLastUsed = this._renderer.gc.now;\n\n        return (buffer._gpuData[this._renderer.uid] as GlBuffer) || this.createGLBuffer(buffer);\n    }\n\n    /**\n     * This binds specified buffer. On first run, it will create the webGL buffers for the context too\n     * @param buffer - the buffer to bind to the renderer\n     */\n    public bind(buffer: Buffer): void\n    {\n        const { _gl: gl } = this;\n\n        const glBuffer = this.getGlBuffer(buffer);\n\n        gl.bindBuffer(glBuffer.type, glBuffer.buffer);\n    }\n\n    /**\n     * Binds an uniform buffer to at the given index.\n     *\n     * A cache is used so a buffer will not be bound again if already bound.\n     * @param glBuffer - the buffer to bind\n     * @param index - the base index to bind it to.\n     */\n    public bindBufferBase(glBuffer: GlBuffer, index: number): void\n    {\n        const { _gl: gl } = this;\n\n        if (this._boundBufferBases[index] !== glBuffer)\n        {\n            this._boundBufferBases[index] = glBuffer;\n            glBuffer._lastBindBaseLocation = index;\n\n            gl.bindBufferBase(gl.UNIFORM_BUFFER, index, glBuffer.buffer);\n        }\n    }\n\n    public nextBindBase(hasTransformFeedback: boolean)\n    {\n        this._bindCallId++;\n        this._minBaseLocation = 0;\n        if (hasTransformFeedback)\n        {\n            this._boundBufferBases[0] = null;\n            this._minBaseLocation = 1;\n            if (this._nextBindBaseIndex < 1)\n            {\n                this._nextBindBaseIndex = 1;\n            }\n        }\n    }\n\n    public freeLocationForBufferBase(glBuffer: GlBuffer): number\n    {\n        let freeIndex = this.getLastBindBaseLocation(glBuffer);\n\n        // check if it is already bound..\n        if (freeIndex >= this._minBaseLocation)\n        {\n            glBuffer._lastBindCallId = this._bindCallId;\n\n            return freeIndex;\n        }\n\n        let loop = 0;\n        let nextIndex = this._nextBindBaseIndex;\n\n        while (loop < 2)\n        {\n            if (nextIndex >= this._maxBindings)\n            {\n                nextIndex = this._minBaseLocation;\n                loop++;\n            }\n\n            const curBuf = this._boundBufferBases[nextIndex];\n\n            if (curBuf && curBuf._lastBindCallId === this._bindCallId)\n            {\n                nextIndex++;\n                continue;\n            }\n            break;\n        }\n\n        freeIndex = nextIndex;\n        this._nextBindBaseIndex = nextIndex + 1;\n\n        if (loop >= 2)\n        {\n            // TODO: error\n            return -1;\n        }\n\n        glBuffer._lastBindCallId = this._bindCallId;\n        this._boundBufferBases[freeIndex] = null;\n\n        return freeIndex;\n    }\n\n    public getLastBindBaseLocation(glBuffer: GlBuffer): number\n    {\n        const index = glBuffer._lastBindBaseLocation;\n\n        if (this._boundBufferBases[index] === glBuffer)\n        {\n            return index;\n        }\n\n        return -1;\n    }\n\n    /**\n     * Binds a buffer whilst also binding its range.\n     * This will make the buffer start from the offset supplied rather than 0 when it is read.\n     * @param glBuffer - the buffer to bind\n     * @param index - the base index to bind at, defaults to 0\n     * @param offset - the offset to bind at (this is blocks of 256). 0 = 0, 1 = 256, 2 = 512 etc\n     * @param size - the size to bind at (this is blocks of 256).\n     */\n    public bindBufferRange(glBuffer: GlBuffer, index?: number, offset?: number, size?: number): void\n    {\n        const { _gl: gl } = this;\n\n        offset ||= 0;\n        index ||= 0;\n\n        this._boundBufferBases[index] = null;\n\n        gl.bindBufferRange(gl.UNIFORM_BUFFER, index || 0, glBuffer.buffer, offset * 256, size || 256);\n    }\n\n    /**\n     * Will ensure the data in the buffer is uploaded to the GPU.\n     * @param {Buffer} buffer - the buffer to update\n     */\n    public updateBuffer(buffer: Buffer): GlBuffer\n    {\n        const { _gl: gl } = this;\n\n        const glBuffer = this.getGlBuffer(buffer);\n\n        if (buffer._updateID === glBuffer.updateID)\n        {\n            return glBuffer;\n        }\n\n        glBuffer.updateID = buffer._updateID;\n\n        gl.bindBuffer(glBuffer.type, glBuffer.buffer);\n\n        const data = buffer.data;\n\n        const drawType = (buffer.descriptor.usage & BufferUsage.STATIC) ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW;\n\n        if (data)\n        {\n            if (glBuffer.byteLength >= data.byteLength)\n            {\n                // assuming our buffers are aligned to 4 bits...\n                // offset is always zero for now!\n                gl.bufferSubData(glBuffer.type, 0, data, 0, buffer._updateSize / data.BYTES_PER_ELEMENT);\n            }\n            else\n            {\n                glBuffer.byteLength = data.byteLength;\n                // assuming our buffers are aligned to 4 bits...\n                gl.bufferData(glBuffer.type, data, drawType);\n            }\n        }\n        else\n        {\n            glBuffer.byteLength = buffer.descriptor.size;\n            gl.bufferData(glBuffer.type, glBuffer.byteLength, drawType);\n        }\n\n        return glBuffer;\n    }\n\n    /**\n     * dispose all WebGL resources of all managed buffers\n     * @param contextLost\n     */\n    public destroyAll(contextLost: boolean = false): void\n    {\n        this._managedBuffers.removeAll(contextLost);\n    }\n\n    protected onBufferUnload(buffer: Buffer, contextLost: boolean = false): void\n    {\n        const glBuffer = buffer._gpuData[this._renderer.uid] as GlBuffer;\n\n        if (!glBuffer) return;\n        if (!contextLost) this._gl.deleteBuffer(glBuffer.buffer);\n    }\n\n    /**\n     * creates and attaches a GLBuffer object tied to the current context.\n     * @param buffer\n     * @protected\n     */\n    protected createGLBuffer(buffer: Buffer): GlBuffer\n    {\n        const { _gl: gl } = this;\n\n        let type = BUFFER_TYPE.ARRAY_BUFFER;\n\n        if ((buffer.descriptor.usage & BufferUsage.INDEX))\n        {\n            type = BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;\n        }\n        else if ((buffer.descriptor.usage & BufferUsage.UNIFORM))\n        {\n            type = BUFFER_TYPE.UNIFORM_BUFFER;\n        }\n\n        const glBuffer = new GlBuffer(gl.createBuffer(), type);\n\n        buffer._gpuData[this._renderer.uid] = glBuffer;\n        this._managedBuffers.add(buffer);\n\n        return glBuffer;\n    }\n\n    public resetState(): void\n    {\n        this._boundBufferBases = Object.create(null);\n    }\n}\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { type GPUData } from '../../../../scene/view/ViewContainer';\nimport { GCManagedHash } from '../../../../utils/data/GCManagedHash';\nimport { getAttributeInfoFromFormat } from '../../shared/geometry/utils/getAttributeInfoFromFormat';\nimport { ensureAttributes } from '../shader/program/ensureAttributes';\nimport { getGlTypeFromFormat } from './utils/getGlTypeFromFormat';\n\nimport type { Topology } from '../../shared/geometry/const';\nimport type { Geometry } from '../../shared/geometry/Geometry';\nimport type { System } from '../../shared/system/System';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\nimport type { GlProgram } from '../shader/GlProgram';\nimport type { WebGLRenderer } from '../WebGLRenderer';\n\nconst topologyToGlMap = {\n    'point-list': 0x0000,\n    'line-list': 0x0001,\n    'line-strip': 0x0003,\n    'triangle-list': 0x0004,\n    'triangle-strip': 0x0005\n};\n\n/**\n * Stores GPU-specific data for a Geometry instance in WebGL context.\n *\n * This class manages Vertex Array Object (VAO) caching for geometries,\n * allowing efficient reuse of VAOs across different shader programs.\n * Each geometry can have multiple VAOs cached, one for each unique\n * shader program signature it's used with.\n * @internal\n */\nexport class GlGeometryGpuData implements GPUData\n{\n    public vaoCache: Record<string, WebGLVertexArrayObject>;\n\n    constructor()\n    {\n        this.vaoCache = Object.create(null);\n    }\n\n    public destroy(): void\n    {\n        this.vaoCache = Object.create(null);\n    }\n}\n\n/**\n * System plugin to the renderer to manage geometry.\n * @category rendering\n * @advanced\n */\nexport class GlGeometrySystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'geometry',\n    } as const;\n\n    /**\n     * `true` if we has `*_vertex_array_object` extension.\n     * @readonly\n     */\n    public hasVao: boolean;\n\n    /**\n     * `true` if has `ANGLE_instanced_arrays` extension.\n     * @readonly\n     */\n    public hasInstance: boolean;\n\n    protected gl: GlRenderingContext;\n    protected _activeGeometry: Geometry;\n    /** @internal */\n    public _activeVao: WebGLVertexArrayObject;\n    /** @internal */\n    public _managedGeometries: GCManagedHash<Geometry>;\n\n    /** Renderer that owns this {@link GeometrySystem}. */\n    private _renderer: WebGLRenderer;\n\n    /** @param renderer - The renderer this System works for. */\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n        this._activeGeometry = null;\n        this._activeVao = null;\n\n        this.hasVao = true;\n        this.hasInstance = true;\n\n        this._managedGeometries = new GCManagedHash({\n            renderer,\n            type: 'resource',\n            onUnload: this.onGeometryUnload.bind(this),\n            name: 'glGeometry'\n        });\n    }\n\n    /** Sets up the renderer context and necessary buffers. */\n    protected contextChange(): void\n    {\n        const gl = this.gl = this._renderer.gl;\n\n        if (!this._renderer.context.supports.vertexArrayObject)\n        {\n            throw new Error('[PixiJS] Vertex Array Objects are not supported on this device');\n        }\n\n        this.destroyAll(true);\n        const nativeVaoExtension = this._renderer.context.extensions.vertexArrayObject;\n\n        if (nativeVaoExtension)\n        {\n            gl.createVertexArray = (): WebGLVertexArrayObject =>\n                nativeVaoExtension.createVertexArrayOES();\n\n            gl.bindVertexArray = (vao): void =>\n                nativeVaoExtension.bindVertexArrayOES(vao);\n\n            gl.deleteVertexArray = (vao): void =>\n                nativeVaoExtension.deleteVertexArrayOES(vao);\n        }\n\n        const nativeInstancedExtension = this._renderer.context.extensions.vertexAttribDivisorANGLE;\n\n        if (nativeInstancedExtension)\n        {\n            gl.drawArraysInstanced = (a, b, c, d): void =>\n            {\n                nativeInstancedExtension.drawArraysInstancedANGLE(a, b, c, d);\n            };\n\n            gl.drawElementsInstanced = (a, b, c, d, e): void =>\n            {\n                nativeInstancedExtension.drawElementsInstancedANGLE(a, b, c, d, e);\n            };\n\n            gl.vertexAttribDivisor = (a, b): void =>\n                nativeInstancedExtension.vertexAttribDivisorANGLE(a, b);\n        }\n\n        this._activeGeometry = null;\n        this._activeVao = null;\n    }\n\n    /**\n     * Binds geometry so that is can be drawn. Creating a Vao if required\n     * @param geometry - Instance of geometry to bind.\n     * @param program - Instance of program to use vao for.\n     */\n    public bind(geometry?: Geometry, program?: GlProgram): void\n    {\n        // shader ||= this.renderer.shader.shader;\n\n        const gl = this.gl;\n\n        this._activeGeometry = geometry;\n\n        const vao = this.getVao(geometry, program);\n\n        if (this._activeVao !== vao)\n        {\n            this._activeVao = vao;\n\n            gl.bindVertexArray(vao);\n        }\n\n        this.updateBuffers();\n    }\n\n    /** Reset and unbind any active VAO and geometry. */\n    public resetState(): void\n    {\n        this.unbind();\n    }\n\n    /** Update buffers of the currently bound geometry. */\n    public updateBuffers(): void\n    {\n        const geometry = this._activeGeometry;\n\n        const bufferSystem = this._renderer.buffer;\n\n        for (let i = 0; i < geometry.buffers.length; i++)\n        {\n            const buffer = geometry.buffers[i];\n\n            bufferSystem.updateBuffer(buffer);\n        }\n\n        geometry._gcLastUsed = this._renderer.gc.now;\n    }\n\n    /**\n     * Check compatibility between a geometry and a program\n     * @param geometry - Geometry instance.\n     * @param program - Program instance.\n     */\n    protected checkCompatibility(geometry: Geometry, program: GlProgram): void\n    {\n        // geometry must have at least all the attributes that the shader requires.\n        const geometryAttributes = geometry.attributes;\n        const shaderAttributes = program._attributeData;\n\n        for (const j in shaderAttributes)\n        {\n            if (!geometryAttributes[j])\n            {\n                throw new Error(`shader and geometry incompatible, geometry missing the \"${j}\" attribute`);\n            }\n        }\n    }\n\n    /**\n     * Takes a geometry and program and generates a unique signature for them.\n     * @param geometry - To get signature from.\n     * @param program - To test geometry against.\n     * @returns - Unique signature of the geometry and program\n     */\n    protected getSignature(geometry: Geometry, program: GlProgram): string\n    {\n        const attribs = geometry.attributes;\n        const shaderAttributes = program._attributeData;\n\n        const strings = ['g', geometry.uid];\n\n        for (const i in attribs)\n        {\n            if (shaderAttributes[i])\n            {\n                strings.push(i, shaderAttributes[i].location);\n            }\n        }\n\n        return strings.join('-');\n    }\n\n    protected getVao(geometry: Geometry, program: GlProgram): WebGLVertexArrayObject\n    {\n        return geometry._gpuData[this._renderer.uid]?.vaoCache[program._key] || this.initGeometryVao(geometry, program);\n    }\n\n    /**\n     * Creates or gets Vao with the same structure as the geometry and stores it on the geometry.\n     * If vao is created, it is bound automatically. We use a shader to infer what and how to set up the\n     * attribute locations.\n     * @param geometry - Instance of geometry to to generate Vao for.\n     * @param program\n     * @param _incRefCount - Increment refCount of all geometry buffers.\n     */\n    protected initGeometryVao(geometry: Geometry, program: GlProgram, _incRefCount = true): WebGLVertexArrayObject\n    {\n        const gl = this._renderer.gl;\n        // const CONTEXT_UID = this.CONTEXT_UID;\n        const bufferSystem = this._renderer.buffer;\n\n        this._renderer.shader._getProgramData(program);\n\n        this.checkCompatibility(geometry, program);\n\n        const signature = this.getSignature(geometry, program);\n\n        const gpuData = new GlGeometryGpuData();\n\n        geometry._gpuData[this._renderer.uid] = gpuData;\n        this._managedGeometries.add(geometry);\n\n        const vaoObjectHash = gpuData.vaoCache;\n        let vao = vaoObjectHash[signature];\n\n        if (vao)\n        {\n            // this will give us easy access to the vao\n            vaoObjectHash[program._key] = vao;\n\n            return vao;\n        }\n\n        ensureAttributes(geometry, program._attributeData);\n\n        const buffers = geometry.buffers;\n\n        // @TODO: We don't know if VAO is supported.\n        vao = gl.createVertexArray();\n\n        gl.bindVertexArray(vao);\n\n        // first update - and create the buffers!\n        // only create a gl buffer if it actually gets\n        for (let i = 0; i < buffers.length; i++)\n        {\n            const buffer = buffers[i];\n\n            bufferSystem.bind(buffer);\n        }\n\n        // TODO - maybe make this a data object?\n        // lets wait to see if we need to first!\n\n        this.activateVao(geometry, program);\n\n        // add it to the cache!\n        vaoObjectHash[program._key] = vao;\n        vaoObjectHash[signature] = vao;\n\n        gl.bindVertexArray(null);\n\n        return vao;\n    }\n\n    protected onGeometryUnload(geometry: Geometry, contextLost = false): void\n    {\n        const gpuData = geometry._gpuData[this._renderer.uid];\n\n        if (!gpuData) return;\n\n        const vaoCache = gpuData.vaoCache;\n\n        if (!contextLost)\n        {\n            for (const i in vaoCache)\n            {\n                if (this._activeVao !== vaoCache[i])\n                {\n                    this.resetState();\n                }\n                this.gl.deleteVertexArray(vaoCache[i]);\n            }\n        }\n    }\n\n    /**\n     * Dispose all WebGL resources of all managed geometries.\n     * @param [contextLost=false] - If context was lost, we suppress `gl.delete` calls\n     */\n    public destroyAll(contextLost = false): void\n    {\n        this._managedGeometries.removeAll(contextLost);\n    }\n\n    /**\n     * Activate vertex array object.\n     * @param geometry - Geometry instance.\n     * @param program - Shader program instance.\n     */\n    protected activateVao(geometry: Geometry, program: GlProgram): void\n    {\n        const gl = this._renderer.gl;\n\n        const bufferSystem = this._renderer.buffer;\n        const attributes = geometry.attributes;\n\n        if (geometry.indexBuffer)\n        {\n            // first update the index buffer if we have one..\n            bufferSystem.bind(geometry.indexBuffer);\n        }\n\n        let lastBuffer = null;\n\n        // add a new one!\n        for (const j in attributes)\n        {\n            const attribute = attributes[j];\n            const buffer = attribute.buffer;\n            const glBuffer = bufferSystem.getGlBuffer(buffer);\n            const programAttrib = program._attributeData[j];\n\n            if (programAttrib)\n            {\n                if (lastBuffer !== glBuffer)\n                {\n                    bufferSystem.bind(buffer);\n\n                    lastBuffer = glBuffer;\n                }\n\n                const location = programAttrib.location;\n\n                // TODO introduce state again\n                // we can optimise this for older devices that have no VAOs\n                gl.enableVertexAttribArray(location);\n\n                const attributeInfo = getAttributeInfoFromFormat(attribute.format);\n\n                const type = getGlTypeFromFormat(attribute.format);\n\n                if (programAttrib.format?.substring(1, 4) === 'int')\n                {\n                    gl.vertexAttribIPointer(location,\n                        attributeInfo.size,\n                        type,\n                        attribute.stride,\n                        attribute.offset);\n                }\n                else\n                {\n                    gl.vertexAttribPointer(location,\n                        attributeInfo.size,\n                        type,\n                        attributeInfo.normalised,\n                        attribute.stride,\n                        attribute.offset);\n                }\n\n                if (attribute.instance)\n                {\n                    // TODO calculate instance count based of this...\n                    if (this.hasInstance)\n                    {\n                        // Can't use truthiness check to determine if divisor is set,\n                        // since 0 is a valid value for divisor\n                        const divisor = attribute.divisor ?? 1;\n\n                        gl.vertexAttribDivisor(location, divisor);\n                    }\n                    else\n                    {\n                        throw new Error('geometry error, GPU Instancing is not supported on this device');\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Draws the currently bound geometry.\n     * @param topology - The type primitive to render.\n     * @param size - The number of elements to be rendered. If not specified, all vertices after the\n     *  starting vertex will be drawn.\n     * @param start - The starting vertex in the geometry to start drawing from. If not specified,\n     *  drawing will start from the first vertex.\n     * @param instanceCount - The number of instances of the set of elements to execute. If not specified,\n     *  all instances will be drawn.\n     * @returns This instance of the geometry system.\n     */\n    public draw(topology?: Topology, size?: number, start?: number, instanceCount?: number): this\n    {\n        const { gl } = this._renderer;\n        const geometry = this._activeGeometry;\n\n        const glTopology = topologyToGlMap[topology || geometry.topology];\n\n        instanceCount ??= geometry.instanceCount;\n\n        if (geometry.indexBuffer)\n        {\n            const byteSize = geometry.indexBuffer.data.BYTES_PER_ELEMENT;\n            const glType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;\n\n            if (instanceCount !== 1)\n            {\n                /* eslint-disable max-len */\n                gl.drawElementsInstanced(glTopology, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize, instanceCount);\n                /* eslint-enable max-len */\n            }\n            else\n            {\n                gl.drawElements(glTopology, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize);\n            }\n        }\n        else if (instanceCount !== 1)\n        {\n            // TODO need a better way to calculate size..\n            gl.drawArraysInstanced(glTopology, start || 0, size || geometry.getSize(), instanceCount);\n        }\n        else\n        {\n            gl.drawArrays(glTopology, start || 0, size || geometry.getSize());\n        }\n\n        return this;\n    }\n\n    /** Unbind/reset everything. */\n    protected unbind(): void\n    {\n        this.gl.bindVertexArray(null);\n        this._activeVao = null;\n        this._activeGeometry = null;\n    }\n\n    public destroy(): void\n    {\n        this._managedGeometries.destroy();\n        this._renderer = null;\n        this.gl = null;\n        this._activeVao = null;\n        this._activeGeometry = null;\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { warn } from '../../../utils/logging/warn';\nimport { Geometry } from '../shared/geometry/Geometry';\nimport { Shader } from '../shared/shader/Shader';\nimport { State } from '../shared/state/State';\nimport { TextureSource } from '../shared/texture/sources/TextureSource';\nimport { Texture } from '../shared/texture/Texture';\nimport { GlProgram } from './shader/GlProgram';\n\nimport type { RenderOptions } from '../shared/system/AbstractRenderer';\nimport type { System } from '../shared/system/System';\nimport type { WebGLRenderer } from './WebGLRenderer';\n\nconst bigTriangleGeometry = new Geometry({\n    attributes: {\n        aPosition: [\n            -1.0, -1.0, // Bottom left corner\n            3.0, -1.0, // Bottom right corner, extending beyond right edge\n            -1.0, 3.0 // Top left corner, extending beyond top edge\n        ],\n    },\n});\n\n/**\n * The options for the back buffer system.\n * @category rendering\n * @property {boolean} [useBackBuffer=false] - if true will use the back buffer where required\n * @property {boolean} [antialias=false] - if true will ensure the texture is antialiased\n * @advanced\n */\nexport interface GlBackBufferOptions\n{\n    /**\n     * if true will use the back buffer where required\n     * @default false\n     */\n    useBackBuffer?: boolean;\n    /** if true will ensure the texture is antialiased */\n    antialias?: boolean;\n}\n\n/**\n * For blend modes you need to know what pixels you are actually drawing to. For this to be possible in WebGL\n * we need to render to a texture and then present that texture to the screen. This system manages that process.\n *\n * As the main scene is rendered to a texture, it means we can sample it and copy its pixels,\n * something not possible on the main canvas.\n *\n * If antialiasing is set to to true and useBackBuffer is set to true, then the back buffer will be antialiased.\n * and the main gl context will not.\n *\n * You only need to activate this back buffer if you are using a blend mode that requires it.\n *\n * to activate is simple, you pass `useBackBuffer:true` to your render options\n * @category rendering\n * @advanced\n */\nexport class GlBackBufferSystem implements System<GlBackBufferOptions>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'backBuffer',\n        priority: 1\n    } as const;\n\n    /** default options for the back buffer system */\n    public static defaultOptions: GlBackBufferOptions = {\n        /** if true will use the back buffer where required */\n        useBackBuffer: false,\n    };\n\n    /** if true, the back buffer is used */\n    public useBackBuffer = false;\n\n    private _backBufferTexture: Texture;\n    private readonly _renderer: WebGLRenderer;\n    private _targetTexture: TextureSource;\n    private _useBackBufferThisRender = false;\n    private _antialias: boolean;\n    private _state: State;\n    private _bigTriangleShader: Shader;\n\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n    }\n\n    public init(options: GlBackBufferOptions = {})\n    {\n        const { useBackBuffer, antialias } = { ...GlBackBufferSystem.defaultOptions, ...options };\n\n        this.useBackBuffer = useBackBuffer;\n\n        this._antialias = antialias;\n\n        if (!this._renderer.context.supports.msaa)\n        {\n            warn('antialiasing, is not supported on when using the back buffer');\n\n            this._antialias = false;\n        }\n\n        this._state = State.for2d();\n\n        const bigTriangleProgram = new GlProgram({\n            vertex: `\n                attribute vec2 aPosition;\n                out vec2 vUv;\n\n                void main() {\n                    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n                    vUv = (aPosition + 1.0) / 2.0;\n\n                    // flip dem UVs\n                    vUv.y = 1.0 - vUv.y;\n                }`,\n            fragment: `\n                in vec2 vUv;\n                out vec4 finalColor;\n\n                uniform sampler2D uTexture;\n\n                void main() {\n                    finalColor = texture(uTexture, vUv);\n                }`,\n            name: 'big-triangle',\n        });\n\n        this._bigTriangleShader = new Shader({\n            glProgram: bigTriangleProgram,\n            resources: {\n                uTexture: Texture.WHITE.source,\n            },\n        });\n    }\n\n    /**\n     * This is called before the RenderTargetSystem is started. This is where\n     * we replace the target with the back buffer if required.\n     * @param options - The options for this render.\n     */\n    protected renderStart(options: RenderOptions)\n    {\n        const renderTarget = this._renderer.renderTarget.getRenderTarget(options.target);\n\n        this._useBackBufferThisRender = this.useBackBuffer && !!renderTarget.isRoot;\n\n        if (this._useBackBufferThisRender)\n        {\n            const renderTarget = this._renderer.renderTarget.getRenderTarget(options.target);\n\n            this._targetTexture = renderTarget.colorTexture;\n\n            options.target = this._getBackBufferTexture(renderTarget.colorTexture);\n        }\n    }\n\n    protected renderEnd()\n    {\n        this._presentBackBuffer();\n    }\n\n    private _presentBackBuffer()\n    {\n        const renderer = this._renderer;\n\n        renderer.renderTarget.finishRenderPass();\n\n        if (!this._useBackBufferThisRender) return;\n\n        renderer.renderTarget.bind(this._targetTexture, false);\n\n        this._bigTriangleShader.resources.uTexture = this._backBufferTexture.source;\n\n        renderer.encoder.draw({\n            geometry: bigTriangleGeometry,\n            shader: this._bigTriangleShader,\n            state: this._state,\n        });\n    }\n\n    private _getBackBufferTexture(targetSourceTexture: TextureSource)\n    {\n        this._backBufferTexture = this._backBufferTexture || new Texture({\n            source: new TextureSource({\n                width: targetSourceTexture.width,\n                height: targetSourceTexture.height,\n                resolution: targetSourceTexture._resolution,\n                antialias: this._antialias,\n            }),\n        });\n\n        // this will not resize if its the same size already! No extra check required\n        this._backBufferTexture.source.resize(\n            targetSourceTexture.width,\n            targetSourceTexture.height,\n            targetSourceTexture._resolution,\n        );\n\n        return this._backBufferTexture;\n    }\n\n    /** destroys the back buffer */\n    public destroy()\n    {\n        if (this._backBufferTexture)\n        {\n            this._backBufferTexture.destroy();\n            this._backBufferTexture = null;\n        }\n    }\n}\n","/**\n * Represents a render target.\n * @category rendering\n * @ignore\n */\nexport class GlRenderTarget\n{\n    public width = -1;\n    public height = -1;\n    public msaa = false;\n    public framebuffer: WebGLFramebuffer;\n    public resolveTargetFramebuffer: WebGLFramebuffer;\n    public msaaRenderBuffer: WebGLRenderbuffer[] = [];\n    public depthStencilRenderBuffer: WebGLRenderbuffer;\n}\n","import type { UboElement, UboLayout, UniformData } from '../../../shared/shader/types';\n\n/** @internal */\nexport const WGSL_TO_STD40_SIZE: Record<string, number> = {\n    f32: 4,\n    i32: 4,\n    'vec2<f32>': 8,\n    'vec3<f32>': 12,\n    'vec4<f32>': 16,\n\n    'vec2<i32>': 8,\n    'vec3<i32>': 12,\n    'vec4<i32>': 16,\n\n    'mat2x2<f32>': 16 * 2,\n    'mat3x3<f32>': 16 * 3,\n    'mat4x4<f32>': 16 * 4,\n\n    // TODO - not essential for now but support these in the future\n    // int:      4,\n    // ivec2:    8,\n    // ivec3:    12,\n    // ivec4:    16,\n\n    // uint:     4,\n    // uvec2:    8,\n    // uvec3:    12,\n    // uvec4:    16,\n\n    // bool:     4,\n    // bvec2:    8,\n    // bvec3:    12,\n    // bvec4:    16,\n\n    // mat2:     16 * 2,\n    // mat3:     16 * 3,\n    // mat4:     16 * 4,\n};\n\n/**\n * @param uniformData\n * @internal\n */\nexport function createUboElementsSTD40(uniformData: UniformData[]): UboLayout\n{\n    const uboElements: UboElement[] = uniformData.map((data: UniformData) =>\n        ({\n            data,\n            offset: 0,\n            size: 0,\n        }));\n\n    const chunkSize = 16;\n\n    let size = 0;\n    let offset = 0;\n\n    for (let i = 0; i < uboElements.length; i++)\n    {\n        const uboElement = uboElements[i];\n\n        size = WGSL_TO_STD40_SIZE[uboElement.data.type];\n\n        if (!size)\n        {\n            throw new Error(`Unknown type ${uboElement.data.type}`);\n        }\n\n        if (uboElement.data.size > 1)\n        {\n            size = Math.max(size, chunkSize) * uboElement.data.size;\n        }\n\n        const boundary = size === 12 ? 16 : size;\n\n        uboElement.size = size;\n\n        const curOffset = offset % chunkSize;\n\n        if (curOffset > 0 && chunkSize - curOffset < boundary)\n        {\n            offset += (chunkSize - curOffset) % 16;\n        }\n        else\n        {\n            offset += (size - (curOffset % size)) % size;\n        }\n\n        uboElement.offset = offset;\n        offset += size;\n    }\n\n    offset = Math.ceil(offset / 16) * 16;\n\n    return { uboElements, size: offset };\n}\n\n","import { WGSL_TO_STD40_SIZE } from './createUboElementsSTD40';\n\nimport type { UboElement } from '../../../shared/shader/types';\n\n/**\n * This generates a function that will sync an array to the uniform buffer\n * following the std140 layout\n * @param uboElement - the element to generate the array sync for\n * @param offsetToAdd - the offset to append at the start of the code\n * @returns - the generated code\n * @internal\n */\nexport function generateArraySyncSTD40(uboElement: UboElement, offsetToAdd: number): string\n{\n    const rowSize = Math.max(WGSL_TO_STD40_SIZE[uboElement.data.type] / 16, 1);\n    const elementSize = (uboElement.data.value as Array<number>).length / uboElement.data.size;// size / rowSize;\n\n    const remainder = (4 - (elementSize % 4)) % 4;\n    const data = uboElement.data.type.indexOf('i32') >= 0 ? 'dataInt32' : 'data';\n\n    return `\n        v = uv.${uboElement.data.name};\n        offset += ${offsetToAdd};\n\n        arrayOffset = offset;\n\n        t = 0;\n\n        for(var i=0; i < ${uboElement.data.size * rowSize}; i++)\n        {\n            for(var j = 0; j < ${elementSize}; j++)\n            {\n                ${data}[arrayOffset++] = v[t++];\n            }\n            ${remainder !== 0 ? `arrayOffset += ${remainder};` : ''}\n        }\n    `;\n}\n","import { createUboSyncFunction } from '../../../shared/shader/utils/createUboSyncFunction';\nimport { uboSyncFunctionsSTD40 } from '../../../shared/shader/utils/uboSyncFunctions';\nimport { generateArraySyncSTD40 } from './generateArraySyncSTD40';\n\nimport type { UboElement, UniformsSyncCallback } from '../../../shared/shader/types';\n\n/**\n * @param uboElements\n * @internal\n */\nexport function createUboSyncFunctionSTD40(\n    uboElements: UboElement[],\n): UniformsSyncCallback\n{\n    return createUboSyncFunction(\n        uboElements,\n        'uboStd40',\n        generateArraySyncSTD40,\n        uboSyncFunctionsSTD40,\n    );\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { GpuStencilModesToPixi } from '../gpu/state/GpuStencilModesToPixi';\nimport { STENCIL_MODES } from '../shared/state/const';\n\nimport type { RenderTarget } from '../shared/renderTarget/RenderTarget';\nimport type { System } from '../shared/system/System';\nimport type { WebGLRenderer } from './WebGLRenderer';\n\n/**\n * This manages the stencil buffer. Used primarily for masking\n * @category rendering\n * @advanced\n */\nexport class GlStencilSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'stencil',\n    } as const;\n\n    private _gl: WebGLRenderingContext;\n\n    private readonly _stencilCache = {\n        enabled: false,\n        stencilReference: 0,\n        stencilMode: STENCIL_MODES.NONE,\n    };\n\n    private _renderTargetStencilState: Record<number, {\n        stencilMode: STENCIL_MODES;\n        stencilReference: number;\n    }> = Object.create(null);\n\n    private _stencilOpsMapping: {\n        keep: number;\n        zero: number;\n        replace: number;\n        invert: number;\n        'increment-clamp': number;\n        'decrement-clamp': number;\n        'increment-wrap': number;\n        'decrement-wrap': number;\n    };\n\n    private _comparisonFuncMapping: {\n        always: number;\n        never: number;\n        equal: number;\n        'not-equal': number;\n        less: number;\n        'less-equal': number;\n        greater: number;\n        'greater-equal': number;\n    };\n\n    private _activeRenderTarget: RenderTarget;\n\n    constructor(renderer: WebGLRenderer)\n    {\n        renderer.renderTarget.onRenderTargetChange.add(this);\n    }\n\n    protected contextChange(gl: WebGLRenderingContext)\n    {\n        // TODO - this could be declared in a gl const\n        // we know the numbers don't tend to change!\n        this._gl = gl;\n\n        this._comparisonFuncMapping = {\n            always: gl.ALWAYS,\n            never: gl.NEVER,\n            equal: gl.EQUAL,\n            'not-equal': gl.NOTEQUAL,\n            less: gl.LESS,\n            'less-equal': gl.LEQUAL,\n            greater: gl.GREATER,\n            'greater-equal': gl.GEQUAL,\n        };\n\n        this._stencilOpsMapping = {\n            keep: gl.KEEP,\n            zero: gl.ZERO,\n            replace: gl.REPLACE,\n            invert: gl.INVERT,\n            'increment-clamp': gl.INCR,\n            'decrement-clamp': gl.DECR,\n            'increment-wrap': gl.INCR_WRAP,\n            'decrement-wrap': gl.DECR_WRAP,\n        };\n\n        this.resetState();\n    }\n\n    protected onRenderTargetChange(renderTarget: RenderTarget)\n    {\n        if (this._activeRenderTarget === renderTarget) return;\n\n        this._activeRenderTarget = renderTarget;\n\n        let stencilState = this._renderTargetStencilState[renderTarget.uid];\n\n        if (!stencilState)\n        {\n            stencilState = this._renderTargetStencilState[renderTarget.uid] = {\n                stencilMode: STENCIL_MODES.DISABLED,\n                stencilReference: 0,\n            };\n        }\n\n        // restore the current render targets stencil state..\n        this.setStencilMode(stencilState.stencilMode, stencilState.stencilReference);\n    }\n\n    public resetState()\n    {\n        // reset stencil cache\n        this._stencilCache.enabled = false;\n        this._stencilCache.stencilMode = STENCIL_MODES.NONE;\n        this._stencilCache.stencilReference = 0;\n    }\n\n    public setStencilMode(stencilMode: STENCIL_MODES, stencilReference: number)\n    {\n        const stencilState = this._renderTargetStencilState[this._activeRenderTarget.uid];\n\n        const gl = this._gl;\n        const mode = GpuStencilModesToPixi[stencilMode];\n\n        const _stencilCache = this._stencilCache;\n\n        // store the stencil state for restoration later, if a render target changes\n        stencilState.stencilMode = stencilMode;\n        stencilState.stencilReference = stencilReference;\n\n        if (stencilMode === STENCIL_MODES.DISABLED)\n        {\n            if (this._stencilCache.enabled)\n            {\n                this._stencilCache.enabled = false;\n\n                gl.disable(gl.STENCIL_TEST);\n            }\n\n            return;\n        }\n\n        if (!this._stencilCache.enabled)\n        {\n            this._stencilCache.enabled = true;\n            gl.enable(gl.STENCIL_TEST);\n        }\n\n        if (stencilMode !== _stencilCache.stencilMode || _stencilCache.stencilReference !== stencilReference)\n        {\n            _stencilCache.stencilMode = stencilMode;\n            _stencilCache.stencilReference = stencilReference;\n\n            // this is pretty simple mapping.\n            // will work for pixi's simple mask cases.\n            // although a true mapping of the GPU state to webGL state should be done\n            gl.stencilFunc(this._comparisonFuncMapping[mode.stencilBack.compare], stencilReference, 0xFF);\n            gl.stencilOp(gl.KEEP, gl.KEEP, this._stencilOpsMapping[mode.stencilBack.passOp]);\n        }\n    }\n\n    public destroy?: () => void;\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { UboSystem } from '../shared/shader/UboSystem';\nimport { createUboElementsSTD40 } from './shader/utils/createUboElementsSTD40';\nimport { createUboSyncFunctionSTD40 } from './shader/utils/createUboSyncSTD40';\n\n/**\n * System plugin to the renderer to manage uniform buffers. But with an WGSL adaptor.\n * @category rendering\n * @advanced\n */\nexport class GlUboSystem extends UboSystem\n{\n    /** @ignore */\n    public static extension = {\n        type: [ExtensionType.WebGLSystem],\n        name: 'ubo',\n    } as const;\n\n    constructor()\n    {\n        super({\n            createUboElements: createUboElementsSTD40,\n            generateUboSync: createUboSyncFunctionSTD40,\n        });\n    }\n}\n","import type { Dict } from '../../../../../utils/types';\nimport type { VertexFormat } from '../../../shared/geometry/const';\n\nlet GL_TABLE: Dict<string> = null;\n\nconst GL_TO_GLSL_TYPES: Dict<string> = {\n    FLOAT:       'float',\n    FLOAT_VEC2:  'vec2',\n    FLOAT_VEC3:  'vec3',\n    FLOAT_VEC4:  'vec4',\n\n    INT:         'int',\n    INT_VEC2:    'ivec2',\n    INT_VEC3:    'ivec3',\n    INT_VEC4:    'ivec4',\n\n    UNSIGNED_INT:         'uint',\n    UNSIGNED_INT_VEC2:    'uvec2',\n    UNSIGNED_INT_VEC3:    'uvec3',\n    UNSIGNED_INT_VEC4:    'uvec4',\n\n    BOOL:        'bool',\n    BOOL_VEC2:   'bvec2',\n    BOOL_VEC3:   'bvec3',\n    BOOL_VEC4:   'bvec4',\n\n    FLOAT_MAT2:  'mat2',\n    FLOAT_MAT3:  'mat3',\n    FLOAT_MAT4:  'mat4',\n\n    SAMPLER_2D:              'sampler2D',\n    INT_SAMPLER_2D:          'sampler2D',\n    UNSIGNED_INT_SAMPLER_2D: 'sampler2D',\n    SAMPLER_CUBE:              'samplerCube',\n    INT_SAMPLER_CUBE:          'samplerCube',\n    UNSIGNED_INT_SAMPLER_CUBE: 'samplerCube',\n    SAMPLER_2D_ARRAY:              'sampler2DArray',\n    INT_SAMPLER_2D_ARRAY:          'sampler2DArray',\n    UNSIGNED_INT_SAMPLER_2D_ARRAY: 'sampler2DArray',\n};\n\nconst GLSL_TO_VERTEX_TYPES: Record<string, VertexFormat> = {\n\n    float: 'float32',\n    vec2: 'float32x2',\n    vec3: 'float32x3',\n    vec4: 'float32x4',\n\n    int: 'sint32',\n    ivec2: 'sint32x2',\n    ivec3: 'sint32x3',\n    ivec4: 'sint32x4',\n\n    uint: 'uint32',\n    uvec2: 'uint32x2',\n    uvec3: 'uint32x3',\n    uvec4: 'uint32x4',\n\n    bool: 'uint32',\n    bvec2: 'uint32x2',\n    bvec3: 'uint32x3',\n    bvec4: 'uint32x4',\n};\n\n/**\n * @param gl\n * @param type\n * @internal\n */\nexport function mapType(gl: any, type: number): string\n{\n    if (!GL_TABLE)\n    {\n        const typeNames = Object.keys(GL_TO_GLSL_TYPES);\n\n        GL_TABLE = {};\n\n        for (let i = 0; i < typeNames.length; ++i)\n        {\n            const tn = typeNames[i];\n\n            GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];\n        }\n    }\n\n    return GL_TABLE[type];\n}\n\n/**\n * @param gl\n * @param type\n * @internal\n */\nexport function mapGlToVertexFormat(gl: any, type: number): VertexFormat\n{\n    const typeValue = mapType(gl, type);\n\n    return GLSL_TO_VERTEX_TYPES[typeValue] || 'float32';\n}\n","/** @internal */\nexport const scaleModeToGlFilter = {\n    linear: 9729,\n    nearest: 9728,\n};\n\n/** @internal */\nexport const mipmapScaleModeToGlFilter = {\n    linear: {\n        linear: 9987,\n        nearest: 9985,\n    },\n    nearest: {\n        linear: 9986,\n        nearest: 9984,\n    }\n};\n\n/** @internal */\nexport const wrapModeToGlAddress = {\n    'clamp-to-edge': 33071,\n    repeat: 10497,\n    'mirror-repeat': 33648,\n};\n\n/** @internal */\nexport const compareModeToGlCompare = {\n    never: 512,\n    less: 513,\n    equal: 514,\n    'less-equal': 515,\n    greater: 516,\n    'not-equal': 517,\n    'greater-equal': 518,\n    always: 519,\n};\n\n","import type { GlUniformBlockData } from '../GlProgram';\n\n/**\n * returns the uniform block data from the program\n * @private\n * @param program - the webgl program\n * @param gl - the WebGL context\n * @returns {object} the uniform data for this program\n */\nexport function getUboData(program: WebGLProgram, gl: WebGL2RenderingContext): Record<string, GlUniformBlockData>\n{\n    // if uniform buffer data is not supported, early out\n    if (!gl.ACTIVE_UNIFORM_BLOCKS) return {};\n\n    const uniformBlocks: Record<string, GlUniformBlockData> = {};\n\n    // const totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    const totalUniformsBlocks = gl.getProgramParameter(program, gl.ACTIVE_UNIFORM_BLOCKS);\n\n    for (let i = 0; i < totalUniformsBlocks; i++)\n    {\n        const name = gl.getActiveUniformBlockName(program, i);\n        const uniformBlockIndex = gl.getUniformBlockIndex(program, name);\n\n        const size = gl.getActiveUniformBlockParameter(program, i, gl.UNIFORM_BLOCK_DATA_SIZE);\n\n        uniformBlocks[name] = {\n            name,\n            index: uniformBlockIndex,\n            size,\n        };\n    }\n\n    return uniformBlocks;\n}\n","function booleanArray(size: number): Array<boolean>\n{\n    const array = new Array(size);\n\n    for (let i = 0; i < array.length; i++)\n    {\n        array[i] = false;\n    }\n\n    return array;\n}\n\n/**\n * @param {string} type - Type of value\n * @param {number} size\n * @private\n */\nexport function defaultValue(\n    type: string,\n    size: number\n): number | Float32Array | Int32Array | Uint32Array | boolean | boolean[]\n{\n    switch (type)\n    {\n        case 'float':\n            return 0;\n\n        case 'vec2':\n            return new Float32Array(2 * size);\n\n        case 'vec3':\n            return new Float32Array(3 * size);\n\n        case 'vec4':\n            return new Float32Array(4 * size);\n\n        case 'int':\n        case 'uint':\n        case 'sampler2D':\n        case 'sampler2DArray':\n            return 0;\n\n        case 'ivec2':\n            return new Int32Array(2 * size);\n\n        case 'ivec3':\n            return new Int32Array(3 * size);\n\n        case 'ivec4':\n            return new Int32Array(4 * size);\n\n        case 'uvec2':\n            return new Uint32Array(2 * size);\n\n        case 'uvec3':\n            return new Uint32Array(3 * size);\n\n        case 'uvec4':\n            return new Uint32Array(4 * size);\n\n        case 'bool':\n            return false;\n\n        case 'bvec2':\n\n            return booleanArray(2 * size);\n\n        case 'bvec3':\n            return booleanArray(3 * size);\n\n        case 'bvec4':\n            return booleanArray(4 * size);\n\n        case 'mat2':\n            return new Float32Array([1, 0,\n                0, 1]);\n\n        case 'mat3':\n            return new Float32Array([1, 0, 0,\n                0, 1, 0,\n                0, 0, 1]);\n\n        case 'mat4':\n            return new Float32Array([1, 0, 0, 0,\n                0, 1, 0, 0,\n                0, 0, 1, 0,\n                0, 0, 0, 1]);\n    }\n\n    return null;\n}\n","/**\n * @private\n * @param {WebGLRenderingContext} gl - The current WebGL context {WebGLProgram}\n * @param {number} type - the type, can be either VERTEX_SHADER or FRAGMENT_SHADER\n * @param {string} src - The vertex shader source as an array of strings.\n * @returns {WebGLShader} the shader\n */\nexport function compileShader(gl: WebGLRenderingContextBase, type: number, src: string): WebGLShader\n{\n    const shader = gl.createShader(type);\n\n    gl.shaderSource(shader, src);\n    gl.compileShader(shader);\n\n    return shader;\n}\n","import type { GlRenderingContext } from '../../context/GlRenderingContext';\n\n/**\n * Returns a lookup table that maps each type-format pair to a compatible internal format.\n * @function mapTypeAndFormatToInternalFormat\n * @private\n * @param {WebGLRenderingContext} gl - The rendering context.\n * @returns Lookup table.\n */\nexport function mapFormatToGlType(gl: GlRenderingContext): Record<string, number>\n{\n    return {\n        // 8-bit formats\n        r8unorm: gl.UNSIGNED_BYTE,\n        r8snorm: gl.BYTE,\n        r8uint: gl.UNSIGNED_BYTE,\n        r8sint: gl.BYTE,\n\n        // 16-bit formats\n        r16uint: gl.UNSIGNED_SHORT,\n        r16sint: gl.SHORT,\n        r16float: gl.HALF_FLOAT,\n        rg8unorm: gl.UNSIGNED_BYTE,\n        rg8snorm: gl.BYTE,\n        rg8uint: gl.UNSIGNED_BYTE,\n        rg8sint: gl.BYTE,\n\n        // 32-bit formats\n        r32uint: gl.UNSIGNED_INT,\n        r32sint: gl.INT,\n        r32float: gl.FLOAT,\n        rg16uint: gl.UNSIGNED_SHORT,\n        rg16sint: gl.SHORT,\n        rg16float: gl.HALF_FLOAT,\n        rgba8unorm: gl.UNSIGNED_BYTE,\n        'rgba8unorm-srgb': gl.UNSIGNED_BYTE,\n\n        // Packed 32-bit formats\n        rgba8snorm: gl.BYTE,\n        rgba8uint: gl.UNSIGNED_BYTE,\n        rgba8sint: gl.BYTE,\n        bgra8unorm: gl.UNSIGNED_BYTE,\n        'bgra8unorm-srgb': gl.UNSIGNED_BYTE,\n        rgb9e5ufloat: gl.UNSIGNED_INT_5_9_9_9_REV,\n        rgb10a2unorm: gl.UNSIGNED_INT_2_10_10_10_REV,\n        rg11b10ufloat: gl.UNSIGNED_INT_10F_11F_11F_REV,\n\n        // 64-bit formats\n        rg32uint: gl.UNSIGNED_INT,\n        rg32sint: gl.INT,\n        rg32float: gl.FLOAT,\n        rgba16uint: gl.UNSIGNED_SHORT,\n        rgba16sint: gl.SHORT,\n        rgba16float: gl.HALF_FLOAT,\n\n        // 128-bit formats\n        rgba32uint: gl.UNSIGNED_INT,\n        rgba32sint: gl.INT,\n        rgba32float: gl.FLOAT,\n\n        // Depth/stencil formats\n        stencil8: gl.UNSIGNED_BYTE,\n        depth16unorm: gl.UNSIGNED_SHORT,\n        depth24plus: gl.UNSIGNED_INT,\n        'depth24plus-stencil8': gl.UNSIGNED_INT_24_8,\n        depth32float: gl.FLOAT,\n        'depth32float-stencil8': gl.FLOAT_32_UNSIGNED_INT_24_8_REV,\n\n    };\n}\n","/**\n * will log a shader error highlighting the lines with the error\n * also will add numbers along the side.\n * @param gl - the WebGLContext\n * @param shader - the shader to log errors for\n */\nfunction logPrettyShaderError(gl: WebGLRenderingContext, shader: WebGLShader): void\n{\n    const shaderSrc = gl.getShaderSource(shader)\n        .split('\\n')\n        .map((line, index) => `${index}: ${line}`);\n\n    const shaderLog = gl.getShaderInfoLog(shader);\n    const splitShader = shaderLog.split('\\n');\n\n    const dedupe: Record<number, boolean> = {};\n\n    const lineNumbers = splitShader.map((line) => parseFloat(line.replace(/^ERROR\\: 0\\:([\\d]+)\\:.*$/, '$1')))\n        .filter((n) =>\n        {\n            if (n && !dedupe[n])\n            {\n                dedupe[n] = true;\n\n                return true;\n            }\n\n            return false;\n        });\n\n    const logArgs = [''];\n\n    lineNumbers.forEach((number) =>\n    {\n        shaderSrc[number - 1] = `%c${shaderSrc[number - 1]}%c`;\n        logArgs.push('background: #FF0000; color:#FFFFFF; font-size: 10px', 'font-size: 10px');\n    });\n\n    const fragmentSourceToLog = shaderSrc\n        .join('\\n');\n\n    logArgs[0] = fragmentSourceToLog;\n\n    console.error(shaderLog);\n\n    // eslint-disable-next-line no-console\n    console.groupCollapsed('click to view full shader code');\n    console.warn(...logArgs);\n    // eslint-disable-next-line no-console\n    console.groupEnd();\n}\n\n/**\n *\n * logs out any program errors\n * @param gl - The current WebGL context\n * @param program - the WebGL program to display errors for\n * @param vertexShader  - the fragment WebGL shader program\n * @param fragmentShader - the vertex WebGL shader program\n * @private\n */\nexport function logProgramError(\n    gl: WebGLRenderingContext,\n    program: WebGLProgram,\n    vertexShader: WebGLShader,\n    fragmentShader: WebGLShader\n): void\n{\n    // if linking fails, then log and cleanup\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS))\n    {\n        if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS))\n        {\n            logPrettyShaderError(gl, vertexShader);\n        }\n\n        if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS))\n        {\n            logPrettyShaderError(gl, fragmentShader);\n        }\n\n        console.error('PixiJS Error: Could not initialize shader.');\n\n        // if there is a program info log, log it\n        if (gl.getProgramInfoLog(program) !== '')\n        {\n            console.warn('PixiJS Warning: gl.getProgramInfoLog()', gl.getProgramInfoLog(program));\n        }\n    }\n}\n","import type { CanvasSource } from '../../../shared/texture/sources/CanvasSource';\nimport type { ImageSource } from '../../../shared/texture/sources/ImageSource';\nimport type { GlRenderingContext } from '../../context/GlRenderingContext';\nimport type { GlTexture } from '../GlTexture';\nimport type { GLTextureUploader } from './GLTextureUploader';\n\n/** @internal */\nexport const glUploadImageResource = {\n\n    id: 'image',\n\n    upload(source: ImageSource | CanvasSource, glTexture: GlTexture, gl: GlRenderingContext, webGLVersion: number)\n    {\n        const glWidth = glTexture.width;\n        const glHeight = glTexture.height;\n\n        const textureWidth = source.pixelWidth;\n        const textureHeight = source.pixelHeight;\n\n        const resourceWidth = source.resourceWidth;\n        const resourceHeight = source.resourceHeight;\n\n        if (resourceWidth < textureWidth || resourceHeight < textureHeight)\n        {\n            if (glWidth !== textureWidth || glHeight !== textureHeight)\n            {\n                gl.texImage2D(\n                    glTexture.target,\n                    0,\n                    glTexture.internalFormat,\n                    textureWidth,\n                    textureHeight,\n                    0,\n                    glTexture.format,\n                    glTexture.type,\n                    null\n                );\n            }\n\n            if (webGLVersion === 2)\n            {\n                gl.texSubImage2D(\n                    gl.TEXTURE_2D,\n                    0,\n                    0,\n                    0,\n                    resourceWidth,\n                    resourceHeight,\n                    glTexture.format,\n                    glTexture.type,\n                    source.resource as TexImageSource\n                );\n            }\n            else\n            {\n                gl.texSubImage2D(\n                    gl.TEXTURE_2D,\n                    0,\n                    0,\n                    0,\n                    glTexture.format,\n                    glTexture.type,\n                    source.resource as TexImageSource\n                );\n            }\n        }\n        else if (glWidth === textureWidth && glHeight === textureHeight)\n        {\n            gl.texSubImage2D(\n                gl.TEXTURE_2D,\n                0,\n                0,\n                0,\n                glTexture.format,\n                glTexture.type,\n                source.resource as TexImageSource\n            );\n        }\n        else if (webGLVersion === 2)\n        {\n            gl.texImage2D(\n                glTexture.target,\n                0,\n                glTexture.internalFormat,\n                textureWidth,\n                textureHeight,\n                0,\n                glTexture.format,\n                glTexture.type,\n                source.resource as TexImageSource\n            );\n        }\n        else\n        {\n            gl.texImage2D(\n                glTexture.target,\n                0,\n                glTexture.internalFormat,\n                glTexture.format,\n                glTexture.type,\n                source.resource as TexImageSource\n            );\n        }\n\n        glTexture.width = textureWidth;\n        glTexture.height = textureHeight;\n    }\n} as GLTextureUploader;\n\n","import type { TextureSource } from '../../../shared/texture/sources/TextureSource';\nimport type { GlRenderingContext } from '../../context/GlRenderingContext';\nimport type { GlTexture } from '../GlTexture';\nimport type { GLTextureUploader } from './GLTextureUploader';\n\n/** @internal */\nexport const glUploadBufferImageResource = {\n\n    id: 'buffer',\n\n    upload(source: TextureSource, glTexture: GlTexture, gl: GlRenderingContext)\n    {\n        if (glTexture.width === source.width || glTexture.height === source.height)\n        {\n            gl.texSubImage2D(\n                gl.TEXTURE_2D,\n                0,\n                0,\n                0,\n                source.width,\n                source.height,\n                glTexture.format,\n                glTexture.type,\n                source.resource\n            );\n        }\n        else\n        {\n            gl.texImage2D(\n                glTexture.target,\n                0,\n                glTexture.internalFormat,\n                source.width,\n                source.height,\n                0,\n                glTexture.format,\n                glTexture.type,\n                source.resource\n            );\n        }\n\n        glTexture.width = source.width;\n        glTexture.height = source.height;\n    }\n} as GLTextureUploader;\n\n","import type { CompressedSource } from '../../../shared/texture/sources/CompressedSource';\nimport type { GlRenderingContext } from '../../context/GlRenderingContext';\nimport type { GlTexture } from '../GlTexture';\nimport type { GLTextureUploader } from './GLTextureUploader';\n\nconst compressedFormatMap: Record<string, boolean> = {\n    'bc1-rgba-unorm': true,\n    'bc1-rgba-unorm-srgb': true,\n    'bc2-rgba-unorm': true,\n    'bc2-rgba-unorm-srgb': true,\n    'bc3-rgba-unorm': true,\n    'bc3-rgba-unorm-srgb': true,\n    'bc4-r-unorm': true,\n    'bc4-r-snorm': true,\n    'bc5-rg-unorm': true,\n    'bc5-rg-snorm': true,\n    'bc6h-rgb-ufloat': true,\n    'bc6h-rgb-float': true,\n    'bc7-rgba-unorm': true,\n    'bc7-rgba-unorm-srgb': true,\n\n    // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    'etc2-rgb8unorm': true,\n    'etc2-rgb8unorm-srgb': true,\n    'etc2-rgb8a1unorm': true,\n    'etc2-rgb8a1unorm-srgb': true,\n    'etc2-rgba8unorm': true,\n    'etc2-rgba8unorm-srgb': true,\n    'eac-r11unorm': true,\n    'eac-r11snorm': true,\n    'eac-rg11unorm': true,\n    'eac-rg11snorm': true,\n\n    // ASTC compressed formats usable if \"texture-compression-astc\" is both\n    // supported by the device/user agent and enabled in requestDevice.\n    'astc-4x4-unorm': true,\n    'astc-4x4-unorm-srgb': true,\n    'astc-5x4-unorm': true,\n    'astc-5x4-unorm-srgb': true,\n    'astc-5x5-unorm': true,\n    'astc-5x5-unorm-srgb': true,\n    'astc-6x5-unorm': true,\n    'astc-6x5-unorm-srgb': true,\n    'astc-6x6-unorm': true,\n    'astc-6x6-unorm-srgb': true,\n    'astc-8x5-unorm': true,\n    'astc-8x5-unorm-srgb': true,\n    'astc-8x6-unorm': true,\n    'astc-8x6-unorm-srgb': true,\n    'astc-8x8-unorm': true,\n    'astc-8x8-unorm-srgb': true,\n    'astc-10x5-unorm': true,\n    'astc-10x5-unorm-srgb': true,\n    'astc-10x6-unorm': true,\n    'astc-10x6-unorm-srgb': true,\n    'astc-10x8-unorm': true,\n    'astc-10x8-unorm-srgb': true,\n    'astc-10x10-unorm': true,\n    'astc-10x10-unorm-srgb': true,\n    'astc-12x10-unorm': true,\n    'astc-12x10-unorm-srgb': true,\n    'astc-12x12-unorm': true,\n    'astc-12x12-unorm-srgb': true,\n};\n\n/** @internal */\nexport const glUploadCompressedTextureResource = {\n\n    id: 'compressed',\n\n    upload(source: CompressedSource, glTexture: GlTexture, gl: GlRenderingContext)\n    {\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, 4);\n\n        let mipWidth = source.pixelWidth;\n        let mipHeight = source.pixelHeight;\n\n        const compressed = !!compressedFormatMap[source.format];\n\n        for (let i = 0; i < source.resource.length; i++)\n        {\n            const levelBuffer = source.resource[i];\n\n            if (compressed)\n            {\n                gl.compressedTexImage2D(\n                    gl.TEXTURE_2D, i, glTexture.internalFormat,\n                    mipWidth, mipHeight, 0,\n                    levelBuffer\n                );\n            }\n            else\n            {\n                gl.texImage2D(\n                    gl.TEXTURE_2D, i, glTexture.internalFormat,\n                    mipWidth, mipHeight, 0,\n                    glTexture.format, glTexture.type,\n                    levelBuffer);\n            }\n\n            mipWidth = Math.max(mipWidth >> 1, 1);\n            mipHeight = Math.max(mipHeight >> 1, 1);\n        }\n    }\n} as GLTextureUploader;\n\n","import { DOMAdapter } from '../../../../../environment/adapter';\n\nimport type { GlRenderingContext } from '../../context/GlRenderingContext';\nimport type { WebGLExtensions } from '../../context/WebGLExtensions';\n\n/**\n * Returns a lookup table that maps each type-format pair to a compatible internal format.\n * @function mapTypeAndFormatToInternalFormat\n * @private\n * @param gl - The rendering context.\n * @param extensions - The WebGL extensions.\n * @returns Lookup table.\n */\nexport function mapFormatToGlInternalFormat(\n    gl: GlRenderingContext,\n    extensions: WebGLExtensions,\n): Record<string, number>\n{\n    let srgb = {};\n    let bgra8unorm: number = gl.RGBA;\n\n    if (!(gl instanceof DOMAdapter.get().getWebGLRenderingContext()))\n    {\n        srgb = {\n            'rgba8unorm-srgb': gl.SRGB8_ALPHA8,\n            'bgra8unorm-srgb': gl.SRGB8_ALPHA8,\n        };\n\n        bgra8unorm = gl.RGBA8;\n    }\n    else if (extensions.srgb)\n    {\n        srgb = {\n            'rgba8unorm-srgb': extensions.srgb.SRGB8_ALPHA8_EXT,\n            'bgra8unorm-srgb': extensions.srgb.SRGB8_ALPHA8_EXT,\n        };\n    }\n\n    return {\n        // 8-bit formats\n        r8unorm: gl.R8,\n        r8snorm: gl.R8_SNORM,\n        r8uint: gl.R8UI,\n        r8sint: gl.R8I,\n\n        // 16-bit formats\n        r16uint: gl.R16UI,\n        r16sint: gl.R16I,\n        r16float: gl.R16F,\n        rg8unorm: gl.RG8,\n        rg8snorm: gl.RG8_SNORM,\n        rg8uint: gl.RG8UI,\n        rg8sint: gl.RG8I,\n\n        // 32-bit formats\n        r32uint: gl.R32UI,\n        r32sint: gl.R32I,\n        r32float: gl.R32F,\n        rg16uint: gl.RG16UI,\n        rg16sint: gl.RG16I,\n        rg16float: gl.RG16F,\n        rgba8unorm: gl.RGBA,\n\n        ...srgb,\n\n        // Packed 32-bit formats\n        rgba8snorm: gl.RGBA8_SNORM,\n        rgba8uint: gl.RGBA8UI,\n        rgba8sint: gl.RGBA8I,\n        bgra8unorm,\n        rgb9e5ufloat: gl.RGB9_E5,\n        rgb10a2unorm: gl.RGB10_A2,\n        rg11b10ufloat: gl.R11F_G11F_B10F,\n\n        // 64-bit formats\n        rg32uint: gl.RG32UI,\n        rg32sint: gl.RG32I,\n        rg32float: gl.RG32F,\n        rgba16uint: gl.RGBA16UI,\n        rgba16sint: gl.RGBA16I,\n        rgba16float: gl.RGBA16F,\n\n        // 128-bit formats\n        rgba32uint: gl.RGBA32UI,\n        rgba32sint: gl.RGBA32I,\n        rgba32float: gl.RGBA32F,\n\n        // Depth/stencil formats\n        stencil8: gl.STENCIL_INDEX8,\n        depth16unorm: gl.DEPTH_COMPONENT16,\n        depth24plus: gl.DEPTH_COMPONENT24,\n        'depth24plus-stencil8': gl.DEPTH24_STENCIL8,\n        depth32float: gl.DEPTH_COMPONENT32F,\n        'depth32float-stencil8': gl.DEPTH32F_STENCIL8,\n\n        // Compressed formats\n        ...extensions.s3tc ? {\n            'bc1-rgba-unorm': extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,\n            'bc2-rgba-unorm': extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n            'bc3-rgba-unorm': extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT,\n        } : {},\n        ...extensions.s3tc_sRGB ? {\n            'bc1-rgba-unorm-srgb': extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,\n            'bc2-rgba-unorm-srgb': extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,\n            'bc3-rgba-unorm-srgb': extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,\n        } : {},\n        ...extensions.rgtc ? {\n            'bc4-r-unorm': extensions.rgtc.COMPRESSED_RED_RGTC1_EXT,\n            'bc4-r-snorm': extensions.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,\n            'bc5-rg-unorm': extensions.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,\n            'bc5-rg-snorm': extensions.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT,\n        } : {},\n        ...extensions.bptc ? {\n            'bc6h-rgb-float': extensions.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,\n            'bc6h-rgb-ufloat': extensions.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,\n            'bc7-rgba-unorm': extensions.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,\n            'bc7-rgba-unorm-srgb': extensions.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT,\n        } : {},\n        ...extensions.etc ? {\n            'etc2-rgb8unorm': extensions.etc.COMPRESSED_RGB8_ETC2,\n            'etc2-rgb8unorm-srgb': extensions.etc.COMPRESSED_SRGB8_ETC2,\n            'etc2-rgb8a1unorm': extensions.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n            'etc2-rgb8a1unorm-srgb': extensions.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n            'etc2-rgba8unorm': extensions.etc.COMPRESSED_RGBA8_ETC2_EAC,\n            'etc2-rgba8unorm-srgb': extensions.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,\n            'eac-r11unorm': extensions.etc.COMPRESSED_R11_EAC,\n            // 'eac-r11snorm'\n            'eac-rg11unorm': extensions.etc.COMPRESSED_SIGNED_RG11_EAC,\n            // 'eac-rg11snorm'\n        } : {},\n        ...extensions.astc ? {\n            'astc-4x4-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,\n            'astc-4x4-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,\n            'astc-5x4-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,\n            'astc-5x4-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,\n            'astc-5x5-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,\n            'astc-5x5-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,\n            'astc-6x5-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,\n            'astc-6x5-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,\n            'astc-6x6-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,\n            'astc-6x6-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,\n            'astc-8x5-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,\n            'astc-8x5-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,\n            'astc-8x6-unorm':   extensions.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,\n            'astc-8x6-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,\n            'astc-8x8-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,\n            'astc-8x8-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,\n            'astc-10x5-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,\n            'astc-10x5-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,\n            'astc-10x6-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,\n            'astc-10x6-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,\n            'astc-10x8-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,\n            'astc-10x8-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,\n            'astc-10x10-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,\n            'astc-10x10-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,\n            'astc-12x10-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,\n            'astc-12x10-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,\n            'astc-12x12-unorm': extensions.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,\n            'astc-12x12-unorm-srgb': extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR,\n        } : {},\n    };\n}\n","/** @private */\nexport class IGLUniformData\n{\n    public location: WebGLUniformLocation;\n    public value: number | boolean | Float32Array | Int32Array | Uint32Array | boolean[];\n}\n\n/**\n * Helper class to create a WebGL Program\n * @private\n */\nexport class GlProgramData\n{\n    /** The shader program. */\n    public program: WebGLProgram;\n\n    /**\n     * Holds the uniform data which contains uniform locations\n     * and current uniform values used for caching and preventing unneeded GPU commands.\n     */\n    public uniformData: Record<string, any>;\n\n    /**\n     * UniformGroups holds the various upload functions for the shader. Each uniform group\n     * and program have a unique upload function generated.\n     */\n    public uniformGroups: Record<string, any>;\n\n    /** A hash that stores where UBOs are bound to on the program. */\n    public uniformBlockBindings: Record<string, any>;\n\n    /** A hash for lazily-generated uniform uploading functions. */\n    public uniformSync: Record<string, any>;\n\n    /**\n     * A place where dirty ticks are stored for groups\n     * If a tick here does not match with the Higher level Programs tick, it means\n     * we should re upload the data.\n     */\n    public uniformDirtyGroups: Record<string, any>;\n\n    /**\n     * Makes a new Pixi program.\n     * @param program - webgl program\n     * @param uniformData - uniforms\n     */\n    constructor(program: WebGLProgram, uniformData: {[key: string]: IGLUniformData})\n    {\n        this.program = program;\n        this.uniformData = uniformData;\n        this.uniformGroups = {};\n        this.uniformDirtyGroups = {};\n        this.uniformBlockBindings = {};\n    }\n\n    /** Destroys this program. */\n    public destroy(): void\n    {\n        this.uniformData = null;\n        this.uniformGroups = null;\n        this.uniformDirtyGroups = null;\n        this.uniformBlockBindings = null;\n        this.program = null;\n    }\n}\n","import {\n    compareModeToGlCompare,\n    mipmapScaleModeToGlFilter,\n    scaleModeToGlFilter,\n    wrapModeToGlAddress\n} from './pixiToGlMaps';\n\nimport type { TextureStyle } from '../../../shared/texture/TextureStyle';\n\n/**\n * @param style\n * @param gl\n * @param mipmaps\n * @param anisotropicExt\n * @param glFunctionName\n * @param firstParam\n * @param forceClamp\n * @param firstCreation\n * @internal\n */\nexport function applyStyleParams(\n    style: TextureStyle,\n    gl: WebGL2RenderingContext,\n    mipmaps: boolean,\n    // eslint-disable-next-line camelcase\n    anisotropicExt: EXT_texture_filter_anisotropic,\n    glFunctionName: 'samplerParameteri' | 'texParameteri',\n    firstParam: 3553 | WebGLSampler,\n    forceClamp: boolean,\n    /** if true we can skip setting certain values if the values is the same as the default gl values */\n    firstCreation: boolean\n)\n{\n    const castParam = firstParam as 3553;\n\n    if (!firstCreation\n        || style.addressModeU !== 'repeat'\n        || style.addressModeV !== 'repeat'\n        || style.addressModeW !== 'repeat'\n    )\n    {\n        // 1. set the wrapping mode\n        const wrapModeS = wrapModeToGlAddress[forceClamp ? 'clamp-to-edge' : style.addressModeU];\n        const wrapModeT = wrapModeToGlAddress[forceClamp ? 'clamp-to-edge' : style.addressModeV];\n        const wrapModeR = wrapModeToGlAddress[forceClamp ? 'clamp-to-edge' : style.addressModeW];\n\n        gl[glFunctionName](castParam, gl.TEXTURE_WRAP_S, wrapModeS);\n        gl[glFunctionName](castParam, gl.TEXTURE_WRAP_T, wrapModeT);\n\n        // does not exist in webGL1\n        if (gl.TEXTURE_WRAP_R) gl[glFunctionName](castParam, gl.TEXTURE_WRAP_R, wrapModeR);\n    }\n\n    if (!firstCreation || style.magFilter !== 'linear')\n    {\n        // 2. set the filtering mode\n        gl[glFunctionName](castParam, gl.TEXTURE_MAG_FILTER, scaleModeToGlFilter[style.magFilter]);\n    }\n\n    // assuming the currently bound texture is the one we want to set the filter for\n    // the only smelly part of this code, WebGPU is much better here :P\n    if (mipmaps)\n    {\n        if (!firstCreation || style.mipmapFilter !== 'linear')\n        {\n            const glFilterMode = mipmapScaleModeToGlFilter[style.minFilter][style.mipmapFilter];\n\n            gl[glFunctionName](castParam, gl.TEXTURE_MIN_FILTER, glFilterMode);\n        }\n    }\n\n    else\n    {\n        gl[glFunctionName](castParam, gl.TEXTURE_MIN_FILTER, scaleModeToGlFilter[style.minFilter]);\n    }\n\n    // 3. set the anisotropy\n    if (anisotropicExt && style.maxAnisotropy > 1)\n    {\n        const level = Math.min(style.maxAnisotropy, gl.getParameter(anisotropicExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n\n        gl[glFunctionName](castParam, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, level);\n    }\n\n    // 4. set the compare mode\n    if (style.compare)\n    {\n        gl[glFunctionName](castParam, gl.TEXTURE_COMPARE_FUNC, compareModeToGlCompare[style.compare]);\n    }\n}\n","import { defaultValue } from './defaultValue';\nimport { mapType } from './mapType';\n\nimport type { GlUniformData } from '../GlProgram';\n\n/**\n * returns the uniform data from the program\n * @private\n * @param program - the webgl program\n * @param gl - the WebGL context\n * @returns {object} the uniform data for this program\n */\nexport function getUniformData(program: WebGLProgram, gl: WebGLRenderingContextBase): {[key: string]: GlUniformData}\n{\n    const uniforms: {[key: string]: GlUniformData} = {};\n\n    const totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n    for (let i = 0; i < totalUniforms; i++)\n    {\n        const uniformData = gl.getActiveUniform(program, i);\n        const name = uniformData.name.replace(/\\[.*?\\]$/, '');\n\n        const isArray = !!(uniformData.name.match(/\\[.*?\\]$/));\n\n        const type = mapType(gl, uniformData.type);\n\n        uniforms[name] = {\n            name,\n            index: i,\n            type,\n            size: uniformData.size,\n            isArray,\n            value: defaultValue(type, uniformData.size),\n        };\n    }\n\n    return uniforms;\n}\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat';\nimport { mapGlToVertexFormat } from './mapType';\n\nimport type { Attribute } from '../../../shared/geometry/Geometry';\n\n/**\n * This interface represents the extracted attribute data from a WebGL program.\n * It extends the `Attribute` interface but omits the `buffer` property.\n * It includes an optional `location` property that indicates where the shader location is for this attribute.\n * @category rendering\n * @advanced\n */\nexport interface ExtractedAttributeData extends Omit<Attribute, 'buffer'>\n{\n    /** set where the shader location is for this attribute */\n    location?: number;\n}\n\n/**\n * returns the attribute data from the program\n * @private\n * @param {WebGLProgram} [program] - the WebGL program\n * @param {WebGLRenderingContext} [gl] - the WebGL context\n * @param sortAttributes\n * @returns {object} the attribute data for this program\n */\nexport function extractAttributesFromGlProgram(\n    program: WebGLProgram,\n    gl: WebGLRenderingContextBase,\n    sortAttributes = false\n): Record<string, ExtractedAttributeData>\n{\n    const attributes: {[key: string]: ExtractedAttributeData} = {};\n\n    const totalAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n\n    for (let i = 0; i < totalAttributes; i++)\n    {\n        const attribData = gl.getActiveAttrib(program, i);\n\n        // ignore the default ones!\n        if (attribData.name.startsWith('gl_'))\n        {\n            continue;\n        }\n\n        const format = mapGlToVertexFormat(gl, attribData.type);\n\n        attributes[attribData.name] = {\n            location: 0, // set further down..\n            format,\n            stride: getAttributeInfoFromFormat(format).stride,\n            offset: 0,\n            instance: false,\n            start: 0,\n        };\n    }\n\n    const keys = Object.keys(attributes);\n\n    if (sortAttributes)\n    {\n        keys.sort((a, b) => (a > b) ? 1 : -1); // eslint-disable-line no-confusing-arrow\n\n        for (let i = 0; i < keys.length; i++)\n        {\n            attributes[keys[i]].location = i;\n\n            gl.bindAttribLocation(program, i, keys[i]);\n        }\n\n        gl.linkProgram(program);\n    }\n    else\n    {\n        for (let i = 0; i < keys.length; i++)\n        {\n            attributes[keys[i]].location = gl.getAttribLocation(program, keys[i]);\n        }\n    }\n\n    return attributes;\n}\n","// cu = Cached value's uniform data field\n// cv = Cached value\n// v = value to upload\n// ud = uniformData\n// uv = uniformValue\n\nimport type { UNIFORM_TYPES } from '../../../shared/shader/types';\n\n/** @internal */\nexport const UNIFORM_TO_SINGLE_SETTERS: Record<UNIFORM_TYPES | string, string> = {\n    f32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1f(location, v);\n        }`,\n    'vec2<f32>': `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2f(location, v[0], v[1]);\n        }`,\n    'vec3<f32>': `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3f(location, v[0], v[1], v[2]);\n        }`,\n    'vec4<f32>': `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n        }`,\n    i32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }`,\n    'vec2<i32>': `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }`,\n    'vec3<i32>': `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }`,\n    'vec4<i32>': `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }`,\n    u32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1ui(location, v);\n        }`,\n    'vec2<u32>': `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2ui(location, v[0], v[1]);\n        }`,\n    'vec3<u32>': `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3ui(location, v[0], v[1], v[2]);\n        }`,\n    'vec4<u32>': `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n        }`,\n    bool: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }`,\n    'vec2<bool>': `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }`,\n    'vec3<bool>': `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }`,\n    'vec4<bool>': `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }`,\n    'mat2x2<f32>': `gl.uniformMatrix2fv(location, false, v);`,\n    'mat3x3<f32>': `gl.uniformMatrix3fv(location, false, v);`,\n    'mat4x4<f32>': `gl.uniformMatrix4fv(location, false, v);`,\n};\n\n/** @internal */\nexport const UNIFORM_TO_ARRAY_SETTERS: Record<UNIFORM_TYPES | string, string> = {\n    f32: `gl.uniform1fv(location, v);`,\n    'vec2<f32>': `gl.uniform2fv(location, v);`,\n    'vec3<f32>': `gl.uniform3fv(location, v);`,\n    'vec4<f32>': `gl.uniform4fv(location, v);`,\n    'mat2x2<f32>': `gl.uniformMatrix2fv(location, false, v);`,\n    'mat3x3<f32>': `gl.uniformMatrix3fv(location, false, v);`,\n    'mat4x4<f32>': `gl.uniformMatrix4fv(location, false, v);`,\n    i32: `gl.uniform1iv(location, v);`,\n    'vec2<i32>': `gl.uniform2iv(location, v);`,\n    'vec3<i32>': `gl.uniform3iv(location, v);`,\n    'vec4<i32>': `gl.uniform4iv(location, v);`,\n    u32: `gl.uniform1iv(location, v);`,\n    'vec2<u32>': `gl.uniform2iv(location, v);`,\n    'vec3<u32>': `gl.uniform3iv(location, v);`,\n    'vec4<u32>': `gl.uniform4iv(location, v);`,\n    bool: `gl.uniform1iv(location, v);`,\n    'vec2<bool>': `gl.uniform2iv(location, v);`,\n    'vec3<bool>': `gl.uniform3iv(location, v);`,\n    'vec4<bool>': `gl.uniform4iv(location, v);`,\n};\n","import { DOMAdapter } from '../../../../environment/adapter';\n\nimport type { BLEND_MODES } from '../../shared/state/const';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\n\n/**\n * Maps gl blend combinations to WebGL.\n * @param gl\n * @returns {object} Map of gl blend combinations to WebGL.\n * @internal\n */\nexport function mapWebGLBlendModesToPixi(gl: GlRenderingContext): Record<BLEND_MODES, number[]>\n{\n    const blendMap: Partial<Record<BLEND_MODES, number[]>> = {};\n\n    // TODO - premultiply alpha would be different.\n    // add a boolean for that!\n    blendMap.normal = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n    blendMap.add = [gl.ONE, gl.ONE];\n    blendMap.multiply = [gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n    blendMap.screen = [gl.ONE, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n    blendMap.none = [0, 0];\n\n    // not-premultiplied blend modes\n    blendMap['normal-npm'] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n    blendMap['add-npm'] = [gl.SRC_ALPHA, gl.ONE, gl.ONE, gl.ONE];\n    blendMap['screen-npm'] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n\n    blendMap.erase = [gl.ZERO, gl.ONE_MINUS_SRC_ALPHA];\n\n    const isWebGl2 = !(gl instanceof DOMAdapter.get().getWebGLRenderingContext());\n\n    if (isWebGl2)\n    {\n        blendMap.min = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.MIN, gl.MIN];\n        blendMap.max = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.MAX, gl.MAX];\n    }\n    else\n    {\n        const ext = gl.getExtension('EXT_blend_minmax');\n\n        if (ext)\n        {\n            blendMap.min = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, ext.MIN_EXT, ext.MIN_EXT];\n            blendMap.max = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, ext.MAX_EXT, ext.MAX_EXT];\n        }\n    }\n\n    // TODO - implement if requested!\n    // composite operations\n    // array[BLEND_MODES.SRC_IN] = [gl.DST_ALPHA, gl.ZERO];\n    // array[BLEND_MODES.SRC_OUT] = [gl.ONE_MINUS_DST_ALPHA, gl.ZERO];\n    // array[BLEND_MODES.SRC_ATOP] = [gl.DST_ALPHA, gl.ONE_MINUS_SRC_ALPHA];\n    // array[BLEND_MODES.DST_OVER] = [gl.ONE_MINUS_DST_ALPHA, gl.ONE];\n    // array[BLEND_MODES.DST_IN] = [gl.ZERO, gl.SRC_ALPHA];\n    // array[BLEND_MODES.DST_OUT] = [gl.ZERO, gl.ONE_MINUS_SRC_ALPHA];\n    // array[BLEND_MODES.DST_ATOP] = [gl.ONE_MINUS_DST_ALPHA, gl.SRC_ALPHA];\n    // array[BLEND_MODES.XOR] = [gl.ONE_MINUS_DST_ALPHA, gl.ONE_MINUS_SRC_ALPHA];\n    // SUBTRACT from flash\n    // array[BLEND_MODES.SUBTRACT] = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.FUNC_REVERSE_SUBTRACT, gl.FUNC_ADD];\n\n    return blendMap as Record<BLEND_MODES, number[]>;\n}\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { type RenderTarget } from '../../shared/renderTarget/RenderTarget';\nimport { State } from '../../shared/state/State';\nimport { type WebGLRenderer } from '../WebGLRenderer';\nimport { mapWebGLBlendModesToPixi } from './mapWebGLBlendModesToPixi';\n\nimport type { BLEND_MODES } from '../../shared/state/const';\nimport type { System } from '../../shared/system/System';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\n\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\n\n/**\n * System plugin to the renderer to manage WebGL state machines\n * @category rendering\n * @advanced\n */\nexport class GlStateSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'state',\n    } as const;\n\n    /**\n     * State ID\n     * @readonly\n     */\n    public stateId: number;\n\n    /**\n     * Polygon offset\n     * @readonly\n     */\n    public polygonOffset: number;\n\n    /**\n     * Blend mode\n     * @default 'none'\n     * @readonly\n     */\n    public blendMode: BLEND_MODES;\n\n    /** Whether current blend equation is different */\n    protected _blendEq: boolean;\n\n    /**\n     * GL context\n     * @type {WebGLRenderingContext}\n     * @readonly\n     */\n    protected gl: GlRenderingContext;\n\n    protected blendModesMap: Record<BLEND_MODES, number[]>;\n\n    /**\n     * Collection of calls\n     * @type {Function[]}\n     */\n    protected readonly map: ((value: boolean) => void)[];\n\n    /**\n     * Collection of check calls\n     * @type {Function[]}\n     */\n    protected readonly checks: ((system: this, state: State) => void)[];\n\n    /**\n     * Default WebGL State\n     * @readonly\n     */\n    protected defaultState: State;\n\n    /**\n     * Whether to invert the front face when rendering\n     * This is used for render textures where the Y-coordinate is flipped\n     * @default false\n     */\n    private _invertFrontFace: boolean = false;\n    private _glFrontFace: boolean;\n    private _cullFace: boolean;\n    private _frontFaceDirty: boolean;\n    private _frontFace: boolean;\n\n    constructor(renderer: WebGLRenderer)\n    {\n        this.gl = null;\n\n        this.stateId = 0;\n        this.polygonOffset = 0;\n        this.blendMode = 'none';\n\n        this._blendEq = false;\n\n        // map functions for when we set state..\n        this.map = [];\n        this.map[BLEND] = this.setBlend;\n        this.map[OFFSET] = this.setOffset;\n        this.map[CULLING] = this.setCullFace;\n        this.map[DEPTH_TEST] = this.setDepthTest;\n        this.map[WINDING] = this.setFrontFace;\n        this.map[DEPTH_MASK] = this.setDepthMask;\n\n        this.checks = [];\n\n        this.defaultState = State.for2d();\n\n        // listen for when the renderTarget changes\n        // as rendering to textures means we need to invert the front face\n        renderer.renderTarget.onRenderTargetChange.add(this);\n    }\n\n    protected onRenderTargetChange(renderTarget: RenderTarget)\n    {\n        this._invertFrontFace = !renderTarget.isRoot;\n\n        // mini optimization to avoid setting the front face if culling is disabled\n        if (this._cullFace)\n        {\n            // need to set the front face to the requested value as it matters because of the culling is active!\n            this.setFrontFace(this._frontFace);\n        }\n        else\n        {\n            // if culling is disabled, we need to set the front face dirty\n            this._frontFaceDirty = true;\n        }\n    }\n\n    protected contextChange(gl: GlRenderingContext): void\n    {\n        this.gl = gl;\n\n        this.blendModesMap = mapWebGLBlendModesToPixi(gl);\n\n        // Reset face culling variables\n\n        this.resetState();\n    }\n\n    /**\n     * Sets the current state\n     * @param {*} state - The state to set.\n     */\n    public set(state: State): void\n    {\n        state ||= this.defaultState;\n\n        // TODO maybe to an object check? ( this.state === state )?\n        if (this.stateId !== state.data)\n        {\n            let diff = this.stateId ^ state.data;\n            let i = 0;\n\n            // order from least to most common\n            while (diff)\n            {\n                if (diff & 1)\n                {\n                    // state change!\n                    this.map[i].call(this, !!(state.data & (1 << i)));\n                }\n\n                diff >>= 1;\n                i++;\n            }\n\n            this.stateId = state.data;\n        }\n\n        // based on the above settings we check for specific modes..\n        // for example if blend is active we check and set the blend modes\n        // or of polygon offset is active we check the poly depth.\n        for (let i = 0; i < this.checks.length; i++)\n        {\n            this.checks[i](this, state);\n        }\n    }\n\n    /**\n     * Sets the state, when previous state is unknown.\n     * @param {*} state - The state to set\n     */\n    public forceState(state: State): void\n    {\n        state ||= this.defaultState;\n        for (let i = 0; i < this.map.length; i++)\n        {\n            this.map[i].call(this, !!(state.data & (1 << i)));\n        }\n        for (let i = 0; i < this.checks.length; i++)\n        {\n            this.checks[i](this, state);\n        }\n\n        this.stateId = state.data;\n    }\n\n    /**\n     * Sets whether to enable or disable blending.\n     * @param value - Turn on or off WebGl blending.\n     */\n    public setBlend(value: boolean): void\n    {\n        this._updateCheck(GlStateSystem._checkBlendMode, value);\n\n        this.gl[value ? 'enable' : 'disable'](this.gl.BLEND);\n    }\n\n    /**\n     * Sets whether to enable or disable polygon offset fill.\n     * @param value - Turn on or off webgl polygon offset testing.\n     */\n    public setOffset(value: boolean): void\n    {\n        this._updateCheck(GlStateSystem._checkPolygonOffset, value);\n\n        this.gl[value ? 'enable' : 'disable'](this.gl.POLYGON_OFFSET_FILL);\n    }\n\n    /**\n     * Sets whether to enable or disable depth test.\n     * @param value - Turn on or off webgl depth testing.\n     */\n    public setDepthTest(value: boolean): void\n    {\n        this.gl[value ? 'enable' : 'disable'](this.gl.DEPTH_TEST);\n    }\n\n    /**\n     * Sets whether to enable or disable depth mask.\n     * @param value - Turn on or off webgl depth mask.\n     */\n    public setDepthMask(value: boolean): void\n    {\n        this.gl.depthMask(value);\n    }\n\n    /**\n     * Sets whether to enable or disable cull face.\n     * @param {boolean} value - Turn on or off webgl cull face.\n     */\n    public setCullFace(value: boolean): void\n    {\n        this._cullFace = value;\n        this.gl[value ? 'enable' : 'disable'](this.gl.CULL_FACE);\n\n        if (this._cullFace && this._frontFaceDirty)\n        {\n            // need to set the front face to the requested value as it matters because of the culling is active!\n            this.setFrontFace(this._frontFace);\n        }\n    }\n\n    /**\n     * Sets the gl front face.\n     * @param {boolean} value - true is clockwise and false is counter-clockwise\n     */\n    public setFrontFace(value: boolean): void\n    {\n        this._frontFace = value;\n        this._frontFaceDirty = false;\n        // If invertFrontFace is true, we invert the face direction\n        const faceMode = this._invertFrontFace ? !value : value;\n\n        if (this._glFrontFace !== faceMode)\n        {\n            this._glFrontFace = faceMode;\n            this.gl.frontFace(this.gl[faceMode ? 'CW' : 'CCW']);\n        }\n    }\n\n    /**\n     * Sets the blend mode.\n     * @param {number} value - The blend mode to set to.\n     */\n    public setBlendMode(value: BLEND_MODES): void\n    {\n        if (!this.blendModesMap[value])\n        {\n            value = 'normal';\n        }\n\n        if (value === this.blendMode)\n        {\n            return;\n        }\n\n        this.blendMode = value;\n\n        const mode = this.blendModesMap[value];\n        const gl = this.gl;\n\n        if (mode.length === 2)\n        {\n            gl.blendFunc(mode[0], mode[1]);\n        }\n        else\n        {\n            gl.blendFuncSeparate(mode[0], mode[1], mode[2], mode[3]);\n        }\n\n        if (mode.length === 6)\n        {\n            this._blendEq = true;\n            gl.blendEquationSeparate(mode[4], mode[5]);\n        }\n        else if (this._blendEq)\n        {\n            this._blendEq = false;\n            gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n        }\n    }\n\n    /**\n     * Sets the polygon offset.\n     * @param {number} value - the polygon offset\n     * @param {number} scale - the polygon offset scale\n     */\n    public setPolygonOffset(value: number, scale: number): void\n    {\n        this.gl.polygonOffset(value, scale);\n    }\n\n    /** Resets all the logic and disables the VAOs. */\n    public resetState(): void\n    {\n        this._glFrontFace = false;\n        this._frontFace = false;\n        this._cullFace = false;\n        this._frontFaceDirty = false;\n        this._invertFrontFace = false;\n\n        this.gl.frontFace(this.gl.CCW);\n        this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, false);\n\n        this.forceState(this.defaultState);\n\n        this._blendEq = true;\n        // setting to '' means the blend mode will be set as soon as we set the first blend mode when rendering!\n        this.blendMode = '' as BLEND_MODES;\n        this.setBlendMode('normal');\n    }\n\n    /**\n     * Checks to see which updates should be checked based on which settings have been activated.\n     *\n     * For example, if blend is enabled then we should check the blend modes each time the state is changed\n     * or if polygon fill is activated then we need to check if the polygon offset changes.\n     * The idea is that we only check what we have too.\n     * @param func - the checking function to add or remove\n     * @param value - should the check function be added or removed.\n     */\n    private _updateCheck(func: (system: this, state: State) => void, value: boolean): void\n    {\n        const index = this.checks.indexOf(func);\n\n        if (value && index === -1)\n        {\n            this.checks.push(func);\n        }\n        else if (!value && index !== -1)\n        {\n            this.checks.splice(index, 1);\n        }\n    }\n\n    /**\n     * A private little wrapper function that we call to check the blend mode.\n     * @param system - the System to perform the state check on\n     * @param state - the state that the blendMode will pulled from\n     */\n    private static _checkBlendMode(system: GlStateSystem, state: State): void\n    {\n        system.setBlendMode(state.blendMode);\n    }\n\n    /**\n     * A private little wrapper function that we call to check the polygon offset.\n     * @param system - the System to perform the state check on\n     * @param state - the state that the blendMode will pulled from\n     */\n    private static _checkPolygonOffset(system: GlStateSystem, state: State): void\n    {\n        system.setPolygonOffset(1, state.polygonOffset);\n    }\n\n    /** @ignore */\n    public destroy(): void\n    {\n        this.gl = null;\n        this.checks.length = 0;\n    }\n}\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { RenderTargetSystem } from '../../shared/renderTarget/RenderTargetSystem';\nimport { GlRenderTargetAdaptor } from './GlRenderTargetAdaptor';\n\nimport type { GlRenderTarget } from '../GlRenderTarget';\nimport type { WebGLRenderer } from '../WebGLRenderer';\n\n/**\n * The WebGL adaptor for the render target system. Allows the Render Target System to be used with the WebGl renderer\n * @category rendering\n * @advanced\n */\nexport class GlRenderTargetSystem extends RenderTargetSystem<GlRenderTarget>\n{\n    /** @ignore */\n    public static extension = {\n        type: [ExtensionType.WebGLSystem],\n        name: 'renderTarget',\n    } as const;\n\n    public adaptor = new GlRenderTargetAdaptor();\n\n    constructor(renderer: WebGLRenderer)\n    {\n        super(renderer);\n\n        this.adaptor.init(renderer, this);\n    }\n}\n","import { type GPUData } from '../../../../scene/view/ViewContainer';\nimport { GL_FORMATS, GL_TARGETS, GL_TYPES } from './const';\n\n/**\n * Internal texture for WebGL context\n * @category rendering\n * @ignore\n */\nexport class GlTexture implements GPUData\n{\n    public target: GL_TARGETS = GL_TARGETS.TEXTURE_2D;\n\n    /** The WebGL texture. */\n    public texture: WebGLTexture;\n\n    /** Width of texture that was used in texImage2D. */\n    public width: number;\n\n    /** Height of texture that was used in texImage2D. */\n    public height: number;\n\n    /** Whether mip levels has to be generated. */\n    public mipmap: boolean;\n\n    /** Type copied from texture source. */\n    public type: number;\n\n    /** Type copied from texture source. */\n    public internalFormat: number;\n\n    /** Type of sampler corresponding to this texture. See {@link SAMPLER_TYPES} */\n    public samplerType: number;\n\n    public format: GL_FORMATS;\n\n    constructor(texture: WebGLTexture)\n    {\n        this.texture = texture;\n        this.width = -1;\n        this.height = -1;\n        this.type = GL_TYPES.UNSIGNED_BYTE;\n        this.internalFormat = GL_FORMATS.RGBA;\n        this.format = GL_FORMATS.RGBA;\n        this.samplerType = 0;\n    }\n\n    public destroy(): void\n    {\n        // BOOM\n    }\n}\n","import { glUploadImageResource } from './glUploadImageResource';\n\nimport type { VideoSource } from '../../../shared/texture/sources/VideoSource';\nimport type { GlRenderingContext } from '../../context/GlRenderingContext';\nimport type { GlTexture } from '../GlTexture';\nimport type { GLTextureUploader } from './GLTextureUploader';\n\n/** @internal */\nexport const glUploadVideoResource = {\n\n    id: 'video',\n\n    upload(source: VideoSource, glTexture: GlTexture, gl: GlRenderingContext, webGLVersion: number)\n    {\n        if (!source.isValid)\n        {\n            gl.texImage2D(\n                glTexture.target,\n                0,\n                glTexture.internalFormat,\n                1,\n                1,\n                0,\n                glTexture.format,\n                glTexture.type,\n                null\n            );\n\n            return;\n        }\n\n        glUploadImageResource.upload(source, glTexture, gl, webGLVersion);\n    }\n} as GLTextureUploader;\n\n","// cu = Cached value's uniform data field\n// cv = Cached value\n// v = value to upload\n// ud = uniformData\n// uv = uniformValue\n\nimport { BufferResource } from '../../../shared/buffer/BufferResource';\nimport { UniformGroup } from '../../../shared/shader/UniformGroup';\nimport { uniformParsers } from '../../../shared/shader/utils/uniformParsers';\nimport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS } from './generateUniformsSyncTypes';\n\nimport type { UniformsSyncCallback } from '../../../shared/shader/types';\n\n/**\n * @param group\n * @param uniformData\n * @internal\n */\nexport function generateUniformsSync(group: UniformGroup, uniformData: Record<string, any>): UniformsSyncCallback\n{\n    const funcFragments = [`\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n        var name = null;\n    `];\n\n    for (const i in group.uniforms)\n    {\n        if (!uniformData[i])\n        {\n            if (group.uniforms[i] instanceof UniformGroup)\n            {\n                if ((group.uniforms[i] as UniformGroup).ubo)\n                {\n                    funcFragments.push(`\n                        renderer.shader.bindUniformBlock(uv.${i}, \"${i}\");\n                    `);\n                }\n                else\n                {\n                    funcFragments.push(`\n                        renderer.shader.updateUniformGroup(uv.${i});\n                    `);\n                }\n            }\n            else if (group.uniforms[i] instanceof BufferResource)\n            {\n                funcFragments.push(`\n                        renderer.shader.bindBufferResource(uv.${i}, \"${i}\");\n                    `);\n            }\n\n            continue;\n        }\n\n        const uniform = group.uniformStructures[i];\n\n        let parsed = false;\n\n        for (let j = 0; j < uniformParsers.length; j++)\n        {\n            const parser = uniformParsers[j];\n\n            if (uniform.type === parser.type && parser.test(uniform))\n            {\n                funcFragments.push(`name = \"${i}\";`, uniformParsers[j].uniform);\n                parsed = true;\n\n                break;\n            }\n        }\n\n        if (!parsed)\n        {\n            const templateType = uniform.size === 1 ? UNIFORM_TO_SINGLE_SETTERS : UNIFORM_TO_ARRAY_SETTERS;\n\n            const template = templateType[uniform.type].replace('location', `ud[\"${i}\"].location`);\n\n            funcFragments.push(`\n            cu = ud[\"${i}\"];\n            cv = cu.value;\n            v = uv[\"${i}\"];\n            ${template};`);\n        }\n    }\n\n    /*\n     * the introduction of syncData is to solve an issue where textures in uniform groups are not set correctly\n     * the texture count was always starting from 0 in each group. This needs to increment each time a texture is used\n     * no matter which group is being used\n     *\n     */\n    // eslint-disable-next-line no-new-func\n    return new Function('ud', 'uv', 'renderer', 'syncData', funcFragments.join('\\n')) as UniformsSyncCallback;\n}\n","import { BufferResource } from '../../shared/buffer/BufferResource';\nimport { UniformGroup } from '../../shared/shader/UniformGroup';\nimport { TextureSource } from '../../shared/texture/sources/TextureSource';\n\nimport type { Shader } from '../../shared/shader/Shader';\nimport type { GlShaderSystem, ShaderSyncFunction } from './GlShaderSystem';\n\n/**\n * Generates the a function that will efficiently sync shader resources with the GPU.\n * @param shader - The shader to generate the code for\n * @param shaderSystem - An instance of the shader system\n * @internal\n */\nexport function generateShaderSyncCode(shader: Shader, shaderSystem: GlShaderSystem): ShaderSyncFunction\n{\n    const funcFragments: string[] = [];\n\n    /**\n     * rS = renderer.shader\n     * sS = shaderSystem\n     * sD = shaderData\n     * g = shader.groups\n     * s = shader\n     * r = renderer\n     * ugS = renderer.uniformGroupSystem\n     */\n    const headerFragments: string[] = [`\n        var g = s.groups;\n        var sS = r.shader;\n        var p = s.glProgram;\n        var ugS = r.uniformGroup;\n        var resources;\n    `];\n\n    let addedTextreSystem = false;\n    let textureCount = 0;\n\n    const programData = shaderSystem._getProgramData(shader.glProgram);\n\n    for (const i in shader.groups)\n    {\n        const group = shader.groups[i];\n\n        funcFragments.push(`\n            resources = g[${i}].resources;\n        `);\n\n        for (const j in group.resources)\n        {\n            const resource = group.resources[j];\n\n            if (resource instanceof UniformGroup)\n            {\n                if (resource.ubo)\n                {\n                    const resName = shader._uniformBindMap[i][Number(j)];\n\n                    funcFragments.push(`\n                        sS.bindUniformBlock(\n                            resources[${j}],\n                            '${resName}',\n                            ${shader.glProgram._uniformBlockData[resName].index}\n                        );\n                    `);\n                }\n                else\n                {\n                    funcFragments.push(`\n                        ugS.updateUniformGroup(resources[${j}], p, sD);\n                    `);\n                }\n            }\n            else if (resource instanceof BufferResource)\n            {\n                const resName = shader._uniformBindMap[i][Number(j)];\n\n                funcFragments.push(`\n                    sS.bindUniformBlock(\n                        resources[${j}],\n                        '${resName}',\n                        ${shader.glProgram._uniformBlockData[resName].index}\n                    );\n                `);\n            }\n            else if (resource instanceof TextureSource)\n            {\n                const uniformName = shader._uniformBindMap[i as unknown as number][j as unknown as number];\n\n                const uniformData = programData.uniformData[uniformName];\n\n                if (uniformData)\n                {\n                    if (!addedTextreSystem)\n                    {\n                        addedTextreSystem = true;\n                        headerFragments.push(`\n                        var tS = r.texture;\n                        `);\n                    }\n\n                    shaderSystem._gl.uniform1i(uniformData.location, textureCount);\n\n                    funcFragments.push(`\n                        tS.bind(resources[${j}], ${textureCount});\n                    `);\n\n                    textureCount++;\n                }\n            }\n        }\n    }\n\n    const functionSource = [...headerFragments, ...funcFragments].join('\\n');\n\n    // eslint-disable-next-line no-new-func\n    return new Function('r', 's', 'sD', functionSource) as ShaderSyncFunction;\n}\n","import { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport { warn } from '../../../../utils/logging/warn';\nimport { CanvasSource } from '../../shared/texture/sources/CanvasSource';\nimport { CLEAR } from '../const';\nimport { GlRenderTarget } from '../GlRenderTarget';\n\nimport type { RgbaArray } from '../../../../color/Color';\nimport type { RenderTarget } from '../../shared/renderTarget/RenderTarget';\nimport type { RenderTargetAdaptor, RenderTargetSystem } from '../../shared/renderTarget/RenderTargetSystem';\nimport type { Texture } from '../../shared/texture/Texture';\nimport type { CLEAR_OR_BOOL } from '../const';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\nimport type { WebGLRenderer } from '../WebGLRenderer';\n\n/**\n * The WebGL adaptor for the render target system. Allows the Render Target System to be used with the WebGL renderer\n * @category rendering\n * @ignore\n */\nexport class GlRenderTargetAdaptor implements RenderTargetAdaptor<GlRenderTarget>\n{\n    private _renderTargetSystem: RenderTargetSystem<GlRenderTarget>;\n    private _renderer: WebGLRenderer<HTMLCanvasElement>;\n    private _clearColorCache: RgbaArray = [0, 0, 0, 0];\n    private _viewPortCache: Rectangle = new Rectangle();\n    /** Pre-computed draw buffers arrays for MRT, indexed by color attachment count */\n    private _drawBuffersCache: number[][];\n\n    public init(renderer: WebGLRenderer, renderTargetSystem: RenderTargetSystem<GlRenderTarget>): void\n    {\n        this._renderer = renderer;\n        this._renderTargetSystem = renderTargetSystem;\n\n        renderer.runners.contextChange.add(this);\n    }\n\n    public contextChange(): void\n    {\n        this._clearColorCache = [0, 0, 0, 0];\n        this._viewPortCache = new Rectangle();\n\n        // Pre-compute draw buffers arrays for all possible MRT configurations\n        const gl = this._renderer.gl;\n\n        this._drawBuffersCache = [];\n\n        for (let i = 1; i <= 16; i++)\n        {\n            this._drawBuffersCache[i] = Array.from({ length: i }, (_, j) => gl.COLOR_ATTACHMENT0 + j);\n        }\n    }\n\n    public copyToTexture(\n        sourceRenderSurfaceTexture: RenderTarget,\n        destinationTexture: Texture,\n        originSrc: { x: number; y: number; },\n        size: { width: number; height: number; },\n        originDest: { x: number; y: number; },\n    )\n    {\n        const renderTargetSystem = this._renderTargetSystem;\n\n        const renderer = this._renderer;\n        const glRenderTarget = renderTargetSystem.getGpuRenderTarget(sourceRenderSurfaceTexture);\n        const gl = renderer.gl;\n\n        this.finishRenderPass(sourceRenderSurfaceTexture);\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.resolveTargetFramebuffer);\n\n        renderer.texture.bind(destinationTexture, 0);\n\n        gl.copyTexSubImage2D(gl.TEXTURE_2D, 0,\n            originDest.x, originDest.y,\n            originSrc.x,\n            originSrc.y,\n            size.width,\n            size.height\n        );\n\n        return destinationTexture;\n    }\n\n    public startRenderPass(\n        renderTarget: RenderTarget,\n        clear: CLEAR_OR_BOOL = true,\n        clearColor?: RgbaArray,\n        viewport?: Rectangle\n    )\n    {\n        const renderTargetSystem = this._renderTargetSystem;\n\n        const source = renderTarget.colorTexture;\n        const gpuRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n\n        let viewPortY = viewport.y;\n\n        if (renderTarget.isRoot)\n        {\n            // /TODO this is the same logic?\n            viewPortY = source.pixelHeight - viewport.height - viewport.y;\n        }\n\n        // unbind the current render texture..\n        renderTarget.colorTextures.forEach((texture) =>\n        {\n            this._renderer.texture.unbind(texture);\n        });\n\n        const gl = this._renderer.gl;\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, gpuRenderTarget.framebuffer);\n\n        // Set draw buffers for multiple render targets (MRT)\n        if (renderTarget.colorTextures.length > 1)\n        {\n            this._setDrawBuffers(renderTarget, gl);\n        }\n\n        const viewPortCache = this._viewPortCache;\n\n        if (viewPortCache.x !== viewport.x\n            || viewPortCache.y !== viewPortY\n            || viewPortCache.width !== viewport.width\n            || viewPortCache.height !== viewport.height)\n        {\n            viewPortCache.x = viewport.x;\n            viewPortCache.y = viewPortY;\n            viewPortCache.width = viewport.width;\n            viewPortCache.height = viewport.height;\n\n            gl.viewport(\n                viewport.x,\n                viewPortY,\n                viewport.width,\n                viewport.height,\n            );\n        }\n\n        // if the stencil buffer has been requested, we need to create a stencil buffer\n        if (!gpuRenderTarget.depthStencilRenderBuffer && (renderTarget.stencil || renderTarget.depth))\n        {\n            this._initStencil(gpuRenderTarget);\n        }\n\n        this.clear(renderTarget, clear, clearColor);\n    }\n\n    public finishRenderPass(renderTarget?: RenderTarget)\n    {\n        const renderTargetSystem = this._renderTargetSystem;\n\n        const glRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n\n        if (!glRenderTarget.msaa) return;\n\n        const gl = this._renderer.gl;\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.resolveTargetFramebuffer);\n        gl.bindFramebuffer(gl.READ_FRAMEBUFFER, glRenderTarget.framebuffer);\n\n        gl.blitFramebuffer(\n            0, 0, glRenderTarget.width, glRenderTarget.height,\n            0, 0, glRenderTarget.width, glRenderTarget.height,\n            gl.COLOR_BUFFER_BIT, gl.NEAREST,\n        );\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.framebuffer);\n\n        // dont think we need this anymore? keeping around just in case the wheels fall off\n        // gl.bindFramebuffer(gl.READ_FRAMEBUFFER, null);\n    }\n\n    public initGpuRenderTarget(renderTarget: RenderTarget): GlRenderTarget\n    {\n        const renderer = this._renderer;\n\n        const gl = renderer.gl;\n\n        // do single...\n\n        const glRenderTarget = new GlRenderTarget();\n\n        // we are rendering to the main canvas..\n        const colorTexture = renderTarget.colorTexture;\n\n        if (colorTexture instanceof CanvasSource)\n        {\n            this._renderer.context.ensureCanvasSize(renderTarget.colorTexture.resource);\n\n            glRenderTarget.framebuffer = null;\n\n            return glRenderTarget;\n        }\n\n        this._initColor(renderTarget, glRenderTarget);\n\n        // set up a depth texture..\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n\n        return glRenderTarget;\n    }\n\n    public destroyGpuRenderTarget(gpuRenderTarget: GlRenderTarget)\n    {\n        const gl = this._renderer.gl;\n\n        if (gpuRenderTarget.framebuffer)\n        {\n            gl.deleteFramebuffer(gpuRenderTarget.framebuffer);\n            gpuRenderTarget.framebuffer = null;\n        }\n\n        if (gpuRenderTarget.resolveTargetFramebuffer)\n        {\n            gl.deleteFramebuffer(gpuRenderTarget.resolveTargetFramebuffer);\n            gpuRenderTarget.resolveTargetFramebuffer = null;\n        }\n\n        if (gpuRenderTarget.depthStencilRenderBuffer)\n        {\n            gl.deleteRenderbuffer(gpuRenderTarget.depthStencilRenderBuffer);\n            gpuRenderTarget.depthStencilRenderBuffer = null;\n        }\n\n        gpuRenderTarget.msaaRenderBuffer.forEach((renderBuffer) =>\n        {\n            gl.deleteRenderbuffer(renderBuffer);\n        });\n\n        gpuRenderTarget.msaaRenderBuffer = null;\n    }\n\n    public clear(_renderTarget: RenderTarget, clear: CLEAR_OR_BOOL, clearColor?: RgbaArray)\n    {\n        if (!clear) return;\n\n        const renderTargetSystem = this._renderTargetSystem;\n\n        // if clear is boolean..\n        if (typeof clear === 'boolean')\n        {\n            clear = clear ? CLEAR.ALL : CLEAR.NONE;\n        }\n\n        const gl = this._renderer.gl;\n\n        if (clear & CLEAR.COLOR)\n        {\n            clearColor ??= renderTargetSystem.defaultClearColor;\n\n            const clearColorCache = this._clearColorCache;\n            const clearColorArray = clearColor as number[];\n\n            if (clearColorCache[0] !== clearColorArray[0]\n                || clearColorCache[1] !== clearColorArray[1]\n                || clearColorCache[2] !== clearColorArray[2]\n                || clearColorCache[3] !== clearColorArray[3])\n            {\n                clearColorCache[0] = clearColorArray[0];\n                clearColorCache[1] = clearColorArray[1];\n                clearColorCache[2] = clearColorArray[2];\n                clearColorCache[3] = clearColorArray[3];\n\n                gl.clearColor(clearColorArray[0], clearColorArray[1], clearColorArray[2], clearColorArray[3]);\n            }\n        }\n\n        gl.clear(clear);\n    }\n\n    public resizeGpuRenderTarget(renderTarget: RenderTarget)\n    {\n        if (renderTarget.isRoot) return;\n\n        const renderTargetSystem = this._renderTargetSystem;\n\n        const glRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n\n        this._resizeColor(renderTarget, glRenderTarget);\n\n        if (renderTarget.stencil || renderTarget.depth)\n        {\n            this._resizeStencil(glRenderTarget);\n        }\n    }\n\n    private _initColor(renderTarget: RenderTarget, glRenderTarget: GlRenderTarget)\n    {\n        const renderer = this._renderer;\n\n        const gl = renderer.gl;\n        // deal with our outputs..\n        const resolveTargetFramebuffer = gl.createFramebuffer();\n\n        glRenderTarget.resolveTargetFramebuffer = resolveTargetFramebuffer;\n\n        // set up the texture..\n        gl.bindFramebuffer(gl.FRAMEBUFFER, resolveTargetFramebuffer);\n\n        glRenderTarget.width = renderTarget.colorTexture.source.pixelWidth;\n        glRenderTarget.height = renderTarget.colorTexture.source.pixelHeight;\n\n        const colorTextures = renderTarget.colorTextures;\n\n        colorTextures.forEach((colorTexture, i) =>\n        {\n            const source = colorTexture.source;\n\n            if (source.antialias)\n            {\n                if (renderer.context.supports.msaa)\n                {\n                    glRenderTarget.msaa = true;\n                }\n                else\n                {\n                    warn('[RenderTexture] Antialiasing on textures is not supported in WebGL1');\n                }\n            }\n\n            // TODO bindSource could return the glTexture\n            renderer.texture.bindSource(source, 0);\n            const glSource = renderer.texture.getGlSource(source);\n\n            const glTexture = glSource.texture;\n\n            gl.framebufferTexture2D(gl.FRAMEBUFFER,\n                gl.COLOR_ATTACHMENT0 + i,\n                3553, // texture.target,\n                glTexture,\n                0);// mipLevel);\n        });\n\n        if (glRenderTarget.msaa)\n        {\n            const viewFramebuffer = gl.createFramebuffer();\n\n            glRenderTarget.framebuffer = viewFramebuffer;\n\n            gl.bindFramebuffer(gl.FRAMEBUFFER, viewFramebuffer);\n\n            renderTarget.colorTextures.forEach((_, i) =>\n            {\n                const msaaRenderBuffer = gl.createRenderbuffer();\n\n                glRenderTarget.msaaRenderBuffer[i] = msaaRenderBuffer;\n            });\n        }\n        else\n        {\n            glRenderTarget.framebuffer = resolveTargetFramebuffer;\n        }\n\n        this._resizeColor(renderTarget, glRenderTarget);\n    }\n\n    private _resizeColor(renderTarget: RenderTarget, glRenderTarget: GlRenderTarget)\n    {\n        const source = renderTarget.colorTexture.source;\n\n        glRenderTarget.width = source.pixelWidth;\n        glRenderTarget.height = source.pixelHeight;\n\n        renderTarget.colorTextures.forEach((colorTexture, i) =>\n        {\n            // nno need to resize the first texture..\n            if (i === 0) return;\n\n            colorTexture.source.resize(source.width, source.height, source._resolution);\n        });\n\n        if (glRenderTarget.msaa)\n        {\n            const renderer = this._renderer;\n            const gl = renderer.gl;\n\n            const viewFramebuffer = glRenderTarget.framebuffer;\n\n            gl.bindFramebuffer(gl.FRAMEBUFFER, viewFramebuffer);\n\n            renderTarget.colorTextures.forEach((colorTexture, i) =>\n            {\n                const source = colorTexture.source;\n\n                renderer.texture.bindSource(source, 0);\n                const glSource = renderer.texture.getGlSource(source);\n\n                const glInternalFormat = glSource.internalFormat;\n\n                const msaaRenderBuffer = glRenderTarget.msaaRenderBuffer[i];\n\n                gl.bindRenderbuffer(\n                    gl.RENDERBUFFER,\n                    msaaRenderBuffer\n                );\n\n                gl.renderbufferStorageMultisample(\n                    gl.RENDERBUFFER,\n                    4,\n                    glInternalFormat,\n                    source.pixelWidth,\n                    source.pixelHeight\n                );\n\n                gl.framebufferRenderbuffer(\n                    gl.FRAMEBUFFER,\n                    gl.COLOR_ATTACHMENT0 + i,\n                    gl.RENDERBUFFER,\n                    msaaRenderBuffer\n                );\n            });\n        }\n    }\n\n    private _initStencil(glRenderTarget: GlRenderTarget)\n    {\n        // this already exists on the default screen\n        if (glRenderTarget.framebuffer === null) return;\n\n        const gl = this._renderer.gl;\n\n        const depthStencilRenderBuffer = gl.createRenderbuffer();\n\n        glRenderTarget.depthStencilRenderBuffer = depthStencilRenderBuffer;\n\n        gl.bindRenderbuffer(\n            gl.RENDERBUFFER,\n            depthStencilRenderBuffer\n        );\n\n        gl.framebufferRenderbuffer(\n            gl.FRAMEBUFFER,\n            gl.DEPTH_STENCIL_ATTACHMENT,\n            gl.RENDERBUFFER,\n            depthStencilRenderBuffer\n        );\n\n        // TDO DO>>\n        this._resizeStencil(glRenderTarget);\n    }\n\n    private _resizeStencil(glRenderTarget: GlRenderTarget)\n    {\n        const gl = this._renderer.gl;\n\n        gl.bindRenderbuffer(\n            gl.RENDERBUFFER,\n            glRenderTarget.depthStencilRenderBuffer\n        );\n\n        if (glRenderTarget.msaa)\n        {\n            gl.renderbufferStorageMultisample(\n                gl.RENDERBUFFER,\n                4,\n                gl.DEPTH24_STENCIL8,\n                glRenderTarget.width,\n                glRenderTarget.height\n            );\n        }\n        else\n        {\n            gl.renderbufferStorage(\n                gl.RENDERBUFFER,\n                this._renderer.context.webGLVersion === 2\n                    ? gl.DEPTH24_STENCIL8\n                    : gl.DEPTH_STENCIL,\n                glRenderTarget.width,\n                glRenderTarget.height\n            );\n        }\n    }\n\n    public prerender(renderTarget: RenderTarget)\n    {\n        const resource = renderTarget.colorTexture.resource;\n\n        // if the render target is a canvas, ensure its size matches the source\n        if (this._renderer.context.multiView && CanvasSource.test(resource))\n        {\n            this._renderer.context.ensureCanvasSize(resource);\n        }\n    }\n\n    public postrender(renderTarget: RenderTarget)\n    {\n        // if multiView is not enabled, we don't need to do anything\n        if (!this._renderer.context.multiView) return;\n\n        // if the render target is a canvas, we need to copy the pixels from the gl canvas\n        // to the canvas target\n        if (CanvasSource.test(renderTarget.colorTexture.resource))\n        {\n            const contextCanvas = this._renderer.context.canvas;\n            const canvasSource = renderTarget.colorTexture as unknown as CanvasSource;\n\n            canvasSource.context2D.drawImage(\n                contextCanvas as CanvasImageSource,\n                0, canvasSource.pixelHeight - contextCanvas.height\n            );\n        }\n    }\n\n    private _setDrawBuffers(renderTarget: RenderTarget, gl: GlRenderingContext): void\n    {\n        const count = renderTarget.colorTextures.length;\n        const bufferArray = this._drawBuffersCache[count];\n\n        if (this._renderer.context.webGLVersion === 1)\n        {\n            const ext = this._renderer.context.extensions.drawBuffers;\n\n            if (!ext)\n            {\n                warn('[RenderTexture] This WebGL1 context does not support rendering to multiple targets');\n            }\n            else\n            {\n                ext.drawBuffersWEBGL(bufferArray);\n            }\n        }\n        else\n        {\n            // WebGL2 has built in support\n            gl.drawBuffers(bufferArray);\n        }\n    }\n}\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { generateShaderSyncCode } from './GenerateShaderSyncCode';\nimport { generateProgram } from './program/generateProgram';\n\nimport type { BufferResource } from '../../shared/buffer/BufferResource';\nimport type { Shader } from '../../shared/shader/Shader';\nimport type { UniformGroup } from '../../shared/shader/UniformGroup';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\nimport type { WebGLRenderer } from '../WebGLRenderer';\nimport type { GlProgram } from './GlProgram';\nimport type { GlProgramData } from './GlProgramData';\n\n/** @internal */\nexport interface ShaderSyncData\n{\n    textureCount: number;\n    blockIndex: number;\n}\n\n/** @internal */\nexport type ShaderSyncFunction = (renderer: WebGLRenderer, shader: Shader, syncData: ShaderSyncData) => void;\n\n// default sync data so we don't create a new one each time!\nconst defaultSyncData: ShaderSyncData = {\n    textureCount: 0,\n    blockIndex: 0,\n};\n\n/**\n * System plugin to the renderer to manage the shaders for WebGL.\n * @category rendering\n * @advanced\n */\nexport class GlShaderSystem\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'shader',\n    } as const;\n\n    /** @internal */\n    public _activeProgram: GlProgram = null;\n\n    private _programDataHash: Record<string, GlProgramData> = Object.create(null);\n    private readonly _renderer: WebGLRenderer;\n    /** @internal */\n    public _gl: WebGL2RenderingContext;\n    private _shaderSyncFunctions: Record<string, ShaderSyncFunction> = Object.create(null);\n\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n    }\n\n    protected contextChange(gl: GlRenderingContext): void\n    {\n        this._gl = gl;\n\n        this._programDataHash = Object.create(null);\n        /**\n         * these need to also be cleared as internally some uniforms are set as an optimisation as the sync\n         * function is generated. Specifically the texture ints.\n         */\n        this._shaderSyncFunctions = Object.create(null);\n        this._activeProgram = null;\n    }\n\n    /**\n     * Changes the current shader to the one given in parameter.\n     * @param shader - the new shader\n     * @param skipSync - false if the shader should automatically sync its uniforms.\n     * @returns the glProgram that belongs to the shader.\n     */\n    public bind(shader: Shader, skipSync?: boolean): void\n    {\n        this._setProgram(shader.glProgram);\n\n        if (skipSync) return;\n\n        defaultSyncData.textureCount = 0;\n        defaultSyncData.blockIndex = 0;\n\n        let syncFunction = this._shaderSyncFunctions[shader.glProgram._key];\n\n        if (!syncFunction)\n        {\n            syncFunction = this._shaderSyncFunctions[shader.glProgram._key] = this._generateShaderSync(shader, this);\n        }\n\n        // TODO: take into account number of TF buffers. Currently works only with interleaved\n        this._renderer.buffer.nextBindBase(!!shader.glProgram.transformFeedbackVaryings);\n        syncFunction(this._renderer, shader, defaultSyncData);\n    }\n\n    /**\n     * Updates the uniform group.\n     * @param uniformGroup - the uniform group to update\n     */\n    public updateUniformGroup(uniformGroup: UniformGroup): void\n    {\n        this._renderer.uniformGroup.updateUniformGroup(uniformGroup, this._activeProgram, defaultSyncData);\n    }\n\n    /**\n     * Binds a uniform block to the shader.\n     * @param uniformGroup - the uniform group to bind\n     * @param name - the name of the uniform block\n     * @param index - the index of the uniform block\n     */\n    public bindUniformBlock(uniformGroup: UniformGroup | BufferResource, name: string, index = 0): void\n    {\n        const bufferSystem = this._renderer.buffer;\n        const programData = this._getProgramData(this._activeProgram);\n\n        const isBufferResource = (uniformGroup as BufferResource)._bufferResource;\n\n        if (!isBufferResource)\n        {\n            this._renderer.ubo.updateUniformGroup(uniformGroup as UniformGroup);\n        }\n\n        const buffer = uniformGroup.buffer;\n\n        const glBuffer = bufferSystem.updateBuffer(buffer);\n\n        const boundLocation = bufferSystem.freeLocationForBufferBase(glBuffer);\n\n        if (isBufferResource)\n        {\n            const { offset, size } = (uniformGroup as BufferResource);\n\n            // trivial case of buffer resource, can be cached\n            if (offset === 0 && size === buffer.data.byteLength)\n            {\n                bufferSystem.bindBufferBase(glBuffer, boundLocation);\n            }\n            else\n            {\n                bufferSystem.bindBufferRange(glBuffer, boundLocation, offset);\n            }\n        }\n        else if (bufferSystem.getLastBindBaseLocation(glBuffer) !== boundLocation)\n        {\n            // confirmation that buffer isn't there yet\n            bufferSystem.bindBufferBase(glBuffer, boundLocation);\n        }\n\n        const uniformBlockIndex = this._activeProgram._uniformBlockData[name].index;\n\n        if (programData.uniformBlockBindings[index] === boundLocation) return;\n        programData.uniformBlockBindings[index] = boundLocation;\n\n        this._renderer.gl.uniformBlockBinding(programData.program, uniformBlockIndex, boundLocation);\n    }\n\n    private _setProgram(program: GlProgram)\n    {\n        if (this._activeProgram === program) return;\n\n        this._activeProgram = program;\n\n        const programData = this._getProgramData(program);\n\n        this._gl.useProgram(programData.program);\n    }\n\n    /**\n     * @param program - the program to get the data for\n     * @internal\n     */\n    public _getProgramData(program: GlProgram): GlProgramData\n    {\n        return this._programDataHash[program._key] || this._createProgramData(program);\n    }\n\n    private _createProgramData(program: GlProgram): GlProgramData\n    {\n        const key = program._key;\n\n        this._programDataHash[key] = generateProgram(this._gl, program);\n\n        return this._programDataHash[key];\n    }\n\n    public destroy(): void\n    {\n        for (const key of Object.keys(this._programDataHash))\n        {\n            this._programDataHash[key].destroy();\n        }\n\n        this._programDataHash = null;\n        this._shaderSyncFunctions = null;\n        this._activeProgram = null;\n        (this._renderer as null) = null;\n        this._gl = null;\n    }\n\n    /**\n     * Creates a function that can be executed that will sync the shader as efficiently as possible.\n     * Overridden by the unsafe eval package if you don't want eval used in your project.\n     * @param shader - the shader to generate the sync function for\n     * @param shaderSystem - the shader system to use\n     * @returns - the generated sync function\n     * @ignore\n     */\n    public _generateShaderSync(shader: Shader, shaderSystem: GlShaderSystem): ShaderSyncFunction\n    {\n        return generateShaderSyncCode(shader, shaderSystem);\n    }\n\n    public resetState(): void\n    {\n        this._activeProgram = null;\n    }\n}\n","import { warn } from '../../../../../utils/logging/warn';\nimport { GlProgramData } from '../GlProgramData';\nimport { compileShader } from './compileShader';\nimport { defaultValue } from './defaultValue';\nimport { extractAttributesFromGlProgram } from './extractAttributesFromGlProgram';\nimport { getUboData } from './getUboData';\nimport { getUniformData } from './getUniformData';\nimport { logProgramError } from './logProgramError';\n\nimport type { GlRenderingContext } from '../../context/GlRenderingContext';\nimport type { GlProgram } from '../GlProgram';\nimport type { IGLUniformData } from '../GlProgramData';\n\n/**\n * generates a WebGL Program object from a high level Pixi Program.\n * @param gl - a rendering context on which to generate the program\n * @param program - the high level Pixi Program.\n * @private\n */\nexport function generateProgram(gl: GlRenderingContext, program: GlProgram): GlProgramData\n{\n    const glVertShader = compileShader(gl, gl.VERTEX_SHADER, program.vertex);\n    const glFragShader = compileShader(gl, gl.FRAGMENT_SHADER, program.fragment);\n\n    const webGLProgram = gl.createProgram();\n\n    gl.attachShader(webGLProgram, glVertShader);\n    gl.attachShader(webGLProgram, glFragShader);\n\n    const transformFeedbackVaryings = program.transformFeedbackVaryings;\n\n    if (transformFeedbackVaryings)\n    {\n        if (typeof gl.transformFeedbackVaryings !== 'function')\n        {\n            // #if _DEBUG\n            warn(`TransformFeedback is not supported but TransformFeedbackVaryings are given.`);\n            // #endif\n        }\n        else\n        {\n            gl.transformFeedbackVaryings(\n                webGLProgram,\n                transformFeedbackVaryings.names,\n                transformFeedbackVaryings.bufferMode === 'separate'\n                    ? gl.SEPARATE_ATTRIBS\n                    : gl.INTERLEAVED_ATTRIBS\n            );\n        }\n    }\n\n    gl.linkProgram(webGLProgram);\n\n    if (!gl.getProgramParameter(webGLProgram, gl.LINK_STATUS))\n    {\n        logProgramError(gl, webGLProgram, glVertShader, glFragShader);\n    }\n\n    // GLSL 1.00: bind attributes sorted by name in ascending order\n    // GLSL 3.00: don't change the attribute locations that where chosen by the compiler\n    //            or assigned by the layout specifier in the shader source code\n    program._attributeData = extractAttributesFromGlProgram(\n        webGLProgram,\n        gl,\n        !(/^[ \\t]*#[ \\t]*version[ \\t]+300[ \\t]+es[ \\t]*$/m).test(program.vertex)\n    );\n\n    program._uniformData = getUniformData(webGLProgram, gl);\n    program._uniformBlockData = getUboData(webGLProgram, gl);\n\n    gl.deleteShader(glVertShader);\n    gl.deleteShader(glFragShader);\n\n    const uniformData: {[key: string]: IGLUniformData} = {};\n\n    for (const i in program._uniformData)\n    {\n        const data = program._uniformData[i];\n\n        uniformData[i] = {\n            location: gl.getUniformLocation(webGLProgram, i),\n            value: defaultValue(data.type, data.size),\n        };\n    }\n\n    const glProgram = new GlProgramData(webGLProgram, uniformData);\n\n    return glProgram;\n}\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { generateUniformsSync } from './utils/generateUniformsSync';\n\nimport type { UniformsSyncCallback } from '../../shared/shader/types';\nimport type { UniformGroup } from '../../shared/shader/UniformGroup';\nimport type { System } from '../../shared/system/System';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\nimport type { WebGLRenderer } from '../WebGLRenderer';\nimport type { GlProgram, GlUniformData } from './GlProgram';\n\n/**\n * System plugin to the renderer to manage shaders.\n * @category rendering\n * @advanced\n */\nexport class GlUniformGroupSystem implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'uniformGroup',\n    } as const;\n\n    /**\n     * The current WebGL rendering context.\n     * @type {WebGLRenderingContext}\n     */\n    protected gl: GlRenderingContext;\n\n    /** Cache to holds the generated functions. Stored against UniformObjects unique signature. */\n    private _cache: Record<string, UniformsSyncCallback> = {};\n    private _renderer: WebGLRenderer;\n\n    private _uniformGroupSyncHash: Record<string, Record<string, UniformsSyncCallback>> = {};\n\n    /** @param renderer - The renderer this System works for. */\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n\n        this.gl = null;\n        this._cache = {};\n    }\n\n    protected contextChange(gl: GlRenderingContext): void\n    {\n        this.gl = gl;\n    }\n\n    /**\n     * Uploads the uniforms values to the currently bound shader.\n     * @param group - the uniforms values that be applied to the current shader\n     * @param program\n     * @param syncData\n     * @param syncData.textureCount\n     */\n    public updateUniformGroup(group: UniformGroup, program: GlProgram, syncData: { textureCount: number }): void\n    {\n        const programData = this._renderer.shader._getProgramData(program);\n\n        if (!group.isStatic || group._dirtyId !== programData.uniformDirtyGroups[group.uid])\n        {\n            programData.uniformDirtyGroups[group.uid] = group._dirtyId;\n\n            const syncFunc = this._getUniformSyncFunction(group, program);\n\n            syncFunc(programData.uniformData, group.uniforms, this._renderer, syncData);\n        }\n    }\n\n    /**\n     * Overridable by the pixi.js/unsafe-eval package to use static syncUniforms instead.\n     * @param group\n     * @param program\n     */\n    private _getUniformSyncFunction(group: UniformGroup, program: GlProgram): UniformsSyncCallback\n    {\n        return this._uniformGroupSyncHash[group._signature]?.[program._key]\n            || this._createUniformSyncFunction(group, program);\n    }\n\n    private _createUniformSyncFunction(group: UniformGroup, program: GlProgram): UniformsSyncCallback\n    {\n        const uniformGroupSyncHash = this._uniformGroupSyncHash[group._signature]\n            || (this._uniformGroupSyncHash[group._signature] = {});\n\n        const id = this._getSignature(group, program._uniformData, 'u');\n\n        if (!this._cache[id])\n        {\n            this._cache[id] = this._generateUniformsSync(group, program._uniformData);\n        }\n\n        uniformGroupSyncHash[program._key] = this._cache[id];\n\n        return uniformGroupSyncHash[program._key];\n    }\n\n    private _generateUniformsSync(group: UniformGroup, uniformData: Record<string, GlUniformData>): UniformsSyncCallback\n    {\n        return generateUniformsSync(group, uniformData);\n    }\n\n    /**\n     * Takes a uniform group and data and generates a unique signature for them.\n     * @param group - The uniform group to get signature of\n     * @param group.uniforms\n     * @param uniformData - Uniform information generated by the shader\n     * @param preFix\n     * @returns Unique signature of the uniform group\n     */\n    private _getSignature(group: UniformGroup, uniformData: Record<string, any>, preFix: string): string\n    {\n        const uniforms = group.uniforms;\n\n        const strings = [`${preFix}-`];\n\n        for (const i in uniforms)\n        {\n            strings.push(i);\n\n            if (uniformData[i])\n            {\n                strings.push(uniformData[i].type);\n            }\n        }\n\n        return strings.join('-');\n    }\n\n    /** Destroys this System and removes all its textures. */\n    public destroy(): void\n    {\n        this._renderer = null;\n        this._cache = null;\n    }\n}\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { GCManagedHash } from '../../../../utils/data/GCManagedHash';\nimport { Texture } from '../../shared/texture/Texture';\nimport { GlTexture } from './GlTexture';\nimport { glUploadBufferImageResource } from './uploaders/glUploadBufferImageResource';\nimport { glUploadCompressedTextureResource } from './uploaders/glUploadCompressedTextureResource';\nimport { glUploadImageResource } from './uploaders/glUploadImageResource';\nimport { glUploadVideoResource } from './uploaders/glUploadVideoResource';\nimport { applyStyleParams } from './utils/applyStyleParams';\nimport { mapFormatToGlFormat } from './utils/mapFormatToGlFormat';\nimport { mapFormatToGlInternalFormat } from './utils/mapFormatToGlInternalFormat';\nimport { mapFormatToGlType } from './utils/mapFormatToGlType';\nimport { unpremultiplyAlpha } from './utils/unpremultiplyAlpha';\n\nimport type { ICanvas } from '../../../../environment/canvas/ICanvas';\nimport type { System } from '../../shared/system/System';\nimport type { CanvasGenerator, GetPixelsOutput } from '../../shared/texture/GenerateCanvas';\nimport type { TextureSource } from '../../shared/texture/sources/TextureSource';\nimport type { BindableTexture } from '../../shared/texture/Texture';\nimport type { TextureStyle } from '../../shared/texture/TextureStyle';\nimport type { GlRenderingContext } from '../context/GlRenderingContext';\nimport type { WebGLRenderer } from '../WebGLRenderer';\nimport type { GLTextureUploader } from './uploaders/GLTextureUploader';\n\nconst BYTES_PER_PIXEL = 4;\n\n/**\n * The system for managing textures in WebGL.\n * @category rendering\n * @advanced\n */\nexport class GlTextureSystem implements System, CanvasGenerator\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n        ],\n        name: 'texture',\n    } as const;\n\n    private readonly _renderer: WebGLRenderer;\n    private readonly _managedTextures: GCManagedHash<TextureSource>;\n    /**\n     * @deprecated since 8.15.0\n     */\n    public get managedTextures(): Readonly<TextureSource[]> { return Object.values(this._managedTextures.items); }\n\n    private _glSamplers: Record<string, WebGLSampler> = Object.create(null);\n\n    private _boundTextures: TextureSource[] = [];\n    private _activeTextureLocation = -1;\n\n    private _boundSamplers: Record<number, WebGLSampler> = Object.create(null);\n\n    private readonly _uploads: Record<string, GLTextureUploader> = {\n        image: glUploadImageResource,\n        buffer: glUploadBufferImageResource,\n        video: glUploadVideoResource,\n        compressed: glUploadCompressedTextureResource,\n    };\n\n    private _gl: GlRenderingContext;\n    private _mapFormatToInternalFormat: Record<string, number>;\n    private _mapFormatToType: Record<string, number>;\n    private _mapFormatToFormat: Record<string, number>;\n\n    private _premultiplyAlpha = false;\n\n    // TODO - separate samplers will be a cool thing to add, but not right now!\n    private readonly _useSeparateSamplers = false;\n\n    constructor(renderer: WebGLRenderer)\n    {\n        this._renderer = renderer;\n        this._managedTextures = new GCManagedHash({\n            renderer,\n            type: 'resource',\n            onUnload: this.onSourceUnload.bind(this),\n            name: 'glTexture'\n        });\n    }\n\n    protected contextChange(gl: GlRenderingContext): void\n    {\n        this._gl = gl;\n\n        if (!this._mapFormatToInternalFormat)\n        {\n            this._mapFormatToInternalFormat = mapFormatToGlInternalFormat(gl, this._renderer.context.extensions);\n\n            this._mapFormatToType = mapFormatToGlType(gl);\n            this._mapFormatToFormat = mapFormatToGlFormat(gl);\n        }\n\n        this._managedTextures.removeAll(true);\n\n        this._glSamplers = Object.create(null);\n        this._boundSamplers = Object.create(null);\n        this._premultiplyAlpha = false;\n\n        for (let i = 0; i < 16; i++)\n        {\n            this.bind(Texture.EMPTY, i);\n        }\n    }\n\n    /**\n     * Initializes a texture source, if it has already been initialized nothing will happen.\n     * @param source - The texture source to initialize.\n     * @returns The initialized texture source.\n     */\n    public initSource(source: TextureSource)\n    {\n        this.bind(source);\n    }\n\n    public bind(texture: BindableTexture, location = 0)\n    {\n        const source = texture.source;\n\n        if (texture)\n        {\n            this.bindSource(source, location);\n\n            if (this._useSeparateSamplers)\n            {\n                this._bindSampler(source.style, location);\n            }\n        }\n        else\n        {\n            this.bindSource(null, location);\n\n            if (this._useSeparateSamplers)\n            {\n                this._bindSampler(null, location);\n            }\n        }\n    }\n\n    public bindSource(source: TextureSource, location = 0): void\n    {\n        const gl = this._gl;\n\n        source._gcLastUsed = this._renderer.gc.now;\n\n        if (this._boundTextures[location] !== source)\n        {\n            this._boundTextures[location] = source;\n            this._activateLocation(location);\n\n            source ||= Texture.EMPTY.source;\n\n            // bind texture and source!\n            const glTexture = this.getGlSource(source);\n\n            gl.bindTexture(glTexture.target, glTexture.texture);\n        }\n    }\n\n    private _bindSampler(style: TextureStyle, location = 0): void\n    {\n        const gl = this._gl;\n\n        if (!style)\n        {\n            this._boundSamplers[location] = null;\n            gl.bindSampler(location, null);\n\n            return;\n        }\n\n        const sampler = this._getGlSampler(style);\n\n        if (this._boundSamplers[location] !== sampler)\n        {\n            this._boundSamplers[location] = sampler;\n            gl.bindSampler(location, sampler);\n        }\n    }\n\n    public unbind(texture: BindableTexture): void\n    {\n        const source = texture.source;\n        const boundTextures = this._boundTextures;\n        const gl = this._gl;\n\n        for (let i = 0; i < boundTextures.length; i++)\n        {\n            if (boundTextures[i] === source)\n            {\n                this._activateLocation(i);\n\n                const glTexture = this.getGlSource(source);\n\n                gl.bindTexture(glTexture.target, null);\n                boundTextures[i] = null;\n            }\n        }\n    }\n\n    private _activateLocation(location: number): void\n    {\n        if (this._activeTextureLocation !== location)\n        {\n            this._activeTextureLocation = location;\n            this._gl.activeTexture(this._gl.TEXTURE0 + location);\n        }\n    }\n\n    private _initSource(source: TextureSource): GlTexture\n    {\n        const gl = this._gl;\n\n        const glTexture = new GlTexture(gl.createTexture());\n\n        glTexture.type = this._mapFormatToType[source.format];\n        glTexture.internalFormat = this._mapFormatToInternalFormat[source.format];\n        glTexture.format = this._mapFormatToFormat[source.format];\n\n        if (source.autoGenerateMipmaps && (this._renderer.context.supports.nonPowOf2mipmaps || source.isPowerOfTwo))\n        {\n            const biggestDimension = Math.max(source.width, source.height);\n\n            source.mipLevelCount = Math.floor(Math.log2(biggestDimension)) + 1;\n        }\n\n        source._gpuData[this._renderer.uid] = glTexture;\n\n        const added = this._managedTextures.add(source);\n\n        if (added)\n        {\n            source.on('update', this.onSourceUpdate, this);\n            source.on('resize', this.onSourceUpdate, this);\n            source.on('styleChange', this.onStyleChange, this);\n            source.on('updateMipmaps', this.onUpdateMipmaps, this);\n        }\n\n        this.onSourceUpdate(source);\n        this.updateStyle(source, false);\n\n        return glTexture;\n    }\n\n    protected onStyleChange(source: TextureSource): void\n    {\n        this.updateStyle(source, false);\n    }\n\n    protected updateStyle(source: TextureSource, firstCreation: boolean): void\n    {\n        const gl = this._gl;\n\n        const glTexture = this.getGlSource(source);\n\n        gl.bindTexture(gl.TEXTURE_2D, glTexture.texture);\n\n        this._boundTextures[this._activeTextureLocation] = source;\n\n        applyStyleParams(\n            source.style,\n            gl,\n            source.mipLevelCount > 1,\n            this._renderer.context.extensions.anisotropicFiltering,\n            'texParameteri',\n            gl.TEXTURE_2D,\n            // will force a clamp to edge if the texture is not a power of two\n            !this._renderer.context.supports.nonPowOf2wrapping && !source.isPowerOfTwo,\n            firstCreation,\n        );\n    }\n\n    protected onSourceUnload(source: TextureSource, contextLost = false): void\n    {\n        const glTexture = source._gpuData[this._renderer.uid] as GlTexture;\n\n        if (!glTexture) return;\n\n        if (!contextLost)\n        {\n            this.unbind(source);\n            this._gl.deleteTexture(glTexture.texture);\n        }\n        source.off('update', this.onSourceUpdate, this);\n        source.off('resize', this.onSourceUpdate, this);\n        source.off('styleChange', this.onStyleChange, this);\n        source.off('updateMipmaps', this.onUpdateMipmaps, this);\n    }\n\n    protected onSourceUpdate(source: TextureSource): void\n    {\n        const gl = this._gl;\n\n        const glTexture = this.getGlSource(source);\n\n        gl.bindTexture(gl.TEXTURE_2D, glTexture.texture);\n\n        this._boundTextures[this._activeTextureLocation] = source;\n\n        const premultipliedAlpha = source.alphaMode === 'premultiply-alpha-on-upload';\n\n        if (this._premultiplyAlpha !== premultipliedAlpha)\n        {\n            this._premultiplyAlpha = premultipliedAlpha;\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, premultipliedAlpha);\n        }\n\n        if (this._uploads[source.uploadMethodId])\n        {\n            this._uploads[source.uploadMethodId].upload(source, glTexture, gl, this._renderer.context.webGLVersion);\n        }\n        else\n        {\n            gl.texImage2D(\n                gl.TEXTURE_2D,\n                0,\n                glTexture.internalFormat,\n                source.pixelWidth,\n                source.pixelHeight,\n                0,\n                glTexture.format,\n                glTexture.type,\n                null,\n            );\n        }\n\n        if (source.autoGenerateMipmaps && source.mipLevelCount > 1)\n        {\n            this.onUpdateMipmaps(source, false);\n        }\n    }\n\n    protected onUpdateMipmaps(source: TextureSource, bind = true): void\n    {\n        if (bind) this.bindSource(source, 0);\n\n        const glTexture = this.getGlSource(source);\n\n        this._gl.generateMipmap(glTexture.target);\n    }\n\n    private _initSampler(style: TextureStyle): WebGLSampler\n    {\n        const gl = this._gl;\n\n        const glSampler = this._gl.createSampler();\n\n        this._glSamplers[style._resourceId] = glSampler;\n\n        applyStyleParams(\n            style,\n            gl,\n            this._boundTextures[this._activeTextureLocation].mipLevelCount > 1,\n            this._renderer.context.extensions.anisotropicFiltering,\n            'samplerParameteri',\n            glSampler,\n            false,\n            true,\n        );\n\n        return this._glSamplers[style._resourceId];\n    }\n\n    private _getGlSampler(sampler: TextureStyle): WebGLSampler\n    {\n        return this._glSamplers[sampler._resourceId] || this._initSampler(sampler);\n    }\n\n    public getGlSource(source: TextureSource): GlTexture\n    {\n        source._gcLastUsed = this._renderer.gc.now;\n\n        return source._gpuData[this._renderer.uid] as GlTexture || this._initSource(source);\n    }\n\n    public generateCanvas(texture: Texture): ICanvas\n    {\n        const { pixels, width, height } = this.getPixels(texture);\n\n        const canvas = DOMAdapter.get().createCanvas();\n\n        canvas.width = width;\n        canvas.height = height;\n\n        const ctx = canvas.getContext('2d');\n\n        if (ctx)\n        {\n            const imageData = ctx.createImageData(width, height);\n\n            imageData.data.set(pixels);\n            ctx.putImageData(imageData, 0, 0);\n        }\n\n        return canvas;\n    }\n\n    public getPixels(texture: Texture): GetPixelsOutput\n    {\n        const resolution = texture.source.resolution;\n        const frame = texture.frame;\n\n        const width = Math.max(Math.round(frame.width * resolution), 1);\n        const height = Math.max(Math.round(frame.height * resolution), 1);\n        const pixels = new Uint8Array(BYTES_PER_PIXEL * width * height);\n\n        const renderer = this._renderer;\n\n        const renderTarget = renderer.renderTarget.getRenderTarget(texture);\n        const glRenterTarget = renderer.renderTarget.getGpuRenderTarget(renderTarget);\n\n        const gl = renderer.gl;\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, glRenterTarget.resolveTargetFramebuffer);\n\n        gl.readPixels(\n            Math.round(frame.x * resolution),\n            Math.round(frame.y * resolution),\n            width,\n            height,\n            gl.RGBA,\n            gl.UNSIGNED_BYTE,\n            pixels\n        );\n\n        // if (texture.source.premultiplyAlpha > 0)\n        // TODO - premultiplied alpha does not exist right now, need to add that back in!\n        // eslint-disable-next-line no-constant-condition\n        if (false)\n        {\n            unpremultiplyAlpha(pixels);\n        }\n\n        return { pixels: new Uint8ClampedArray(pixels.buffer), width, height };\n    }\n\n    public destroy(): void\n    {\n        // we copy the array as the array with a slice as onSourceDestroy\n        // will remove the source from the real managedTextures array\n        this._managedTextures.destroy();\n        this._glSamplers = null;\n        this._boundTextures = null;\n        this._boundSamplers = null;\n        this._mapFormatToInternalFormat = null;\n        this._mapFormatToType = null;\n        this._mapFormatToFormat = null;\n        (this._uploads as null) = null;\n        (this._renderer as null) = null;\n    }\n\n    public resetState(): void\n    {\n        this._activeTextureLocation = -1;\n        this._boundTextures.fill(Texture.EMPTY.source);\n        this._boundSamplers = Object.create(null);\n\n        const gl = this._gl;\n\n        this._premultiplyAlpha = false;\n\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this._premultiplyAlpha);\n    }\n}\n\n","import type { GlRenderingContext } from '../../context/GlRenderingContext';\n\n/**\n * Returns a lookup table that maps each type-format pair to a compatible internal format.\n * @function mapTypeAndFormatToInternalFormat\n * @private\n * @param {WebGLRenderingContext} gl - The rendering context.\n * @returns Lookup table.\n */\nexport function mapFormatToGlFormat(gl: GlRenderingContext): Record<string, number>\n{\n    return {\n        // 8-bit formats\n        r8unorm: gl.RED,\n        r8snorm: gl.RED,\n        r8uint: gl.RED,\n        r8sint: gl.RED,\n\n        // 16-bit formats\n        r16uint: gl.RED,\n        r16sint:    gl.RED,\n        r16float: gl.RED,\n        rg8unorm:  gl.RG,\n        rg8snorm:   gl.RG,\n        rg8uint:  gl.RG,\n        rg8sint:  gl.RG,\n\n        // 32-bit formats\n        r32uint: gl.RED,\n        r32sint: gl.RED,\n        r32float: gl.RED,\n        rg16uint:   gl.RG,\n        rg16sint:  gl.RG,\n        rg16float:  gl.RG,\n        rgba8unorm: gl.RGBA,\n        'rgba8unorm-srgb': gl.RGBA,\n\n        // Packed 32-bit formats\n        rgba8snorm: gl.RGBA,\n        rgba8uint: gl.RGBA,\n        rgba8sint: gl.RGBA,\n        bgra8unorm: gl.RGBA,\n        'bgra8unorm-srgb': gl.RGBA,\n        rgb9e5ufloat: gl.RGB,\n        rgb10a2unorm: gl.RGBA,\n        rg11b10ufloat: gl.RGB,\n\n        // 64-bit formats\n        rg32uint: gl.RG,\n        rg32sint: gl.RG,\n        rg32float:  gl.RG,\n        rgba16uint: gl.RGBA,\n        rgba16sint: gl.RGBA,\n        rgba16float: gl.RGBA,\n\n        // 128-bit formats\n        rgba32uint: gl.RGBA,\n        rgba32sint: gl.RGBA,\n        rgba32float: gl.RGBA,\n\n        // Depth/stencil formats\n        stencil8: gl.STENCIL_INDEX8,\n        depth16unorm: gl.DEPTH_COMPONENT,\n        depth24plus: gl.DEPTH_COMPONENT,\n        'depth24plus-stencil8': gl.DEPTH_STENCIL,\n        depth32float: gl.DEPTH_COMPONENT,\n        'depth32float-stencil8': gl.DEPTH_STENCIL,\n\n    };\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Matrix } from '../../../maths/matrix/Matrix';\nimport { compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram';\nimport { localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit';\nimport { roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit';\nimport { textureBitGl } from '../../../rendering/high-shader/shader-bits/textureBit';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { warn } from '../../../utils/logging/warn';\n\nimport type { Mesh } from '../shared/Mesh';\nimport type { MeshAdaptor, MeshPipe } from '../shared/MeshPipe';\n\n/**\n * A MeshAdaptor that uses the WebGL to render meshes.\n * @category rendering\n * @ignore\n */\nexport class GlMeshAdaptor implements MeshAdaptor\n{\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipesAdaptor,\n        ],\n        name: 'mesh',\n    } as const;\n\n    private _shader: Shader;\n\n    public init(): void\n    {\n        const glProgram = compileHighShaderGlProgram({\n            name: 'mesh',\n            bits: [\n                localUniformBitGl,\n                textureBitGl,\n                roundPixelsBitGl,\n            ]\n        });\n\n        this._shader = new Shader({\n            glProgram,\n            resources: {\n                uTexture: Texture.EMPTY.source,\n                textureUniforms: {\n                    uTextureMatrix: { type: 'mat3x3<f32>', value: new Matrix() },\n                }\n            }\n        });\n    }\n\n    public execute(meshPipe: MeshPipe, mesh: Mesh): void\n    {\n        const renderer = meshPipe.renderer;\n\n        let shader: Shader = mesh._shader;\n\n        if (!shader)\n        {\n            shader = this._shader;\n\n            const texture = mesh.texture;\n            const source = texture.source;\n\n            shader.resources.uTexture = source;\n            shader.resources.uSampler = source.style;\n            shader.resources.textureUniforms.uniforms.uTextureMatrix = texture.textureMatrix.mapCoord;\n        }\n        else if (!shader.glProgram)\n        {\n            // #if _DEBUG\n            warn('Mesh shader has no glProgram', mesh.shader);\n            // #endif\n\n            return;\n        }\n\n        // setting the groups to be high to be compatible and not\n        // overlap any other groups\n        shader.groups[100] = renderer.globalUniforms.bindGroup;\n        shader.groups[101] = meshPipe.localUniformsBindGroup;\n\n        renderer.encoder.draw({\n            geometry: mesh._geometry,\n            shader,\n            state: mesh.state,\n        });\n    }\n\n    public destroy(): void\n    {\n        this._shader.destroy(true);\n        this._shader = null;\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Matrix } from '../../../maths/matrix/Matrix';\nimport { compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram';\nimport { colorBitGl } from '../../../rendering/high-shader/shader-bits/colorBit';\nimport { generateTextureBatchBitGl } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit';\nimport { localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit';\nimport { roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit';\nimport { getBatchSamplersUniformGroup } from '../../../rendering/renderers/gl/shader/getBatchSamplersUniformGroup';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup';\nimport { type Renderer } from '../../../rendering/renderers/types';\n\nimport type { Batch } from '../../../rendering/batcher/shared/Batcher';\nimport type { WebGLRenderer } from '../../../rendering/renderers/gl/WebGLRenderer';\nimport type { Graphics } from '../shared/Graphics';\nimport type { GraphicsAdaptor, GraphicsPipe } from '../shared/GraphicsPipe';\n\n/**\n * A GraphicsAdaptor that uses WebGL to render graphics.\n * @category rendering\n * @ignore\n */\nexport class GlGraphicsAdaptor implements GraphicsAdaptor\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLPipesAdaptor,\n        ],\n        name: 'graphics',\n    } as const;\n\n    public shader: Shader;\n\n    public contextChange(renderer: Renderer): void\n    {\n        const uniforms = new UniformGroup({\n            uColor: { value: new Float32Array([1, 1, 1, 1]), type: 'vec4<f32>' },\n            uTransformMatrix: { value: new Matrix(), type: 'mat3x3<f32>' },\n            uRound: { value: 0, type: 'f32' },\n        });\n\n        const maxTextures = renderer.limits.maxBatchableTextures;\n\n        const glProgram = compileHighShaderGlProgram({\n            name: 'graphics',\n            bits: [\n                colorBitGl,\n                generateTextureBatchBitGl(maxTextures),\n                localUniformBitGl,\n                roundPixelsBitGl,\n            ]\n        });\n\n        this.shader = new Shader({\n            glProgram,\n            resources: {\n                localUniforms: uniforms,\n                batchSamplers: getBatchSamplersUniformGroup(maxTextures),\n            }\n        });\n    }\n\n    public execute(graphicsPipe: GraphicsPipe, renderable: Graphics): void\n    {\n        const context = renderable.context;\n        const shader = context.customShader || this.shader;\n        const renderer = graphicsPipe.renderer as WebGLRenderer;\n        const contextSystem = renderer.graphicsContext;\n\n        const {\n            batcher, instructions,\n        } = contextSystem.getContextRenderData(context);\n\n        // WebGL specific..\n        shader.groups[0] = renderer.globalUniforms.bindGroup;\n\n        renderer.state.set(graphicsPipe.state);\n\n        renderer.shader.bind(shader);\n\n        renderer.geometry.bind(batcher.geometry, shader.glProgram);\n\n        const batches = instructions.instructions as Batch[];\n\n        for (let i = 0; i < instructions.instructionSize; i++)\n        {\n            const batch = batches[i];\n\n            if (batch.size)\n            {\n                for (let j = 0; j < batch.textures.count; j++)\n                {\n                    renderer.texture.bind(batch.textures.textures[j], j);\n                }\n\n                renderer.geometry.draw(batch.topology, batch.size, batch.start);\n            }\n        }\n    }\n\n    public destroy(): void\n    {\n        this.shader.destroy(true);\n        this.shader = null;\n    }\n}\n","import { extensions, ExtensionType } from '../../../extensions/Extensions';\nimport { GlGraphicsAdaptor } from '../../../scene/graphics/gl/GlGraphicsAdaptor';\nimport { GlMeshAdaptor } from '../../../scene/mesh/gl/GlMeshAdaptor';\nimport { GlBatchAdaptor } from '../../batcher/gl/GlBatchAdaptor';\nimport { AbstractRenderer } from '../shared/system/AbstractRenderer';\nimport { SharedRenderPipes, SharedSystems } from '../shared/system/SharedSystems';\nimport { RendererType } from '../types';\nimport { GlBufferSystem } from './buffer/GlBufferSystem';\nimport { GlContextSystem } from './context/GlContextSystem';\nimport { GlGeometrySystem } from './geometry/GlGeometrySystem';\nimport { GlBackBufferSystem } from './GlBackBufferSystem';\nimport { GlColorMaskSystem } from './GlColorMaskSystem';\nimport { GlEncoderSystem } from './GlEncoderSystem';\nimport { GlLimitsSystem } from './GlLimitsSystem';\nimport { GlStencilSystem } from './GlStencilSystem';\nimport { GlUboSystem } from './GlUboSystem';\nimport { GlRenderTargetSystem } from './renderTarget/GlRenderTargetSystem';\nimport { GlShaderSystem } from './shader/GlShaderSystem';\nimport { GlUniformGroupSystem } from './shader/GlUniformGroupSystem';\nimport { GlStateSystem } from './state/GlStateSystem';\nimport { GlTextureSystem } from './texture/GlTextureSystem';\n\nimport type { ICanvas } from '../../../environment/canvas/ICanvas';\nimport type { PipeConstructor } from '../shared/instructions/RenderPipe';\nimport type { SharedRendererOptions } from '../shared/system/SharedSystems';\nimport type { SystemConstructor } from '../shared/system/System';\nimport type { ExtractRendererOptions, ExtractSystemTypes } from '../shared/system/utils/typeUtils';\nimport type { GlRenderingContext } from './context/GlRenderingContext';\n\nconst DefaultWebGLSystems = [\n    ...SharedSystems,\n    GlUboSystem,\n    GlBackBufferSystem,\n    GlContextSystem,\n    GlLimitsSystem,\n    GlBufferSystem,\n    GlTextureSystem,\n    GlRenderTargetSystem,\n    GlGeometrySystem,\n    GlUniformGroupSystem,\n    GlShaderSystem,\n    GlEncoderSystem,\n    GlStateSystem,\n    GlStencilSystem,\n    GlColorMaskSystem,\n];\nconst DefaultWebGLPipes = [...SharedRenderPipes];\nconst DefaultWebGLAdapters = [GlBatchAdaptor, GlMeshAdaptor, GlGraphicsAdaptor];\n\n// installed systems will bbe added to this array by the extensions manager..\nconst systems: { name: string; value: SystemConstructor }[] = [];\nconst renderPipes: { name: string; value: PipeConstructor }[] = [];\nconst renderPipeAdaptors: { name: string; value: any }[] = [];\n\nextensions.handleByNamedList(ExtensionType.WebGLSystem, systems);\nextensions.handleByNamedList(ExtensionType.WebGLPipes, renderPipes);\nextensions.handleByNamedList(ExtensionType.WebGLPipesAdaptor, renderPipeAdaptors);\n\n// add all the default systems as well as any user defined ones from the extensions\nextensions.add(...DefaultWebGLSystems, ...DefaultWebGLPipes, ...DefaultWebGLAdapters);\n\n/**\n * The default WebGL renderer, uses WebGL2 contexts.\n * @category rendering\n * @standard\n * @interface\n */\nexport type WebGLSystems = ExtractSystemTypes<typeof DefaultWebGLSystems>\n& PixiMixins.RendererSystems & PixiMixins.WebGLSystems;\n\n/**\n * The default WebGL renderer, uses WebGL2 contexts.\n * @internal\n */\nexport type WebGLPipes = ExtractSystemTypes<typeof DefaultWebGLPipes> & PixiMixins.RendererPipes & PixiMixins.WebGLPipes;\n\n/**\n * Options for WebGLRenderer.\n * @category rendering\n * @standard\n */\nexport interface WebGLOptions\n    extends\n    SharedRendererOptions,\n    ExtractRendererOptions<typeof DefaultWebGLSystems>,\n    PixiMixins.WebGLOptions {}\n\n// eslint-disable-next-line requireExport/require-export-jsdoc, requireMemberAPI/require-member-api-doc\nexport interface WebGLRenderer<T extends ICanvas = HTMLCanvasElement>\n    extends AbstractRenderer<WebGLPipes, WebGLOptions, T>,\n    WebGLSystems {}\n\n/* eslint-disable max-len */\n/**\n * The WebGL PixiJS Renderer. This renderer allows you to use the most common graphics API, WebGL (and WebGL2).\n *\n * ```ts\n * // Create a new renderer\n * const renderer = new WebGLRenderer();\n * await renderer.init();\n *\n * // Add the renderer to the stage\n * document.body.appendChild(renderer.canvas);\n *\n * // Create a new stage\n * const stage = new Container();\n *\n * // Render the stage\n * renderer.render(stage);\n * ```\n *\n * You can use {@link autoDetectRenderer} to create a renderer that will automatically detect the best\n * renderer for the environment.\n *\n *\n * ```ts\n * // Create a new renderer\n * const renderer = await rendering.autoDetectRenderer({\n *    preference:'webgl',\n * });\n * ```\n *\n * The renderer is composed of systems that manage specific tasks. The following systems are added by default\n * whenever you create a WebGL renderer:\n *\n * | WebGL Core Systems                          | Systems that are specific to the WebGL renderer                               |\n * | ------------------------------------------- | ----------------------------------------------------------------------------- |\n * | {@link GlUboSystem}               | This manages WebGL2 uniform buffer objects feature for shaders                |\n * | {@link GlBackBufferSystem}        | manages the back buffer, used so that we can pixi can pixels from the screen  |\n * | {@link GlContextSystem}           | This manages the WebGL context and its extensions                             |\n * | {@link GlBufferSystem}            | This manages buffers and their GPU resources, keeps everything in sync        |\n * | {@link GlTextureSystem}           | This manages textures and their GPU resources, keeps everything in sync       |\n * | {@link GlRenderTargetSystem}      | This manages what we render too. For example the screen, or another texture   |\n * | {@link GlGeometrySystem}          | This manages geometry, used for drawing meshes via the GPU                    |\n * | {@link GlUniformGroupSystem}      | This manages uniform groups. Syncing shader properties with the GPU           |\n * | {@link GlShaderSystem}            | This manages shaders, programs that run on the GPU to output lovely pixels    |\n * | {@link GlEncoderSystem}           | This manages encoders, a WebGPU Paradigm, use it to draw a mesh + shader      |\n * | {@link GlStateSystem}             | This manages the state of the WebGL context. eg the various flags that can be set blend modes / depthTesting etc |\n * | {@link GlStencilSystem}           | This manages the stencil buffer. Used primarily for masking                   |\n * | {@link GlColorMaskSystem}         | This manages the color mask. Used for color masking                           |\n *\n * The breadth of the API surface provided by the renderer is contained within these systems.\n * @category rendering\n * @property {GlUboSystem} ubo - UboSystem instance.\n * @property {GlBackBufferSystem} backBuffer - BackBufferSystem instance.\n * @property {GlContextSystem} context - ContextSystem instance.\n * @property {GlBufferSystem} buffer - BufferSystem instance.\n * @property {GlTextureSystem} texture - TextureSystem instance.\n * @property {GlRenderTargetSystem} renderTarget - RenderTargetSystem instance.\n * @property {GlGeometrySystem} geometry - GeometrySystem instance.\n * @property {GlUniformGroupSystem} uniformGroup - UniformGroupSystem instance.\n * @property {GlShaderSystem} shader - ShaderSystem instance.\n * @property {GlEncoderSystem} encoder - EncoderSystem instance.\n * @property {GlStateSystem} state - StateSystem instance.\n * @property {GlStencilSystem} stencil - StencilSystem instance.\n * @property {GlColorMaskSystem} colorMask - ColorMaskSystem instance.\n * @extends AbstractRenderer\n * @standard\n */\nexport class WebGLRenderer<T extends ICanvas = HTMLCanvasElement>\n    extends AbstractRenderer<WebGLPipes, WebGLOptions, T>\n    implements WebGLSystems\n{\n    public gl: GlRenderingContext;\n\n    constructor()\n    {\n        const systemConfig = {\n            name: 'webgl',\n            type: RendererType.WEBGL,\n            systems,\n            renderPipes,\n            renderPipeAdaptors,\n        };\n\n        super(systemConfig);\n    }\n}\n"],"names":["GL_FORMATS","BUFFER_TYPE","GL_TARGETS","GL_WRAP_MODES","GL_TYPES","renderTarget","source"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48]}